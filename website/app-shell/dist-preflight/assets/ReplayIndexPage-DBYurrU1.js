import{u as i,j as e,X as n,M as r,L as c,aa as d,S as m}from"./index-KppIquYQ.js";import{u as x}from"./useQuery-DRhwJCEf.js";import{C as o}from"./chevron-right-D006Lv8J.js";import{L as h}from"./loader-2-Bq2xiA3F.js";import{P as p}from"./play-BzuQk0kl.js";import{S as u}from"./search-CNAZRxZu.js";import{g as j,a as g}from"./replay-BAbDgFb0.js";async function N(){return(await m.get("/api/v1/incidents",{params:{page:1,page_size:20,status:"all"}})).data}function f({incident:s}){return e.jsx(c,{to:`/founder/replay/${s.id}`,className:"block bg-gray-900/50 hover:bg-gray-900/70 border border-navy-border hover:border-blue-600 rounded-lg p-4 transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${j(s.severity)}`,children:s.severity.toUpperCase()}),e.jsx("span",{className:`text-sm ${g(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),e.jsx("h3",{className:"text-white font-medium mb-1",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(d,{className:"w-3 h-3"}),new Date(s.created_at).toLocaleString()]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(r,{className:"w-3 h-3"}),s.calls_affected," calls affected"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-blue-400",children:[e.jsx(p,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Replay"}),e.jsx(o,{className:"w-4 h-4"})]})]})})}function R(){i();const{data:s,isLoading:l,error:a}=x({queryKey:["incidents-for-replay"],queryFn:N});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Incident Replay"}),e.jsx("p",{className:"text-gray-400",children:"Select an incident to view its replay timeline. See what the agent saw, why it decided, and what it executed."})]}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-800 rounded-lg p-3 mb-6 flex items-center gap-3",children:[e.jsx(n,{className:"w-5 h-5 text-blue-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-300 font-medium",children:"Read-Only Replay"}),e.jsx("span",{className:"text-blue-400 ml-2 text-sm",children:"All replay data is immutable. No modifications are possible."})]})]}),l&&e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(h,{className:"w-8 h-8 animate-spin mx-auto text-blue-500"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Loading incidents..."})]})}),a&&e.jsxs("div",{className:"bg-red-900/20 border border-red-800 rounded-lg p-8 text-center",children:[e.jsx(r,{className:"w-12 h-12 mx-auto text-red-500"}),e.jsx("h2",{className:"text-xl text-red-400 mt-4",children:"Failed to Load Incidents"}),e.jsx("p",{className:"text-gray-400 mt-2",children:(a==null?void 0:a.message)||"Unknown error occurred"})]}),s&&s.incidents.length===0&&e.jsxs("div",{className:"bg-gray-900/30 border border-navy-border rounded-lg p-8 text-center",children:[e.jsx(u,{className:"w-12 h-12 mx-auto text-gray-500"}),e.jsx("h2",{className:"text-xl text-gray-400 mt-4",children:"No Incidents Found"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"When incidents occur, they will appear here for replay."})]}),s&&s.incidents.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-lg font-medium text-white",children:["Recent Incidents (",s.total," total)"]})}),e.jsx("div",{className:"space-y-3",children:s.incidents.map(t=>e.jsx(f,{incident:t},t.id))})]})]})}export{R as default};
