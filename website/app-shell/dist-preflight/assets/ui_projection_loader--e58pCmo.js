import{e as O}from"./index-Cumb797X.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=O("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),b=!0,s=[],y=500,c={prefix:"background: #d97706; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold;",debug:"color: #9ca3af;",info:"color: #60a5fa;",warn:"color: #fbbf24;",error:"color: #f87171;",category:"color: #a78bfa; font-weight: bold;",data:"color: #34d399;"};function A(){return new Date().toISOString().split("T")[1].slice(0,12)}function P(o){s.push(o),s.length>y&&s.shift()}function n(o,r,e,t){const a=A();P({timestamp:a,level:o,category:r,message:e,data:t});const u=c[o],f=`%c PREFLIGHT %c ${a} %c[${r}]%c ${e}`;t!==void 0?console[o](f,c.prefix,u,c.category,u,t):console[o](f,c.prefix,u,c.category,u)}const i={debug:(o,r,e)=>n("debug",o,r,e),info:(o,r,e)=>n("info",o,r,e),warn:(o,r,e)=>n("warn",o,r,e),error:(o,r,e)=>n("error",o,r,e),projection:{loadStart:()=>n("info","PROJECTION","Loading ui_projection_lock.json..."),loadSuccess:o=>n("info","PROJECTION",`Loaded: ${o.domains} domains, ${o.panels} panels, ${o.controls} controls`,o),loadError:o=>n("error","PROJECTION",`Failed to load: ${o.message}`,o),cached:()=>n("debug","PROJECTION","Using cached projection")},nav:{domainClick:o=>n("info","NAV",`Domain clicked: ${o}`),panelClick:(o,r)=>n("info","NAV",`Panel clicked: ${r}`,{panelId:o}),routeChange:(o,r)=>n("debug","NAV",`Route: ${o} â†’ ${r}`)},sidebar:{render:o=>n("debug","SIDEBAR",`Rendering ${o} domains`),expand:o=>n("debug","SIDEBAR",`Expanded: ${o}`),collapse:o=>n("debug","SIDEBAR",`Collapsed: ${o}`)},domain:{render:(o,r,e)=>n("info","DOMAIN",`Rendering ${o}: ${r} subdomains, ${e} panels`),subdomainExpand:o=>n("debug","DOMAIN",`Subdomain expanded: ${o}`),topicExpand:o=>n("debug","DOMAIN",`Topic expanded: ${o}`)},panel:{render:(o,r)=>n("info","PANEL",`Rendering panel: ${r}`,{panelId:o}),controlClick:(o,r)=>n("debug","PANEL",`Control clicked: ${o}`,{panelId:r}),notFound:o=>n("warn","PANEL",`Panel not found at route: ${o}`)},api:{request:o=>n("debug","API",`Request: ${o}`),success:(o,r)=>n("debug","API",`Success: ${o} (${r})`),error:(o,r)=>n("error","API",`Error: ${o}`,r)},group:o=>{console.group(`%c PREFLIGHT %c ${o}`,c.prefix,"color: white; font-weight: bold;")},groupEnd:()=>{console.groupEnd()},table:o=>{console.table(o)},getHistory:()=>[...s],exportHistory:()=>{const o=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),r=URL.createObjectURL(o),e=document.createElement("a");e.href=r,e.download=`preflight-logs-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,e.click(),URL.revokeObjectURL(r),n("info","EXPORT",`Exported ${s.length} log entries`)},clear:()=>{s.length=0,console.clear(),n("info","LOGGER","Log history cleared")},isActive:()=>b};typeof window<"u"&&(window.preflightLogger=i,window.exportPreflightLogs=i.exportHistory,console.log("%c PREFLIGHT MODE ACTIVE %c Use window.preflightLogger for debugging","background: #d97706; color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold; font-size: 14px;","color: #9ca3af; font-size: 12px;"));const E=["/precus/","/cus/"],g=["Overview","Activity","Incidents","Policies","Logs"],m=["FLAT","TREE","GRID","TABLE","CARD","LIST"];function w(o){if(!E.some(e=>o.startsWith(e)))throw new Error(`PROJECTION_ASSERTION_FAILED: Invalid route prefix "${o}". Routes must start with one of: ${E.join(", ")}`)}function R(o){if(!g.includes(o))throw new Error(`PROJECTION_ASSERTION_FAILED: Invalid domain name "${o}". Valid domains are: ${g.join(", ")}`)}function S(o){if(!o||typeof o!="object")throw new Error("PROJECTION_ASSERTION_FAILED: Panel must be an object");const r=o,e=["panel_id","panel_name","order","render_mode","visibility","enabled","controls","control_count","permissions","route","view_type"];for(const t of e)if(!(t in r))throw new Error(`PROJECTION_ASSERTION_FAILED: Panel missing required field "${t}"`);if(typeof r.panel_id!="string"||r.panel_id.length===0)throw new Error("PROJECTION_ASSERTION_FAILED: Panel panel_id must be a non-empty string");if(typeof r.route!="string")throw new Error("PROJECTION_ASSERTION_FAILED: Panel route must be a string");if(w(r.route),!m.includes(r.render_mode))throw new Error(`PROJECTION_ASSERTION_FAILED: Invalid render_mode "${r.render_mode}". Valid modes are: ${m.join(", ")}`)}function j(o){if(!o||typeof o!="object")throw new Error("PROJECTION_ASSERTION_FAILED: Projection must be an object");const r=o;if(typeof r.version!="string")throw new Error("PROJECTION_ASSERTION_FAILED: Projection must have version string");if(!Array.isArray(r.domains))throw new Error("PROJECTION_ASSERTION_FAILED: Projection must have domains array");if(r.domains.length===0)throw new Error("PROJECTION_ASSERTION_FAILED: Projection domains array cannot be empty");for(const e of r.domains)D(e)}function D(o){if(!o||typeof o!="object")throw new Error("PROJECTION_ASSERTION_FAILED: Domain must be an object");const r=o;if(typeof r.domain!="string")throw new Error("PROJECTION_ASSERTION_FAILED: Domain must have domain name");if(R(r.domain),typeof r.route!="string")throw new Error("PROJECTION_ASSERTION_FAILED: Domain must have route");if(w(r.route),!Array.isArray(r.panels))throw new Error("PROJECTION_ASSERTION_FAILED: Domain must have panels array");for(const e of r.panels)S(e)}function L(o){const r={valid:!0,errors:[],warnings:[],panelCount:0,domainCount:0};try{j(o);const e=o;r.domainCount=e.domains.length,r.panelCount=e.domains.reduce((t,a)=>t+a.panels.length,0)}catch(e){r.valid=!1,r.errors.push(e instanceof Error?e.message:String(e))}return r}let d=null,l=null;async function F(){if(d)return i.projection.cached(),d;if(l)throw l;try{i.projection.loadStart();const o="/projection/ui_projection_lock.json";i.api.request(o);const r=await fetch(o);if(!r.ok){const t=new Error(`Failed to load projection: ${r.status}`);throw i.api.error(o,t),t}i.api.success(o,r.status);const e=await r.json();return N(e),d=e,i.projection.loadSuccess({domains:e._statistics.domain_count,panels:e._statistics.panel_count,controls:e._statistics.control_count}),e}catch(o){throw l=o instanceof Error?o:new Error(String(o)),i.projection.loadError(l),l}}function h(){if(!d)throw new Error("Projection not loaded. Call loadProjection() first.");return d}function J(){return d!==null}function k(){return[...h().domains].sort((r,e)=>r.order-e.order)}function p(o){return h().domains.find(e=>e.domain===o)}function N(o){if(!o||typeof o!="object")throw new Error("Invalid projection: not an object");const r=o;if(!r._meta||typeof r._meta!="object")throw new Error("Invalid projection: missing _meta");const e=r._meta;if(e.type!=="ui_projection_lock")throw new Error(`Invalid projection: expected type 'ui_projection_lock', got '${e.type}'`);if(e.processing_stage!=="LOCKED")throw new Error(`Invalid projection: expected stage 'LOCKED', got '${e.processing_stage}'`);if(!r._contract||typeof r._contract!="object")throw new Error("Invalid projection: missing _contract");if(!r._contract.renderer_must_consume_only_this_file)throw new Error("Invalid projection: contract violation");if(!Array.isArray(r.domains))throw new Error("Invalid projection: domains must be an array");if(r.domains.length===0)throw new Error("Invalid projection: domains array is empty");const a=L(o);a.valid||i.projection.loadError(new Error(`Validation warnings: ${a.errors.join(", ")}`))}function V(o){const r=p(o);if(!r)return[];const e=new Set;for(const t of r.panels)t.subdomain&&e.add(t.subdomain);return Array.from(e)}function T(o,r){const e=p(o);return e?e.panels.filter(t=>t.subdomain===r).sort((t,a)=>String(t.order).localeCompare(String(a.order))):[]}function _(o,r){const e=o.replace(/_/g," ").toLowerCase();switch(r){case"domain":return`Provides an overview of ${e} across your system.`;case"subdomain":return`Manages ${e} configuration and monitoring.`;case"panel":return`Displays ${e} data and controls.`;default:return`Overview of ${e}.`}}function I(o){return o.short_description?o:{...o,short_description:_(o.panel_name,"panel"),_normalization:{auto_description:!0}}}function $(o){const r=o.panels.map(I);return o.short_description?{...o,panels:r}:{...o,panels:r,short_description:_(o.domain,"domain"),_normalization:{auto_description:!0}}}function z(o,r){return T(o,r).map(I)}function H(o){const r=p(o);if(r)return $(r)}export{C as L,V as a,H as b,z as c,k as g,J as i,F as l,i as p};
