# Migration Manifest Summary

**Generated by:** `hoc_phase0_manifest_generator.py`
**Source:** `V3_MANUAL_AUDIT_WORKBOOK.md`
**Total entries:** 83
**Reference:** PIN-470, Phase 0

## Status Report

| Status | Count | Description |
|--------|-------|-------------|
| PENDING | 70 | Clean move — no file at target |
| DELETE_DUPLICATE | 13 | Target already has CONFIRMED CORRECT copy; source deleted |
| CONFLICT | 0 | — |
| UNRESOLVED | 0 | — |

## Conflict Resolution Log (13 DELETE_DUPLICATE entries)

All 13 former CONFLICT entries were resolved. In each case the target domain already held a workbook-CONFIRMED copy of the same file. The source (MISPLACED) copy was deleted.

### Import Repoints (3 files required repointing)

| Migration ID | Caller File | Old Import | New Import |
|--------------|-------------|------------|------------|
| M016 | `hoc/api/cus/policies/guard.py:1837` | `incidents.L5_engines.evidence_report` | `logs.L5_engines.evidence_report` |
| M022 | `hoc/api/cus/incidents/incidents.py:1852,1918,1984` | `incidents.L5_engines.pdf_renderer` | `logs.L5_engines.pdf_renderer` |
| M066 | `hoc/api/cus/policies/guard.py:83` | `policies.L5_engines.certificate` | `logs.L5_engines.certificate` |

### Zero-Caller Deletions (10 files, no imports to repoint)

| ID | Deleted Source | Canonical Target |
|----|---------------|------------------|
| M020 | `incidents/L5_engines/panel_invariant_monitor.py` | `general/L5_engines/panel_invariant_monitor.py` |
| M024 | `incidents/L5_engines/runtime_switch.py` | `general/L5_engines/runtime_switch.py` |
| M031 | `logs/L5_engines/connectors_facade.py` | `integrations/L5_engines/connectors_facade.py` |
| M033 | `logs/L5_engines/datasources_facade.py` | `integrations/L5_engines/datasources_facade.py` |
| M034 | `logs/L5_engines/detection_facade.py` | `analytics/L5_engines/detection_facade.py` |
| M040 | `logs/L5_engines/scheduler_facade.py` | `general/L5_engines/scheduler_facade.py` |
| M050 | `policies/L6_drivers/alert_emitter.py` | `general/L6_drivers/alert_emitter.py` |
| M054 | `policies/L6_drivers/cross_domain.py` | `general/L6_drivers/cross_domain.py` |
| M063 | `policies/L5_engines/audit_evidence.py` | `logs/L5_engines/audit_evidence.py` |
| M079 | `integrations/L5_engines/identity_resolver.py` | `account/L5_engines/identity_resolver.py` |

### Investigation Notes

- **M034** (`detection_facade.py`): Source had orphaned `AnomalySeverity` enum (LOW/MEDIUM/HIGH). Target already imports from `cost_anomaly_detector.py`. The integrations domain has a 4-value variant (adds CRITICAL). No consolidation needed for this migration.
- **M050** (`alert_emitter.py`): Source used session-per-call factory (`create_alert_emitter`) — correct L6 contract. Target uses singleton (`get_alert_emitter`) — violates L6 driver contract. Neither has callers. **Future action:** fix target to session-per-call pattern.
- **M024** (`runtime_switch.py`): Target not in workbook but header-only diff, bodies identical. Target logger correctly namespaced to `general`.
- **M054** (`cross_domain.py`): Target not in workbook but actively imported by `general/L4_runtime/engines/__init__.py`. Target is the live copy.

## Source Domain Breakdown (moving FROM)

| Domain | Files |
|--------|-------|
| account | 4 |
| activity | 1 |
| analytics | 8 |
| incidents | 12 |
| integrations | 11 |
| logs | 16 |
| policies | 31 |

## Target Domain Breakdown (moving TO)

| Domain | Files |
|--------|-------|
| account | 2 |
| activity | 2 |
| analytics | 3 |
| apis | 1 |
| controls | 25 |
| general | 26 |
| integrations | 8 |
| logs | 10 |
| policies | 6 |

## Architecture Note: `general` Domain Role

> **`general` is the utility and bridge domain.** It serves as the source for system-wide
> utilities (runtime orchestration, lifecycle management, governance enforcement, scheduling)
> and acts as the bridge for cross-domain data transfer between domain boundaries.
> Files that coordinate across multiple domains (e.g., `cross_domain.py`, `alert_emitter.py`,
> `retrieval_mediator.py`) belong in `general` because no single domain owns cross-cutting
> orchestration. General does not own business decisions — it owns the infrastructure that
> enables domains to exchange data and coordinate execution.

## Phase 1 Execution Log

**Status:** COMPLETE
**Files moved:** 70/70 (SHA-256 verified)
**Import repoints:** 54 stale references updated across 34 files
**Stale refs remaining:** 0

### Import Repoint Summary (Phase 1)

| Old Module Path | New Module Path | Refs Updated |
|-----------------|-----------------|--------------|
| `incidents.L5_engines.lessons_engine` | `policies.L5_engines.lessons_engine` | 16 |
| `analytics.L6_drivers.alert_driver` | `general.L6_drivers.alert_driver` | 6 |
| `policies.L5_engines.contract_engine` | `general.L5_engines.contract_engine` | 6 |
| `incidents.L6_drivers.scoped_execution` | `controls.L6_drivers.scoped_execution` | 5 |
| `activity.L6_drivers.threshold_driver` | `controls.L6_drivers.threshold_driver` | 4 |
| `policies.L5_schemas.simulation` | `controls.L5_schemas.simulation` | 2 |
| `policies.L6_drivers.keys_driver` | `apis.L6_drivers.keys_driver` | 2 |
| `policies.L5_schemas.policy_limits` | `controls.L5_schemas.policy_limits` | 2 |
| `incidents.L5_engines.recovery_evaluation_engine` | `policies.L5_engines.recovery_evaluation_engine` | 1 |
| `integrations.L5_engines.cus_telemetry_service` | `activity.L5_engines.cus_telemetry_service` | 1 |
| + 9 more single-ref replacements | | 9 |

### Files Updated (34 total)

Highest-impact files: `policy_layer.py` (6), `recovery.py` (5), `alert_worker.py` (5), `lessons_engine.py` (3+1 comment), `policy.py` (2), `policy_limits_engine.py` (2), `keys_shim.py` (2)

## Remaining Work

- **0 PENDING moves** remaining
- **0 CONFLICT** entries remaining
- **M050 future fix:** `general/L6_drivers/alert_emitter.py` singleton pattern should be refactored to session-per-call factory per L6 driver contract
