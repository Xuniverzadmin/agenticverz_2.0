# AURORA_L2 Capability Registry - Incidents Pattern Detection
# Status: DECLARED (awaiting E2E validation per CAP-E2E-001)
# Reference: docs/architecture/incidents/INCIDENTS_DOMAIN_SQL.md#5-act-o4
#
capability_id: incidents.patterns
status: DECLARED
source_panels:
  - INC-EV-ACT-O4
domain: INCIDENTS
metadata:
  generated_by: manual
  generated_on: '2026-01-17'
  declared_by: claude-implementation
  declared_on: '2026-01-17'
  # observed_by: null  # Set by SDSR only
  # observed_on: null  # Set by SDSR only
assumption:
  endpoint: /api/v1/incidents/patterns
  method: GET
  source: INCIDENTS_DOMAIN_SQL
acceptance_criteria:
  - Returns detected incident patterns
  - Includes category_cluster patterns
  - Includes severity_spike patterns
  - Includes cascade_failure patterns
  - Response includes confidence scores
implementation:
  endpoint: /api/v1/incidents/patterns
  method: GET
  handler: app.api.incidents.detect_patterns
  service: app.services.incidents.IncidentPatternService
auth:
  roles: [admin, member]
  permissions: [incidents:read]
notes:
  - "L4 service: IncidentPatternService"
  - "Read-only analytics, no writes"
  - "Tenant-scoped via auth_context"
