{"openapi":"3.1.0","info":{"title":"NOVA Agent Manager","description":"AOS MVA - Agent Manager + Planner with async execution","version":"0.2.0"},"paths":{"/health":{"get":{"summary":"Health Check","description":"Health check with DB validation.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health/ready":{"get":{"tags":["health"],"summary":"Readiness Check","description":"Kubernetes readiness probe.\n\nChecks:\n- Database connectivity\n- Redis connectivity\n- Essential services","operationId":"readiness_check_health_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Readiness Check Health Ready Get"}}}}}}},"/health/determinism":{"get":{"tags":["health"],"summary":"Determinism Status","description":"Determinism status endpoint.\n\nShows:\n- Last replay hash\n- Replay count\n- Drift detection status\n\nUsed for operational monitoring and debugging.","operationId":"determinism_status_health_determinism_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Determinism Status Health Determinism Get"}}}}}}},"/health/adapters":{"get":{"tags":["health"],"summary":"Adapter Status","description":"LLM adapter availability status.\n\nShows registered adapters and their health.","operationId":"adapter_status_health_adapters_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Adapter Status Health Adapters Get"}}}}}}},"/health/skills":{"get":{"tags":["health"],"summary":"Skills Status","description":"Skill registry status.\n\nShows registered skills and their versions.","operationId":"skills_status_health_skills_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Skills Status Health Skills Get"}}}}}}},"/api/v1/policy/eval":{"post":{"tags":["policy"],"summary":"Evaluate Policy","description":"Sandbox evaluation of policy for a skill execution.\n\n**Tier: PREVENT ($199)** - Pre-execution policy evaluation. \"You stop the fire.\"","operationId":"evaluate_policy_api_v1_policy_eval_post","parameters":[{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PolicyEvalRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PolicyEvalResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy/requests":{"post":{"tags":["policy"],"summary":"Create Approval Request","description":"Create a new approval request (persisted to DB).","operationId":"create_approval_request_api_v1_policy_requests_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApprovalRequestCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApprovalRequestResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["policy"],"summary":"List Approval Requests","description":"List approval requests with optional filtering.","operationId":"list_approval_requests_api_v1_policy_requests_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/ApprovalStatus"},{"type":"null"}],"title":"Status"}},{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ApprovalStatusResponse"},"title":"Response List Approval Requests Api V1 Policy Requests Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy/requests/{request_id}":{"get":{"tags":["policy"],"summary":"Get Approval Request","description":"Get the current status of an approval request.","operationId":"get_approval_request_api_v1_policy_requests__request_id__get","parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"string","title":"Request Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApprovalStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy/requests/{request_id}/approve":{"post":{"tags":["policy"],"summary":"Approve Request","description":"Approve an approval request.","operationId":"approve_request_api_v1_policy_requests__request_id__approve_post","parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"string","title":"Request Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApprovalAction"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApprovalStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy/requests/{request_id}/reject":{"post":{"tags":["policy"],"summary":"Reject Request","description":"Reject an approval request.","operationId":"reject_request_api_v1_policy_requests__request_id__reject_post","parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"string","title":"Request Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApprovalAction"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApprovalStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/simulate":{"post":{"tags":["runtime"],"summary":"Simulate Plan","description":"Simulate a plan before execution.\n\n**Tier: PREVENT ($199)** - Pre-execution simulation is the core \"decision tier\"\nfeature that lets you stop problems before they happen.\n\nReturns cost estimates, latency estimates, risk assessment, and feasibility check.\nThis allows agents to evaluate plans before committing resources.\n\nExample:\n```json\n{\n  \"plan\": [\n    {\"skill\": \"http_call\", \"params\": {\"url\": \"https://api.example.com/data\"}},\n    {\"skill\": \"llm_invoke\", \"params\": {\"prompt\": \"Summarize this data\"}}\n  ],\n  \"budget_cents\": 100\n}\n```","operationId":"simulate_plan_api_v1_runtime_simulate_post","parameters":[{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__api__runtime__SimulateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/query":{"post":{"tags":["runtime"],"summary":"Query Runtime","description":"Query runtime state.\n\n**Tier: OBSERVE ($0)** - Basic observability for all tiers.\n\nSupported query types:\n- remaining_budget_cents: Current budget status\n- what_did_i_try_already: Previous execution attempts\n- allowed_skills: List of available skills\n- last_step_outcome: Most recent execution result\n- skills_available_for_goal: Skills matching a goal\n\nExample:\n```json\n{\n  \"query_type\": \"remaining_budget_cents\",\n  \"params\": {}\n}\n```","operationId":"query_runtime_api_v1_runtime_query_post","parameters":[{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/skills":{"get":{"tags":["runtime"],"summary":"List Available Skills","description":"List all available skills.\n\n**Tier: OBSERVE ($0)** - Basic capability discovery.\n\nReturns skill IDs and basic descriptors for each skill.","operationId":"list_available_skills_api_v1_runtime_skills_get","parameters":[{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/skills/{skill_id}":{"get":{"tags":["runtime"],"summary":"Describe Skill","description":"Get detailed descriptor for a skill.\n\n**Tier: OBSERVE ($0)** - Basic capability discovery.\n\nReturns full metadata including:\n- Input/output schemas\n- Cost model\n- Failure modes with recovery hints\n- Constraints\n- Composition hints (what skills often precede/follow)","operationId":"describe_skill_api_v1_runtime_skills__skill_id__get","parameters":[{"name":"skill_id","in":"path","required":true,"schema":{"type":"string","title":"Skill Id"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SkillDescriptorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/capabilities":{"get":{"tags":["runtime"],"summary":"Get Capabilities","description":"Get available capabilities for an agent/tenant.\n\n**Tier: OBSERVE ($0)** - Basic capability awareness.\n\nReturns:\n- Available skills with their current status\n- Budget information\n- Rate limit information\n- Permissions\n\nThis allows agents to know exactly what they can do before attempting.","operationId":"get_capabilities_api_v1_runtime_capabilities_get","parameters":[{"name":"agent_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Agent ID","title":"Agent Id"},"description":"Agent ID"},{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CapabilitiesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/resource-contract/{resource_id}":{"get":{"tags":["runtime"],"summary":"Get Resource Contract","description":"Get resource contract for a specific resource.\n\nReturns budget, rate limits, and concurrency constraints.","operationId":"get_resource_contract_api_v1_runtime_resource_contract__resource_id__get","parameters":[{"name":"resource_id","in":"path","required":true,"schema":{"type":"string","title":"Resource Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/replay/{run_id}":{"post":{"tags":["runtime"],"summary":"Replay Run","description":"Replay a stored plan and optionally verify determinism parity.\n\n**Tier: PREVENT ($199)** - Replay for evidence and compliance verification.\n**Authority: execute:replay** - RBAC v2 enforced.\n\nM6 Deliverable: Re-execute stored plans without re-planning.\n\nParity verification checks:\n- Same skill calls in same order\n- Same parameters to each skill\n- Same retry decisions\n- Same error classifications\n\nDoes NOT verify:\n- External API responses (vary between runs)\n- LLM output content (non-deterministic)\n- Timestamps (always different)\n- Execution duration (timing varies)\n\nArgs:\n    run_id: The original run ID to replay\n    request: Replay options\n\nReturns:\n    ReplayResponse with parity check result","operationId":"replay_run_api_v1_runtime_replay__run_id__post","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/app__api__runtime__ReplayRequest"}],"default":{"verify_parity":true,"dry_run":false,"timeout_seconds":300.0},"title":"Request"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReplayResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/traces":{"get":{"tags":["runtime"],"summary":"List Traces","description":"List stored traces for a tenant.\n\nM6 Deliverable: Access to execution traces for debugging and replay.\n\nArgs:\n    tenant_id: Filter by tenant (optional)\n    limit: Maximum traces to return\n    offset: Pagination offset\n\nReturns:\n    List of trace summaries","operationId":"list_traces_api_v1_runtime_traces_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Max traces to return","default":100,"title":"Limit"},"description":"Max traces to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Pagination offset","default":0,"title":"Offset"},"description":"Pagination offset"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/traces/{run_id}":{"get":{"tags":["runtime"],"summary":"Get Trace","description":"Get a specific trace by run ID.\n\nM6 Deliverable: Access to full execution trace for debugging.\n\nArgs:\n    run_id: The run ID to retrieve\n\nReturns:\n    Full trace record with all steps","operationId":"get_trace_api_v1_runtime_traces__run_id__get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/status_history":{"get":{"tags":["status_history"],"summary":"Query Status History","description":"Query status history with filters.\n\nSupports filtering by:\n- entity_type: run, agent, approval, workflow, costsim\n- entity_id: Specific entity ID\n- tenant_id: Tenant scope (required in production)\n- actor_type: system, user, agent, scheduler\n- new_status: Target status\n- start_time/end_time: Time range","operationId":"query_status_history_status_history_get","parameters":[{"name":"entity_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by entity type","title":"Entity Type"},"description":"Filter by entity type"},{"name":"entity_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by entity ID","title":"Entity Id"},"description":"Filter by entity ID"},{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"},{"name":"actor_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by actor type","title":"Actor Type"},"description":"Filter by actor type"},{"name":"new_status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by new status","title":"New Status"},"description":"Filter by new status"},{"name":"start_time","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter from this time","title":"Start Time"},"description":"Filter from this time"},{"name":"end_time","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter until this time","title":"End Time"},"description":"Filter until this time"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Max results","default":100,"title":"Limit"},"description":"Max results"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Offset for pagination","default":0,"title":"Offset"},"description":"Offset for pagination"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusHistoryListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/status_history/entity/{entity_type}/{entity_id}":{"get":{"tags":["status_history"],"summary":"Get Entity History","description":"Get complete status history for a specific entity.\n\nReturns all status transitions in chronological order.","operationId":"get_entity_history_status_history_entity__entity_type___entity_id__get","parameters":[{"name":"entity_type","in":"path","required":true,"schema":{"type":"string","title":"Entity Type"}},{"name":"entity_id","in":"path","required":true,"schema":{"type":"string","title":"Entity Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusHistoryListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/status_history/export":{"post":{"tags":["status_history"],"summary":"Create Export","description":"Create an export of status history records.\n\nReturns a signed URL for download that expires in 1 hour.\n\nSupported formats:\n- csv: Comma-separated values\n- jsonl: JSON Lines (one JSON object per line)","operationId":"create_export_status_history_export_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExportRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExportResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/status_history/download/{export_id}":{"get":{"tags":["status_history"],"summary":"Download Export","description":"Download an exported file using signed URL.\n\nThis endpoint verifies the signature and expiration before\nreturning the file contents.","operationId":"download_export_status_history_download__export_id__get","parameters":[{"name":"export_id","in":"path","required":true,"schema":{"type":"string","title":"Export Id"}},{"name":"format","in":"query","required":true,"schema":{"type":"string","description":"Export format","title":"Format"},"description":"Export format"},{"name":"expires","in":"query","required":true,"schema":{"type":"integer","description":"Expiration timestamp","title":"Expires"},"description":"Expiration timestamp"},{"name":"sig","in":"query","required":true,"schema":{"type":"string","description":"Signature","title":"Sig"},"description":"Signature"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/status_history/stats":{"get":{"tags":["status_history"],"summary":"Get Stats","description":"Get statistics about status history records.\n\nUseful for audit reporting and monitoring.","operationId":"get_stats_status_history_stats_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/costsim/v2/status":{"get":{"tags":["costsim"],"summary":"Get Sandbox Status","description":"Get current V2 sandbox status.\n\nReturns information about:\n- Whether sandbox is enabled (feature flag)\n- Whether circuit breaker is open (auto-disabled due to drift)\n- Current model version\n- Drift thresholds","operationId":"get_sandbox_status_costsim_v2_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SandboxStatusResponse"}}}}}}},"/costsim/v2/simulate":{"post":{"tags":["costsim"],"summary":"Simulate V2","description":"Run simulation through V2 sandbox.\n\nThis endpoint always runs V1 for production results.\nIf sandbox is enabled, also runs V2 in shadow mode\nand returns comparison metrics.\n\nThe V1 result is always the authoritative result.\nV2 is for validation only.\n\nM7 Enhancements:\n- Memory context injection for simulations\n- Post-execution memory updates via rules engine\n- Drift detection between baseline and memory-enabled runs","operationId":"simulate_v2_costsim_v2_simulate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__api__costsim__SimulateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SandboxSimulateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/costsim/v2/reset":{"post":{"tags":["costsim"],"summary":"Reset Circuit Breaker","description":"Reset the V2 circuit breaker.\n\nThis re-enables V2 sandbox after it was auto-disabled due to drift.\nShould only be called after investigating and fixing the drift cause.\n\nReturns success status and updated circuit breaker state.","operationId":"reset_circuit_breaker_costsim_v2_reset_post","parameters":[{"name":"reason","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Reason for reset","title":"Reason"},"description":"Reason for reset"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/costsim/v2/incidents":{"get":{"tags":["costsim"],"summary":"Get Incidents","description":"Get circuit breaker incidents.\n\nReturns recent incidents that caused circuit breaker trips.\nUseful for investigating drift causes.","operationId":"get_incidents_costsim_v2_incidents_get","parameters":[{"name":"include_resolved","in":"query","required":false,"schema":{"type":"boolean","description":"Include resolved incidents","default":false,"title":"Include Resolved"},"description":"Include resolved incidents"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Max incidents to return","default":10,"title":"Limit"},"description":"Max incidents to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/costsim/divergence":{"get":{"tags":["costsim"],"summary":"Get Divergence Report","description":"Get cost divergence report between V1 and V2.\n\nReturns metrics:\n- delta_p50: Median cost delta\n- delta_p90: 90th percentile cost delta\n- kl_divergence: KL divergence between distributions\n- outlier_count: Number of outlier samples\n- fail_ratio: Ratio of major drift samples\n- matching_rate: Ratio of matching samples","operationId":"get_divergence_report_costsim_divergence_get","parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Start of analysis period","title":"Start Date"},"description":"Start of analysis period"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"End of analysis period","title":"End Date"},"description":"End of analysis period"},{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"minimum":1,"description":"Days to analyze (if start_date not provided)","default":7,"title":"Days"},"description":"Days to analyze (if start_date not provided)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DivergenceReportResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/costsim/canary/run":{"post":{"tags":["costsim"],"summary":"Trigger Canary Run","description":"Trigger a canary run on-demand.\n\nThe canary run:\n1. Loads samples from recent provenance logs\n2. Runs both V1 and V2 on each sample\n3. Computes drift metrics\n4. Returns pass/fail verdict\n\nNote: Daily canary runs are automatic via systemd timer.\nThis endpoint is for manual testing.","operationId":"trigger_canary_run_costsim_canary_run_post","parameters":[{"name":"sample_count","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":10,"description":"Number of samples","default":100,"title":"Sample Count"},"description":"Number of samples"},{"name":"drift_threshold","in":"query","required":false,"schema":{"type":"number","maximum":1.0,"minimum":0.0,"description":"Drift threshold","default":0.2,"title":"Drift Threshold"},"description":"Drift threshold"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CanaryRunResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/costsim/canary/reports":{"get":{"tags":["costsim"],"summary":"Get Canary Reports","description":"Get recent canary run reports.\n\nReturns summaries of recent canary runs.\nFull artifacts are available at the artifact_paths.","operationId":"get_canary_reports_costsim_canary_reports_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Max reports to return","default":10,"title":"Limit"},"description":"Max reports to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/costsim/datasets":{"get":{"tags":["costsim"],"summary":"List Datasets","description":"List all available reference datasets.\n\nReference datasets are used to validate V2 accuracy:\n- low_variance: Simple, predictable plans\n- high_variance: Complex, variable plans\n- mixed_city: Real-world mixed workloads\n- noise_injected: Edge cases and invalid inputs\n- historical: Real production patterns","operationId":"list_datasets_costsim_datasets_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/DatasetInfo"},"type":"array","title":"Response List Datasets Costsim Datasets Get"}}}}}}},"/costsim/datasets/{dataset_id}":{"get":{"tags":["costsim"],"summary":"Get Dataset Info","description":"Get information about a specific dataset.","operationId":"get_dataset_info_costsim_datasets__dataset_id__get","parameters":[{"name":"dataset_id","in":"path","required":true,"schema":{"type":"string","title":"Dataset Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/costsim/datasets/{dataset_id}/validate":{"post":{"tags":["costsim"],"summary":"Validate Against Dataset","description":"Validate V2 against a specific reference dataset.\n\nRuns V2 on all samples in the dataset and compares\nagainst expected values. Returns metrics and verdict.\n\nVerdict is \"acceptable\" if all metrics are within thresholds.","operationId":"validate_against_dataset_costsim_datasets__dataset_id__validate_post","parameters":[{"name":"dataset_id","in":"path","required":true,"schema":{"type":"string","title":"Dataset Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationResultResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/costsim/datasets/validate-all":{"post":{"tags":["costsim"],"summary":"Validate All","description":"Validate V2 against ALL reference datasets.\n\nThis is a comprehensive validation that runs all 5 datasets.\nUse for pre-release validation or debugging.","operationId":"validate_all_costsim_datasets_validate_all_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/memory/pins":{"post":{"tags":["memory"],"summary":"Create Or Upsert Pin","description":"Create or upsert a memory pin.\n\nIf a pin with the same (tenant_id, key) exists, it will be updated.\nOtherwise, a new pin is created.\n\nRequires RBAC permission: memory_pin:write","operationId":"create_or_upsert_pin_api_v1_memory_pins_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemoryPinCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemoryPinResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["memory"],"summary":"List Pins","description":"List memory pins for a tenant.\n\nSupports filtering by key prefix and pagination.\n\nRequires RBAC permission: memory_pin:read","operationId":"list_pins_api_v1_memory_pins_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","description":"Tenant ID","default":"global","title":"Tenant Id"},"description":"Tenant ID"},{"name":"prefix","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Key prefix filter","title":"Prefix"},"description":"Key prefix filter"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Max results","default":100,"title":"Limit"},"description":"Max results"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Offset for pagination","default":0,"title":"Offset"},"description":"Offset for pagination"},{"name":"include_expired","in":"query","required":false,"schema":{"type":"boolean","description":"Include expired pins","default":false,"title":"Include Expired"},"description":"Include expired pins"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemoryPinListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/memory/pins/{key}":{"get":{"tags":["memory"],"summary":"Get Pin","description":"Get a memory pin by key.\n\nReturns 404 if not found or expired.\n\nRequires RBAC permission: memory_pin:read","operationId":"get_pin_api_v1_memory_pins__key__get","parameters":[{"name":"key","in":"path","required":true,"schema":{"type":"string","title":"Key"}},{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","description":"Tenant ID","default":"global","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemoryPinResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["memory"],"summary":"Delete Pin","description":"Delete a memory pin by key.\n\nReturns 404 if not found.\n\nRequires RBAC permission: memory_pin:delete","operationId":"delete_pin_api_v1_memory_pins__key__delete","parameters":[{"name":"key","in":"path","required":true,"schema":{"type":"string","title":"Key"}},{"name":"tenant_id","in":"query","required":false,"schema":{"type":"string","description":"Tenant ID","default":"global","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemoryPinDeleteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/memory/pins/cleanup":{"post":{"tags":["memory"],"summary":"Cleanup Expired Pins","description":"Clean up expired memory pins.\n\nTypically called by a cron job. Deletes all pins where expires_at < now().\n\nRequires RBAC permission: memory_pin:admin","operationId":"cleanup_expired_pins_api_v1_memory_pins_cleanup_post","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Limit to specific tenant","title":"Tenant Id"},"description":"Limit to specific tenant"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rbac/info":{"get":{"tags":["rbac"],"summary":"Get Policy Info","description":"Get current RBAC policy information.\n\nReturns version, hash, loaded timestamp, roles, and resources.\n\nRequires RBAC permission: rbac:read","operationId":"get_policy_info_api_v1_rbac_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PolicyInfoResponse"}}}}}}},"/api/v1/rbac/reload":{"post":{"tags":["rbac"],"summary":"Reload Policies","description":"Hot-reload RBAC policies from file.\n\nReloads the policy file and updates the in-memory policy matrix.\nReturns the previous and new policy hashes for verification.\n\nRequires RBAC permission: rbac:reload","operationId":"reload_policies_api_v1_rbac_reload_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReloadResponse"}}}}}}},"/api/v1/rbac/matrix":{"get":{"tags":["rbac"],"summary":"Get Permission Matrix","description":"Get current permission matrix.\n\nReturns the full role->resource->actions mapping.\n\nRequires RBAC permission: rbac:read","operationId":"get_permission_matrix_api_v1_rbac_matrix_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Permission Matrix Api V1 Rbac Matrix Get"}}}}}}},"/api/v1/rbac/audit":{"get":{"tags":["rbac"],"summary":"Query Audit Logs","description":"Query RBAC audit logs.\n\nSupports filtering by resource, action, decision, subject, tenant, and time.\n\nRequires RBAC permission: rbac:read","operationId":"query_audit_logs_api_v1_rbac_audit_get","parameters":[{"name":"resource","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by resource","title":"Resource"},"description":"Filter by resource"},{"name":"action","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by action","title":"Action"},"description":"Filter by action"},{"name":"allowed","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by decision","title":"Allowed"},"description":"Filter by decision"},{"name":"subject","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by subject","title":"Subject"},"description":"Filter by subject"},{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"},{"name":"since","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter since timestamp","title":"Since"},"description":"Filter since timestamp"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuditResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rbac/audit/cleanup":{"post":{"tags":["rbac"],"summary":"Cleanup Audit Logs","description":"Clean up old audit logs.\n\nDeletes audit entries older than retention_days.\n\nRequires RBAC permission: rbac:reload (admin action)","operationId":"cleanup_audit_logs_api_v1_rbac_audit_cleanup_post","parameters":[{"name":"retention_days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"default":90,"title":"Retention Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/traces":{"get":{"tags":["traces"],"summary":"List Traces","description":"List and search traces with optional filters.\n\nRBAC: Users can only see traces from their tenant unless admin.","operationId":"list_traces_api_v1_traces_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant ID","title":"Tenant Id"},"description":"Filter by tenant ID"},{"name":"agent_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by agent ID","title":"Agent Id"},"description":"Filter by agent ID"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"root_hash","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by root hash","title":"Root Hash"},"description":"Filter by root hash"},{"name":"plan_hash","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by plan hash","title":"Plan Hash"},"description":"Filter by plan hash"},{"name":"seed","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by random seed","title":"Seed"},"description":"Filter by random seed"},{"name":"from_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter from date (ISO8601)","title":"From Date"},"description":"Filter from date (ISO8601)"},{"name":"to_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter to date (ISO8601)","title":"To Date"},"description":"Filter to date (ISO8601)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum results","default":100,"title":"Limit"},"description":"Maximum results"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Pagination offset","default":0,"title":"Offset"},"description":"Pagination offset"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TraceListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["traces"],"summary":"Store Trace","description":"Store a client-provided trace.\n\nApplies PII redaction before storage.","operationId":"store_trace_api_v1_traces_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoreTraceRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/traces/mismatches":{"get":{"tags":["traces"],"summary":"List All Mismatches","description":"List all trace mismatches across the system.\n\nREAD-ONLY endpoint for observability. No side effects.\nReturns mismatches with summary counts.\n\nAuth: OBSERVER-safe (SDSR compatible)","operationId":"list_all_mismatches_api_v1_traces_mismatches_get","parameters":[{"name":"window","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Time window (e.g., 24h, 7d)","title":"Window"},"description":"Time window (e.g., 24h, 7d)"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(open|resolved)$"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"description":"Max results","default":100,"title":"Limit"},"description":"Max results"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/traces/{run_id}":{"get":{"tags":["traces"],"summary":"Get Trace","description":"Get a complete trace by run ID.\n\nRBAC: Users can only access their tenant's traces.","operationId":"get_trace_api_v1_traces__run_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TraceDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["traces"],"summary":"Delete Trace","description":"Delete a trace by run ID.\n\nRBAC: Requires admin or operator role.","operationId":"delete_trace_api_v1_traces__run_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/traces/by-hash/{root_hash}":{"get":{"tags":["traces"],"summary":"Get Trace By Hash","description":"Get a trace by its deterministic root hash.\n\nUseful for replay verification.","operationId":"get_trace_by_hash_api_v1_traces_by_hash__root_hash__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"root_hash","in":"path","required":true,"schema":{"type":"string","title":"Root Hash"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TraceDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/traces/compare/{run_id1}/{run_id2}":{"get":{"tags":["traces"],"summary":"Compare Traces","description":"Compare two traces for deterministic equality.\n\nCompares root_hash and step hashes to verify replay parity.","operationId":"compare_traces_api_v1_traces_compare__run_id1___run_id2__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"run_id1","in":"path","required":true,"schema":{"type":"string","title":"Run Id1"}},{"name":"run_id2","in":"path","required":true,"schema":{"type":"string","title":"Run Id2"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TraceCompareResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/traces/cleanup":{"post":{"tags":["traces"],"summary":"Cleanup Old Traces","description":"Delete traces older than specified number of days.\n\nRBAC: Requires admin role.","operationId":"cleanup_old_traces_api_v1_traces_cleanup_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Delete traces older than N days","default":30,"title":"Days"},"description":"Delete traces older than N days"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/traces/idempotency/{idempotency_key}":{"get":{"tags":["traces"],"summary":"Check Idempotency","description":"Check if an idempotency key has been executed.\n\nReturns execution status and output if found.","operationId":"check_idempotency_api_v1_traces_idempotency__idempotency_key__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"idempotency_key","in":"path","required":true,"schema":{"type":"string","title":"Idempotency Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/traces/mismatches/bulk-report":{"post":{"tags":["traces"],"summary":"Bulk Report Mismatches","description":"Create a single GitHub issue for multiple mismatches.\n\nUseful when a replay causes multiple step mismatches that should be tracked together.\n\nRBAC: Requires admin or operator role.","operationId":"bulk_report_mismatches_api_v1_traces_mismatches_bulk_report_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"mismatch_ids","in":"query","required":true,"schema":{"type":"array","items":{"type":"string"},"description":"List of mismatch IDs to link","title":"Mismatch Ids"},"description":"List of mismatch IDs to link"},{"name":"github_issue","in":"query","required":false,"schema":{"type":"boolean","description":"Create a GitHub issue for all","default":true,"title":"Github Issue"},"description":"Create a GitHub issue for all"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/traces/{trace_id}/mismatch":{"post":{"tags":["traces"],"summary":"Report Mismatch","description":"Report a replay mismatch for operator review.\n\nThis endpoint:\n1. Records the mismatch in the database\n2. Optionally creates a GitHub issue or sends a Slack notification\n3. Returns the mismatch ID for tracking\n\nRBAC: Requires authenticated user. Only allows reporting mismatches for user's tenant.","operationId":"report_mismatch_api_v1_traces__trace_id__mismatch_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"trace_id","in":"path","required":true,"schema":{"type":"string","title":"Trace Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MismatchReport"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MismatchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/traces/{trace_id}/mismatches":{"get":{"tags":["traces"],"summary":"List Trace Mismatches","description":"List all mismatches reported for a trace.","operationId":"list_trace_mismatches_api_v1_traces__trace_id__mismatches_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"trace_id","in":"path","required":true,"schema":{"type":"string","title":"Trace Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/traces/{trace_id}/mismatches/{mismatch_id}/resolve":{"post":{"tags":["traces"],"summary":"Resolve Mismatch","description":"Mark a mismatch as resolved.\n\nRBAC: Requires admin or operator role.","operationId":"resolve_mismatch_api_v1_traces__trace_id__mismatches__mismatch_id__resolve_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"trace_id","in":"path","required":true,"schema":{"type":"string","title":"Trace Id"}},{"name":"mismatch_id","in":"path","required":true,"schema":{"type":"string","title":"Mismatch Id"}},{"name":"resolution_note","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional note about the resolution","title":"Resolution Note"},"description":"Optional note about the resolution"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/replay/{incident_id}/slice":{"get":{"tags":["replay"],"summary":"Get Replay Slice","description":"Get time-windowed replay slice of an incident.\n\nReturns grouped, immutable data for replay visualization:\n- inputs: What the agent saw (requests, context)\n- decisions: Policy evaluations, guardrail checks\n- actions: Actual executions, API calls\n- side_effects: Cost tracking, notifications, logging\n\nThis endpoint is READ-ONLY and does not modify any data.\n\nRBAC: Requires read:replay permission\nTenant Isolation: Enforced","operationId":"get_replay_slice_api_v1_replay__incident_id__slice_get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}},{"name":"window","in":"query","required":false,"schema":{"type":"integer","maximum":300,"minimum":5,"description":"Time window in seconds (window from incident)","default":30,"title":"Window"},"description":"Time window in seconds (window from incident)"},{"name":"center_time","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Center time ISO8601 (default: incident start)","title":"Center Time"},"description":"Center time ISO8601 (default: incident start)"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":10,"description":"Items per page","default":50,"title":"Page Size"},"description":"Items per page"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReplaySliceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/replay/{incident_id}/summary":{"get":{"tags":["replay"],"summary":"Get Incident Summary","description":"Get incident summary for replay context.\n\nProvides high-level information about an incident before\ndiving into detailed replay visualization.\n\nThis endpoint is READ-ONLY.\n\nRBAC: Requires read:replay permission\nTenant Isolation: Enforced","operationId":"get_incident_summary_api_v1_replay__incident_id__summary_get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IncidentSummaryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/replay/{incident_id}/timeline":{"get":{"tags":["replay"],"summary":"Get Replay Timeline","description":"Get full timeline for an incident (unpaginated for scrubbing UI).\n\nReturns all replay items in chronological order for\ntimeline scrubbing and playback visualization.\n\nThis endpoint is READ-ONLY.\n\nRBAC: Requires read:replay permission\nTenant Isolation: Enforced","operationId":"get_replay_timeline_api_v1_replay__incident_id__timeline_get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":10,"description":"Maximum items to return","default":100,"title":"Limit"},"description":"Maximum items to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/replay/{incident_id}/explain/{item_id}":{"get":{"tags":["replay"],"summary":"Explain Replay Item","description":"Get detailed explanation for a single replay item.\n\nProvides expanded context for:\n- What the agent saw (inputs)\n- Why it decided (decision rationale)\n- What it executed (action details)\n\nThis endpoint is READ-ONLY.\n\nRBAC: Requires read:replay permission\nTenant Isolation: Enforced via incident","operationId":"explain_replay_item_api_v1_replay__incident_id__explain__item_id__get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}},{"name":"item_id","in":"path","required":true,"schema":{"type":"string","title":"Item Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scenarios":{"get":{"tags":["scenarios"],"summary":"List Scenarios","description":"List all available scenarios.\n\nReturns both user-created scenarios and template scenarios.\nTemplates are pre-defined common scenarios for quick testing.","operationId":"list_scenarios_api_v1_scenarios_get","parameters":[{"name":"include_templates","in":"query","required":false,"schema":{"type":"boolean","description":"Include template scenarios","default":true,"title":"Include Templates"},"description":"Include template scenarios"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ScenarioResponse"},"title":"Response List Scenarios Api V1 Scenarios Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["scenarios"],"summary":"Create Scenario","description":"Create a new scenario.\n\nScenarios are stored in-memory for v1 (session-ephemeral).\nThis ensures no persistent side-effects from scenario creation.","operationId":"create_scenario_api_v1_scenarios_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScenarioCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScenarioResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scenarios/{scenario_id}":{"get":{"tags":["scenarios"],"summary":"Get Scenario","description":"Get a specific scenario by ID.","operationId":"get_scenario_api_v1_scenarios__scenario_id__get","parameters":[{"name":"scenario_id","in":"path","required":true,"schema":{"type":"string","title":"Scenario Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScenarioResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["scenarios"],"summary":"Delete Scenario","description":"Delete a scenario.\n\nTemplate scenarios cannot be deleted.","operationId":"delete_scenario_api_v1_scenarios__scenario_id__delete","parameters":[{"name":"scenario_id","in":"path","required":true,"schema":{"type":"string","title":"Scenario Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scenarios/{scenario_id}/simulate":{"post":{"tags":["scenarios"],"summary":"Simulate Scenario","description":"Run simulation for a saved scenario.\n\nINVARIANT: Pure computation only.\n- No database writes\n- No budget mutations\n- No external side-effects\n- Results are advisory only","operationId":"simulate_scenario_api_v1_scenarios__scenario_id__simulate_post","parameters":[{"name":"scenario_id","in":"path","required":true,"schema":{"type":"string","title":"Scenario Id"}},{"name":"budget_override","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":1000000,"minimum":0},{"type":"null"}],"description":"Override budget","title":"Budget Override"},"description":"Override budget"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulationResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scenarios/simulate-adhoc":{"post":{"tags":["scenarios"],"summary":"Simulate Adhoc","description":"Run ad-hoc simulation without saving scenario.\n\nUse this for quick one-off simulations.\n\nINVARIANT: Pure computation only.\n- No database writes\n- No budget mutations\n- No external side-effects\n- Results are advisory only","operationId":"simulate_adhoc_api_v1_scenarios_simulate_adhoc_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdhocSimulationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulationResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scenarios/info/immutability":{"get":{"tags":["scenarios"],"summary":"Get Immutability Info","description":"Get information about the immutability guarantees.\n\nThis endpoint documents the READ-ONLY nature of scenario simulations.","operationId":"get_immutability_info_api_v1_scenarios_info_immutability_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/explorer/summary":{"get":{"tags":["explorer"],"summary":"Get System Summary","description":"Get cross-tenant system summary.\n\nFOUNDER ONLY - provides aggregate view across all tenants.\nREAD-ONLY - no mutations.\n\nReturns:\n- Total/active tenant counts\n- Aggregate call and incident metrics\n- Global cost metrics\n- System health indicators","operationId":"get_system_summary_api_v1_explorer_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemSummary"}}}}}}},"/api/v1/explorer/tenants":{"get":{"tags":["explorer"],"summary":"List Tenants","description":"List all tenants with summary metrics.\n\nFOUNDER ONLY - shows all tenants.\nREAD-ONLY - no mutations.","operationId":"list_tenants_api_v1_explorer_tenants_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Max tenants to return","default":50,"title":"Limit"},"description":"Max tenants to return"},{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","description":"Sort field","default":"calls_24h","title":"Sort By"},"description":"Sort field"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TenantSummary"},"title":"Response List Tenants Api V1 Explorer Tenants Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/explorer/tenant/{tenant_id}/diagnostics":{"get":{"tags":["explorer"],"summary":"Get Tenant Diagnostics","description":"Get deep diagnostics for a specific tenant.\n\nFOUNDER ONLY - detailed view for investigation.\nREAD-ONLY - no mutations.\n\nReturns:\n- Call distribution by hour and skill\n- Error breakdown and top errors\n- Latency analysis\n- Cost breakdown\n- Recent incidents","operationId":"get_tenant_diagnostics_api_v1_explorer_tenant__tenant_id__diagnostics_get","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}},{"name":"hours","in":"query","required":false,"schema":{"type":"integer","maximum":168,"minimum":1,"description":"Analysis window in hours","default":24,"title":"Hours"},"description":"Analysis window in hours"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantDiagnostics"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/explorer/system/health":{"get":{"tags":["explorer"],"summary":"Get System Health","description":"Get overall system health indicators.\n\nFOUNDER ONLY - infrastructure visibility.\nREAD-ONLY - no mutations.","operationId":"get_system_health_api_v1_explorer_system_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemHealthResponse"}}}}}}},"/api/v1/explorer/patterns":{"get":{"tags":["explorer"],"summary":"Get Usage Patterns","description":"Get usage pattern analysis.\n\nFOUNDER ONLY - business insights.\nREAD-ONLY - no mutations.\n\nAnalyzes tenant behavior patterns for business learning.","operationId":"get_usage_patterns_api_v1_explorer_patterns_get","parameters":[{"name":"hours","in":"query","required":false,"schema":{"type":"integer","maximum":168,"minimum":1,"description":"Analysis window in hours","default":24,"title":"Hours"},"description":"Analysis window in hours"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatternsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/explorer/info":{"get":{"tags":["explorer"],"summary":"Get Explorer Info","description":"Get information about the explorer endpoints.","operationId":"get_explorer_info_api_v1_explorer_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/recovery/suggest":{"post":{"tags":["recovery"],"summary":"Suggest Recovery","description":"Generate recovery suggestion for a failure.\n\nMatches the failure against historical patterns and catalog entries,\ncomputes confidence score using time-weighted algorithm, and stores\nthe suggestion as a candidate for human review.\n\nIdempotent: Re-submitting same failure_match_id updates occurrence\ncount instead of creating duplicates.\n\nReturns:\n    Suggestion with confidence score and candidate ID","operationId":"suggest_recovery_api_v1_recovery_suggest_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuggestRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuggestResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recovery/candidates":{"get":{"tags":["recovery"],"summary":"List Candidates","description":"List recovery candidates with optional status filter.\n\nUsed by CLI for human review workflow.\n\nReturns:\n    Paginated list of candidates","operationId":"list_candidates_api_v1_recovery_candidates_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"type":"string","description":"Filter by status: pending, approved, rejected, all","default":"pending","title":"Status"},"description":"Filter by status: pending, approved, rejected, all"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"description":"Max results","default":50,"title":"Limit"},"description":"Max results"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Pagination offset","default":0,"title":"Offset"},"description":"Pagination offset"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recovery/approve":{"post":{"tags":["recovery"],"summary":"Approve Candidate","description":"Approve or reject a recovery candidate.\n\nRecords the decision with audit trail for compliance.\nOnly users with recovery_reviewer role can approve.\n\nReturns:\n    Updated candidate with approval details","operationId":"approve_candidate_api_v1_recovery_approve_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApproveRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recovery/candidates/{candidate_id}":{"delete":{"tags":["recovery"],"summary":"Delete Candidate","description":"Delete/revoke a recovery candidate (admin only).\n\nSoft-deletes by setting decision to 'revoked'.\nAudit trail is preserved.","operationId":"delete_candidate_api_v1_recovery_candidates__candidate_id__delete","parameters":[{"name":"candidate_id","in":"path","required":true,"schema":{"type":"integer","title":"Candidate Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["recovery"],"summary":"Get Candidate Detail","description":"Get detailed information about a specific candidate.\n\nIncludes full provenance history, inputs, and selected action details.","operationId":"get_candidate_detail_api_v1_recovery_candidates__candidate_id__get","parameters":[{"name":"candidate_id","in":"path","required":true,"schema":{"type":"integer","description":"Candidate ID","title":"Candidate Id"},"description":"Candidate ID"},{"name":"include_provenance","in":"query","required":false,"schema":{"type":"boolean","description":"Include provenance history","default":true,"title":"Include Provenance"},"description":"Include provenance history"},{"name":"include_inputs","in":"query","required":false,"schema":{"type":"boolean","description":"Include input data","default":true,"title":"Include Inputs"},"description":"Include input data"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["recovery"],"summary":"Update Candidate","description":"Update a candidate's execution status or selected action.\n\nUsed when:\n- Selecting an action for execution\n- Recording execution results\n- Marking execution as started/completed/failed","operationId":"update_candidate_api_v1_recovery_candidates__candidate_id__patch","parameters":[{"name":"candidate_id","in":"path","required":true,"schema":{"type":"integer","title":"Candidate Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recovery/stats":{"get":{"tags":["recovery"],"summary":"Get Recovery Stats","description":"Get recovery suggestion statistics.\n\nReturns aggregate metrics for monitoring and dashboards.","operationId":"get_recovery_stats_api_v1_recovery_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/recovery/actions":{"get":{"tags":["recovery"],"summary":"List Actions","description":"List available recovery actions from the catalog.\n\nActions are templates for recovery strategies (retry, fallback, etc.)\nthat can be selected for candidates.","operationId":"list_actions_api_v1_recovery_actions_get","parameters":[{"name":"action_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by action type","title":"Action Type"},"description":"Filter by action type"},{"name":"active_only","in":"query","required":false,"schema":{"type":"boolean","description":"Only return active actions","default":true,"title":"Active Only"},"description":"Only return active actions"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActionListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recovery/evaluate":{"post":{"tags":["recovery"],"summary":"Evaluate Rules","description":"Evaluate rules against error context without persisting.\n\nUseful for:\n- Testing rule behavior\n- Previewing recommendations\n- Debugging rule matching\n\nDoes NOT create a candidate or modify any data.","operationId":"evaluate_rules_api_v1_recovery_evaluate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__api__recovery__EvaluateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EvaluateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recovery/candidates/{candidate_id}/scope-test":{"post":{"tags":["recovery"],"summary":"Test Recovery Scope","description":"M6: Test a recovery action in scoped execution before global rollout.\n\nThis endpoint:\n1. Validates the recovery action against risk policies\n2. Executes in a scoped context (subset of traffic/agents)\n3. Returns cost/failure/policy deltas for review\n\nRisk Gating:\n- LOW risk: No scoped execution required\n- MEDIUM risk: Scoped execution recommended\n- HIGH/CRITICAL risk: Scoped execution mandatory\n\nScope Types:\n- dry_run: Validate without execution (default)\n- agent_subset: Run on a subset of agents\n- request_sample: Run on a sample of requests\n- budget_fraction: Run within a budget fraction","operationId":"test_recovery_scope_api_v1_recovery_candidates__candidate_id__scope_test_post","parameters":[{"name":"candidate_id","in":"path","required":true,"schema":{"type":"integer","description":"Recovery candidate ID","title":"Candidate Id"},"description":"Recovery candidate ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScopeTestRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScopeTestResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recovery/scope":{"post":{"tags":["recovery"],"summary":"Create Scope","description":"P2FC-4: Create a bound execution scope for recovery action.\n\nThis is the GATE STEP. Before any recovery action can execute,\na scope must be created that binds:\n- Incident (scope is incident-specific)\n- Allowed actions (only listed actions can execute)\n- Cost ceiling (max spend before scope exhaustion)\n- Attempt limit (max execution attempts)\n- Expiry time (scope automatically expires)\n- Intent (why this action is allowed)\n\nINVARIANT: \"A recovery action without a valid execution scope is invalid by definition.\"","operationId":"create_scope_api_v1_recovery_scope_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateScopeRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateScopeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recovery/execute":{"post":{"tags":["recovery"],"summary":"Execute Recovery","description":"P2FC-4: Execute a recovery action (REQUIRES valid scope).\n\nThis endpoint enforces the M6 invariant:\n> \"No recovery action may execute without an explicit, bounded execution\n>  scope derived from incident context.\"\n\nIf scope_id is not provided  400 error (scoped execution required)\nIf scope is exhausted  400 error (scope exhausted)\nIf scope is expired  400 error (scope expired)\nIf action doesn't match scope  403 error (action outside scope)\n\nOnly with a valid, active scope can execution proceed.","operationId":"execute_recovery_api_v1_recovery_execute_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExecuteRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExecuteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recovery/scopes/{incident_id}":{"get":{"tags":["recovery"],"summary":"List Scopes","description":"List all execution scopes for an incident.\n\nShows scope status (active, exhausted, expired, revoked) for visibility.","operationId":"list_scopes_api_v1_recovery_scopes__incident_id__get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","description":"Incident ID","title":"Incident Id"},"description":"Incident ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScopeListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recovery/scopes/{scope_id}":{"delete":{"tags":["recovery"],"summary":"Revoke Scope","description":"Revoke an execution scope (admin action).\n\nRevoked scopes cannot be used for execution.","operationId":"revoke_scope_api_v1_recovery_scopes__scope_id__delete","parameters":[{"name":"scope_id","in":"path","required":true,"schema":{"type":"string","description":"Scope ID to revoke","title":"Scope Id"},"description":"Scope ID to revoke"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recovery/ingest":{"post":{"tags":["recovery-ingest"],"summary":"Ingest Failure","description":"Ingest a failure for recovery suggestion evaluation.\n\nThis endpoint is idempotent:\n- If idempotency_key is provided and matches an existing request, returns existing candidate\n- If failure_match_id already has a candidate, updates occurrence count and returns it\n- Otherwise, creates a new candidate and optionally enqueues for evaluation\n\nReturns 202 Accepted with candidate_id for new ingestions.\nReturns 200 OK with is_duplicate=True for duplicate requests.","operationId":"ingest_failure_api_v1_recovery_ingest_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestRequest"}}},"required":true},"responses":{"202":{"description":"Accepted for processing","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestResponse"}}}},"409":{"description":"Duplicate request (returns existing candidate)"},"400":{"description":"Invalid request"},"500":{"description":"Internal server error"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/jobs/simulate":{"post":{"tags":["agents"],"summary":"Simulate Job","description":"Simulate job execution before committing resources.\n\nMachine-native pre-execution simulation (PIN-005):\n- Estimates total credits required\n- Checks budget availability\n- Estimates execution duration\n- Identifies risks and warnings\n- Returns feasibility assessment\n\nDoes NOT create the job or reserve credits.","operationId":"simulate_job_api_v1_jobs_simulate_post","parameters":[{"name":"X-Tenant-ID","in":"header","required":false,"schema":{"type":"string","default":"default","title":"X-Tenant-Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulateJobRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulateJobResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/jobs":{"post":{"tags":["agents"],"summary":"Create Job","description":"Create a new parallel job.","operationId":"create_job_api_v1_jobs_post","parameters":[{"name":"X-Tenant-ID","in":"header","required":false,"schema":{"type":"string","default":"default","title":"X-Tenant-Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateJobRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/jobs/{job_id}":{"get":{"tags":["agents"],"summary":"Get Job","description":"Get job status by ID.","operationId":"get_job_api_v1_jobs__job_id__get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/jobs/{job_id}/cancel":{"post":{"tags":["agents"],"summary":"Cancel Job","description":"Cancel a running job.","operationId":"cancel_job_api_v1_jobs__job_id__cancel_post","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/jobs/{job_id}/claim":{"post":{"tags":["agents"],"summary":"Claim Item","description":"Worker claims next available item.","operationId":"claim_item_api_v1_jobs__job_id__claim_post","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}},{"name":"worker_instance_id","in":"query","required":true,"schema":{"type":"string","description":"Worker instance ID","title":"Worker Instance Id"},"description":"Worker instance ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClaimItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/jobs/{job_id}/items/{item_id}/complete":{"post":{"tags":["agents"],"summary":"Complete Item","description":"Mark item as completed with output.","operationId":"complete_item_api_v1_jobs__job_id__items__item_id__complete_post","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}},{"name":"item_id","in":"path","required":true,"schema":{"type":"string","title":"Item Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteItemRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/jobs/{job_id}/items/{item_id}/fail":{"post":{"tags":["agents"],"summary":"Fail Item","description":"Mark item as failed.","operationId":"fail_item_api_v1_jobs__job_id__items__item_id__fail_post","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}},{"name":"item_id","in":"path","required":true,"schema":{"type":"string","title":"Item Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FailItemRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/blackboard/{key}":{"get":{"tags":["agents"],"summary":"Get Blackboard","description":"Read value from blackboard.","operationId":"get_blackboard_api_v1_blackboard__key__get","parameters":[{"name":"key","in":"path","required":true,"schema":{"type":"string","title":"Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["agents"],"summary":"Put Blackboard","description":"Write value to blackboard.","operationId":"put_blackboard_api_v1_blackboard__key__put","parameters":[{"name":"key","in":"path","required":true,"schema":{"type":"string","title":"Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlackboardWriteRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/blackboard/{key}/increment":{"post":{"tags":["agents"],"summary":"Increment Blackboard","description":"Atomically increment a counter.","operationId":"increment_blackboard_api_v1_blackboard__key__increment_post","parameters":[{"name":"key","in":"path","required":true,"schema":{"type":"string","title":"Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlackboardIncrementRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/blackboard/{key}/lock":{"post":{"tags":["agents"],"summary":"Lock Blackboard","description":"Lock operation on blackboard.","operationId":"lock_blackboard_api_v1_blackboard__key__lock_post","parameters":[{"name":"key","in":"path","required":true,"schema":{"type":"string","title":"Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LockRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/register":{"post":{"tags":["agents"],"summary":"Register Agent","description":"Register an agent instance.","operationId":"register_agent_api_v1_agents_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterAgentRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{instance_id}/heartbeat":{"post":{"tags":["agents"],"summary":"Agent Heartbeat","description":"Update agent heartbeat.","operationId":"agent_heartbeat_api_v1_agents__instance_id__heartbeat_post","parameters":[{"name":"instance_id","in":"path","required":true,"schema":{"type":"string","title":"Instance Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{instance_id}":{"delete":{"tags":["agents"],"summary":"Deregister Agent","description":"Deregister an agent instance.","operationId":"deregister_agent_api_v1_agents__instance_id__delete","parameters":[{"name":"instance_id","in":"path","required":true,"schema":{"type":"string","title":"Instance Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["agents"],"summary":"Get Agent","description":"Get agent instance details.","operationId":"get_agent_api_v1_agents__instance_id__get","parameters":[{"name":"instance_id","in":"path","required":true,"schema":{"type":"string","title":"Instance Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents":{"get":{"tags":["agents"],"summary":"List Agents","description":"List agent instances.","operationId":"list_agents_api_v1_agents_get","parameters":[{"name":"agent_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"}},{"name":"job_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Job Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{instance_id}/messages":{"post":{"tags":["agents"],"summary":"Send Message","description":"Send a message to an agent.","operationId":"send_message_api_v1_agents__instance_id__messages_post","parameters":[{"name":"instance_id","in":"path","required":true,"schema":{"type":"string","title":"Instance Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendMessageRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["agents"],"summary":"Get Messages","description":"Get messages for an agent.","operationId":"get_messages_api_v1_agents__instance_id__messages_get","parameters":[{"name":"instance_id","in":"path","required":true,"schema":{"type":"string","title":"Instance Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"message_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message Type"}},{"name":"job_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Job Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{instance_id}/messages/{message_id}/read":{"post":{"tags":["agents"],"summary":"Mark Message Read","description":"Mark message as read.","operationId":"mark_message_read_api_v1_agents__instance_id__messages__message_id__read_post","parameters":[{"name":"instance_id","in":"path","required":true,"schema":{"type":"string","title":"Instance Id"}},{"name":"message_id","in":"path","required":true,"schema":{"type":"string","title":"Message Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/invocations/respond":{"post":{"tags":["agents"],"summary":"Respond To Invocation","description":"Respond to an agent invocation.","operationId":"respond_to_invocation_api_v1_invocations_respond_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvokeResponseRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sba/validate":{"post":{"tags":["agents"],"summary":"Validate Sba Endpoint","description":"Validate an SBA schema.\n\nM15.1 Strategy-Bound Agent validation endpoint.\nReturns validation result with any errors or warnings.","operationId":"validate_sba_endpoint_api_v1_sba_validate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SBAValidateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sba/register":{"post":{"tags":["agents"],"summary":"Register Agent With Sba","description":"Register an agent with its SBA schema.\n\nM15.1 Strategy-Bound Agent registration.\nValidates SBA and stores agent definition in registry.","operationId":"register_agent_with_sba_api_v1_sba_register_post","parameters":[{"name":"X-Tenant-ID","in":"header","required":false,"schema":{"type":"string","default":"default","title":"X-Tenant-Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SBARegisterRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sba/generate":{"post":{"tags":["agents"],"summary":"Generate Sba For Agent","description":"Auto-generate SBA for an agent.\n\nM15.1 SBA generation for retrofitting existing agents.","operationId":"generate_sba_for_agent_api_v1_sba_generate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SBAGenerateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sba/version":{"get":{"tags":["agents"],"summary":"Get Sba Version Info","description":"M15.1.1: Get SBA version negotiation info.\n\nReturns information about supported SBA versions for client negotiation.","operationId":"get_sba_version_info_api_v1_sba_version_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/sba/version/negotiate":{"post":{"tags":["agents"],"summary":"Negotiate Sba Version","description":"M15.1.1: Negotiate SBA version.\n\nClient submits requested version, server responds with best compatible version.","operationId":"negotiate_sba_version_api_v1_sba_version_negotiate_post","parameters":[{"name":"requested_version","in":"query","required":true,"schema":{"type":"string","description":"Requested SBA version","title":"Requested Version"},"description":"Requested SBA version"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sba/health":{"get":{"tags":["agents"],"summary":"Get Sba Health","description":"M16: Get aggregated strategy health for Guard Console.\n\nReturns simple signal-level health status for all agents.\nUsed by StrategyHealthWidget in Guard Console.","operationId":"get_sba_health_api_v1_sba_health_get","parameters":[{"name":"X-Tenant-ID","in":"header","required":false,"schema":{"type":"string","default":"default","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sba/{agent_id}":{"get":{"tags":["agents"],"summary":"Get Agent Sba","description":"Get SBA schema for an agent.\n\nM15.1 SBA retrieval endpoint.","operationId":"get_agent_sba_api_v1_sba__agent_id__get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sba":{"get":{"tags":["agents"],"summary":"List Agents Sba","description":"List agents with their SBA status.\n\nM15.1 SBA registry listing.","operationId":"list_agents_sba_api_v1_sba_get","parameters":[{"name":"agent_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Type"}},{"name":"sba_validated","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Sba Validated"}},{"name":"X-Tenant-ID","in":"header","required":false,"schema":{"type":"string","default":"default","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sba/check-spawn":{"post":{"tags":["agents"],"summary":"Check Spawn Allowed","description":"Check if agent is allowed to spawn.\n\nM15.1 spawn-time enforcement check.\nReturns whether the agent has a valid SBA and can be spawned.","operationId":"check_spawn_allowed_api_v1_sba_check_spawn_post","parameters":[{"name":"agent_id","in":"query","required":true,"schema":{"type":"string","description":"Agent ID to check","title":"Agent Id"},"description":"Agent ID to check"},{"name":"orchestrator","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Orchestrator"}},{"name":"auto_generate","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Auto Generate"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sba/fulfillment/aggregated":{"get":{"tags":["agents"],"summary":"Get Fulfillment Aggregated","description":"M15.1.1: Get aggregated fulfillment metrics for heatmap visualization.\n\nReturns fulfillment data for all agents with grouping and marketplace readiness.\nUsed by the SBA Inspector UI for the fulfillment heatmap feature.","operationId":"get_fulfillment_aggregated_api_v1_sba_fulfillment_aggregated_get","parameters":[{"name":"group_by","in":"query","required":false,"schema":{"type":"string","description":"Group by: domain, agent_type, orchestrator","default":"domain","title":"Group By"},"description":"Group by: domain, agent_type, orchestrator"},{"name":"threshold","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Filter by minimum fulfillment","title":"Threshold"},"description":"Filter by minimum fulfillment"},{"name":"X-Tenant-ID","in":"header","required":false,"schema":{"type":"string","default":"default","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/activity/costs":{"get":{"tags":["agents"],"summary":"Get Agent Activity Costs","description":"M16: Get worker cost and risk metrics for an agent.\n\nReturns per-worker cost levels, risk scores, and budget usage.","operationId":"get_agent_activity_costs_api_v1_agents__agent_id__activity_costs_get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"X-Tenant-ID","in":"header","required":false,"schema":{"type":"string","default":"default","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActivityCostsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/activity/spending":{"get":{"tags":["agents"],"summary":"Get Agent Activity Spending","description":"M16: Get spending data for budget burn chart.\n\nReturns actual vs projected spending over time with anomaly detection.","operationId":"get_agent_activity_spending_api_v1_agents__agent_id__activity_spending_get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"period","in":"query","required":false,"schema":{"type":"string","description":"Time period: 1h, 6h, 24h, 7d","default":"24h","title":"Period"},"description":"Time period: 1h, 6h, 24h, 7d"},{"name":"X-Tenant-ID","in":"header","required":false,"schema":{"type":"string","default":"default","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SpendingDataResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/activity/retries":{"get":{"tags":["agents"],"summary":"Get Agent Activity Retries","description":"M16: Get retry log for an agent.\n\nReturns recent retry attempts with outcomes and risk impact.","operationId":"get_agent_activity_retries_api_v1_agents__agent_id__activity_retries_get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"default":50,"title":"Limit"}},{"name":"X-Tenant-ID","in":"header","required":false,"schema":{"type":"string","default":"default","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActivityRetriesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/activity/blockers":{"get":{"tags":["agents"],"summary":"Get Agent Activity Blockers","description":"M16: Get current blockers for an agent.\n\nReturns issues preventing agent execution with suggested actions.","operationId":"get_agent_activity_blockers_api_v1_agents__agent_id__activity_blockers_get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"X-Tenant-ID","in":"header","required":false,"schema":{"type":"string","default":"default","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActivityBlockersResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/health/check":{"post":{"tags":["agents"],"summary":"Check Agent Health","description":"M16: Run comprehensive health check for an agent.\n\nValidates SBA configuration, checks for missing tools, unregistered\nconnections, workflow issues, and purpose conflicts.","operationId":"check_agent_health_api_v1_agents__agent_id__health_check_post","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"X-Tenant-ID","in":"header","required":false,"schema":{"type":"string","default":"default","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheckResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/routing/cascade-evaluate":{"post":{"tags":["agents"],"summary":"Cascade Evaluate","description":"M17: Evaluate agents through CARE pipeline without routing.\n\nReturns ranked list of agents with evaluation details for each stage.\nUse this to understand why agents are eligible or rejected.","operationId":"cascade_evaluate_api_v1_routing_cascade_evaluate_post","parameters":[{"name":"X-Tenant-ID","in":"header","required":false,"schema":{"type":"string","default":"default","title":"X-Tenant-Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CascadeEvaluateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/routing/dispatch":{"post":{"tags":["agents"],"summary":"Routing Dispatch","description":"M17: Execute full CARE routing pipeline and select best agent.\n\nThis is the main entry point for strategic routing.\nReturns the selected agent and routing decision details.","operationId":"routing_dispatch_api_v1_routing_dispatch_post","parameters":[{"name":"X-Tenant-ID","in":"header","required":false,"schema":{"type":"string","default":"default","title":"X-Tenant-Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoutingDispatchRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/strategy":{"get":{"tags":["agents"],"summary":"Get Agent Strategy","description":"M17: Get agent's Strategy Cascade.\n\nReturns the full SBA with routing configuration.","operationId":"get_agent_strategy_api_v1_agents__agent_id__strategy_get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/strategy/update":{"post":{"tags":["agents"],"summary":"Update Agent Strategy","description":"M17: Hot-swap agent's routing configuration.\n\nUpdates routing-specific settings without changing the full SBA.","operationId":"update_agent_strategy_api_v1_agents__agent_id__strategy_update_post","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoutingConfigUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/routing/stats":{"get":{"tags":["agents"],"summary":"Get Routing Stats","description":"M17: Get routing statistics.\n\nReturns aggregate stats on routing decisions.","operationId":"get_routing_stats_api_v1_routing_stats_get","parameters":[{"name":"X-Tenant-ID","in":"header","required":false,"schema":{"type":"string","default":"default","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/routing/explain/{request_id}":{"post":{"tags":["agents"],"summary":"Explain Routing Decision","description":"M18: Explain why a routing decision was made.\n\nReturns detailed explanation of all factors that influenced the decision,\nincluding reputation scores, SLA adjustments, hysteresis effects, and\ncapability matching.","operationId":"explain_routing_decision_api_v1_routing_explain__request_id__post","parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"string","title":"Request Id"}},{"name":"X-Tenant-ID","in":"header","required":false,"schema":{"type":"string","default":"default","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExplainRoutingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/evolution":{"get":{"tags":["agents"],"summary":"Get Agent Evolution","description":"M18: Get agent evolution history and current state.\n\nReturns drift signals, boundary violations, strategy adjustments,\nand recommendations for the agent.","operationId":"get_agent_evolution_api_v1_agents__agent_id__evolution_get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"include_acknowledged","in":"query","required":false,"schema":{"type":"boolean","description":"Include acknowledged drift signals","default":false,"title":"Include Acknowledged"},"description":"Include acknowledged drift signals"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"description":"Max items per category","default":20,"title":"Limit"},"description":"Max items per category"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EvolutionReportResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/routing/stability":{"get":{"tags":["agents"],"summary":"Get System Stability","description":"M18: Get system-wide stability metrics.\n\nReturns governor state, freeze status, adjustment counts,\nand oscillation detection results.","operationId":"get_system_stability_api_v1_routing_stability_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemStabilityResponse"}}}}}}},"/api/v1/routing/stability/freeze":{"post":{"tags":["agents"],"summary":"Freeze System","description":"M18: Manually freeze the learning system.\n\nUse this to prevent any parameter adjustments during investigation\nor maintenance.","operationId":"freeze_system_api_v1_routing_stability_freeze_post","parameters":[{"name":"duration_seconds","in":"query","required":false,"schema":{"type":"integer","maximum":3600,"minimum":60,"description":"Freeze duration","default":900,"title":"Duration Seconds"},"description":"Freeze duration"},{"name":"reason","in":"query","required":false,"schema":{"type":"string","description":"Reason for freeze","default":"Manual freeze","title":"Reason"},"description":"Reason for freeze"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/routing/stability/unfreeze":{"post":{"tags":["agents"],"summary":"Unfreeze System","description":"M18: Manually unfreeze the learning system.\n\nResumes normal operation after a manual freeze.","operationId":"unfreeze_system_api_v1_routing_stability_unfreeze_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/routing/batch-learning":{"post":{"tags":["agents"],"summary":"Trigger Batch Learning","description":"M18: Trigger batch learning process.\n\nRuns offline learning over the specified window and returns\nparameter adjustment recommendations.","operationId":"trigger_batch_learning_api_v1_routing_batch_learning_post","parameters":[{"name":"window_hours","in":"query","required":false,"schema":{"type":"integer","maximum":24,"minimum":1,"description":"Hours of data to process","default":1,"title":"Window Hours"},"description":"Hours of data to process"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/reputation":{"get":{"tags":["agents"],"summary":"Get Agent Reputation","description":"M18: Get agent reputation details.\n\nReturns full reputation breakdown including quarantine state.","operationId":"get_agent_reputation_api_v1_agents__agent_id__reputation_get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sla":{"get":{"tags":["agents"],"summary":"Get Agent Sla","description":"M18: Get agent SLA score details.\n\nReturns SLA compliance metrics and targets.","operationId":"get_agent_sla_api_v1_agents__agent_id__sla_get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/successors":{"get":{"tags":["agents"],"summary":"Get Agent Successors","description":"M18: Get successor mapping for agent failover.\n\nReturns mapping of capabilities to recommended successor agents.","operationId":"get_agent_successors_api_v1_agents__agent_id__successors_get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/evaluate":{"post":{"tags":["policy-layer"],"summary":"Evaluate Action","description":"Evaluate a proposed action against all applicable policies.\n\nThis is the primary endpoint that agents MUST call before:\n- Routing decisions (CARE)\n- Task/skill execution\n- Strategy adaptation (SBA)\n- Escalation to humans\n- Self-modification\n- Agent spawning/invocation\n- Data access\n- External API calls\n\nReturns ALLOW, BLOCK, or MODIFY with detailed reasoning.","operationId":"evaluate_action_api_v1_policy_layer_evaluate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__api__policy_layer__EvaluateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PolicyEvaluationResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/simulate":{"post":{"tags":["policy-layer"],"summary":"Simulate Evaluation","description":"Simulate policy evaluation without side effects.\n\nUseful for:\n- Testing policy configurations\n- Debugging why actions are blocked\n- Pre-flight checks before batch operations\n\nDoes NOT:\n- Record the evaluation\n- Update risk ceiling counters\n- Create violation records\n- Route to governor","operationId":"simulate_evaluation_api_v1_policy_layer_simulate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__api__policy_layer__SimulateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PolicyEvaluationResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/state":{"get":{"tags":["policy-layer"],"summary":"Get Policy State","description":"Get the current state of the policy layer.\n\nReturns summary of:\n- Active policies by category\n- Evaluation statistics\n- Violation counts\n- Risk ceiling status","operationId":"get_policy_state_api_v1_policy_layer_state_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PolicyState"}}}}}}},"/api/v1/policy-layer/reload":{"post":{"tags":["policy-layer"],"summary":"Reload Policies","description":"Hot-reload policies from database.\n\nUse this after updating policies to apply changes immediately\nwithout restarting the service.","operationId":"reload_policies_api_v1_policy_layer_reload_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Reload Policies Api V1 Policy Layer Reload Post"}}}}}}},"/api/v1/policy-layer/violations":{"get":{"tags":["policy-layer"],"summary":"List Violations","description":"List policy violations with filtering.\n\nDefault: violations from last 24 hours.","operationId":"list_violations_api_v1_policy_layer_violations_get","parameters":[{"name":"violation_type","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/ViolationType"},{"type":"null"}],"title":"Violation Type"}},{"name":"agent_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"}},{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"}},{"name":"severity_min","in":"query","required":false,"schema":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Severity Min"}},{"name":"hours","in":"query","required":false,"schema":{"type":"integer","maximum":720,"minimum":1,"default":24,"title":"Hours"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PolicyViolation"},"title":"Response List Violations Api V1 Policy Layer Violations Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/violations/{violation_id}":{"get":{"tags":["policy-layer"],"summary":"Get Violation","description":"Get a specific violation by ID.","operationId":"get_violation_api_v1_policy_layer_violations__violation_id__get","parameters":[{"name":"violation_id","in":"path","required":true,"schema":{"type":"string","title":"Violation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PolicyViolation"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/violations/{violation_id}/acknowledge":{"post":{"tags":["policy-layer"],"summary":"Acknowledge Violation","description":"Acknowledge a violation (mark as reviewed).\n\nThis does NOT dismiss the violation - it records that\na human has reviewed it.","operationId":"acknowledge_violation_api_v1_policy_layer_violations__violation_id__acknowledge_post","parameters":[{"name":"violation_id","in":"path","required":true,"schema":{"type":"string","title":"Violation Id"}},{"name":"notes","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Acknowledge Violation Api V1 Policy Layer Violations  Violation Id  Acknowledge Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/risk-ceilings":{"get":{"tags":["policy-layer"],"summary":"List Risk Ceilings","description":"List all risk ceilings with current values.","operationId":"list_risk_ceilings_api_v1_policy_layer_risk_ceilings_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"}},{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Inactive"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object"},"title":"Response List Risk Ceilings Api V1 Policy Layer Risk Ceilings Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/risk-ceilings/{ceiling_id}":{"get":{"tags":["policy-layer"],"summary":"Get Risk Ceiling","description":"Get a specific risk ceiling with current utilization.","operationId":"get_risk_ceiling_api_v1_policy_layer_risk_ceilings__ceiling_id__get","parameters":[{"name":"ceiling_id","in":"path","required":true,"schema":{"type":"string","title":"Ceiling Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Risk Ceiling Api V1 Policy Layer Risk Ceilings  Ceiling Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["policy-layer"],"summary":"Update Risk Ceiling","description":"Update a risk ceiling configuration.","operationId":"update_risk_ceiling_api_v1_policy_layer_risk_ceilings__ceiling_id__patch","parameters":[{"name":"ceiling_id","in":"path","required":true,"schema":{"type":"string","title":"Ceiling Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RiskCeilingUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Update Risk Ceiling Api V1 Policy Layer Risk Ceilings  Ceiling Id  Patch"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/risk-ceilings/{ceiling_id}/reset":{"post":{"tags":["policy-layer"],"summary":"Reset Risk Ceiling","description":"Reset a risk ceiling's current value to 0.","operationId":"reset_risk_ceiling_api_v1_policy_layer_risk_ceilings__ceiling_id__reset_post","parameters":[{"name":"ceiling_id","in":"path","required":true,"schema":{"type":"string","title":"Ceiling Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Reset Risk Ceiling Api V1 Policy Layer Risk Ceilings  Ceiling Id  Reset Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/safety-rules":{"get":{"tags":["policy-layer"],"summary":"List Safety Rules","description":"List all safety rules.","operationId":"list_safety_rules_api_v1_policy_layer_safety_rules_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"}},{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Inactive"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object"},"title":"Response List Safety Rules Api V1 Policy Layer Safety Rules Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/safety-rules/{rule_id}":{"patch":{"tags":["policy-layer"],"summary":"Update Safety Rule","description":"Update a safety rule configuration.","operationId":"update_safety_rule_api_v1_policy_layer_safety_rules__rule_id__patch","parameters":[{"name":"rule_id","in":"path","required":true,"schema":{"type":"string","title":"Rule Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SafetyRuleUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Update Safety Rule Api V1 Policy Layer Safety Rules  Rule Id  Patch"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/ethical-constraints":{"get":{"tags":["policy-layer"],"summary":"List Ethical Constraints","description":"List all ethical constraints.","operationId":"list_ethical_constraints_api_v1_policy_layer_ethical_constraints_get","parameters":[{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Inactive"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object"},"title":"Response List Ethical Constraints Api V1 Policy Layer Ethical Constraints Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/cooldowns":{"get":{"tags":["policy-layer"],"summary":"List Active Cooldowns","description":"List all active cooldowns.","operationId":"list_active_cooldowns_api_v1_policy_layer_cooldowns_get","parameters":[{"name":"agent_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CooldownInfo"},"title":"Response List Active Cooldowns Api V1 Policy Layer Cooldowns Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/cooldowns/{agent_id}":{"delete":{"tags":["policy-layer"],"summary":"Clear Cooldowns","description":"Clear cooldowns for an agent.\n\nUse with caution - bypasses safety cooldowns.","operationId":"clear_cooldowns_api_v1_policy_layer_cooldowns__agent_id__delete","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"rule_name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rule Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Clear Cooldowns Api V1 Policy Layer Cooldowns  Agent Id  Delete"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/metrics":{"get":{"tags":["policy-layer"],"summary":"Get Policy Metrics","description":"Get policy engine metrics for the specified time window.","operationId":"get_policy_metrics_api_v1_policy_layer_metrics_get","parameters":[{"name":"hours","in":"query","required":false,"schema":{"type":"integer","maximum":720,"minimum":1,"default":24,"title":"Hours"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PolicyMetrics"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/evaluate/batch":{"post":{"tags":["policy-layer"],"summary":"Evaluate Batch","description":"Evaluate multiple actions in a single call.\n\nUseful for pre-flight checks on batch operations.\nLimited to 50 requests per batch.","operationId":"evaluate_batch_api_v1_policy_layer_evaluate_batch_post","requestBody":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/app__api__policy_layer__EvaluateRequest"},"type":"array","title":"Requests"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/PolicyEvaluationResult"},"type":"array","title":"Response Evaluate Batch Api V1 Policy Layer Evaluate Batch Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/versions":{"get":{"tags":["policy-layer"],"summary":"List Policy Versions","description":"List all policy versions.\n\nReturns version history for audit and rollback purposes.","operationId":"list_policy_versions_api_v1_policy_layer_versions_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}},{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Inactive"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object"},"title":"Response List Policy Versions Api V1 Policy Layer Versions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["policy-layer"],"summary":"Create Policy Version","description":"Create a new policy version snapshot.\n\nThis captures the current state of all policies for audit\nand potential rollback.","operationId":"create_policy_version_api_v1_policy_layer_versions_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateVersionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Create Policy Version Api V1 Policy Layer Versions Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/versions/current":{"get":{"tags":["policy-layer"],"summary":"Get Current Version","description":"Get the currently active policy version.\n\nThis is the version being used for all evaluations.","operationId":"get_current_version_api_v1_policy_layer_versions_current_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Current Version Api V1 Policy Layer Versions Current Get"}}}}}}},"/api/v1/policy-layer/versions/rollback":{"post":{"tags":["policy-layer"],"summary":"Rollback To Version","description":"Rollback to a previous policy version.\n\nThis restores all policies to the state captured in\nthe specified version.","operationId":"rollback_to_version_api_v1_policy_layer_versions_rollback_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RollbackRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Rollback To Version Api V1 Policy Layer Versions Rollback Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/versions/{version_id}/provenance":{"get":{"tags":["policy-layer"],"summary":"Get Version Provenance","description":"Get the provenance (change history) for a policy version.\n\nShows what changes were made and by whom.","operationId":"get_version_provenance_api_v1_policy_layer_versions__version_id__provenance_get","parameters":[{"name":"version_id","in":"path","required":true,"schema":{"type":"string","title":"Version Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object"},"title":"Response Get Version Provenance Api V1 Policy Layer Versions  Version Id  Provenance Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/dependencies":{"get":{"tags":["policy-layer"],"summary":"Get Dependency Graph","description":"Get the policy dependency graph.\n\nShows relationships and potential conflicts between policies.","operationId":"get_dependency_graph_api_v1_policy_layer_dependencies_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Dependency Graph Api V1 Policy Layer Dependencies Get"}}}}}}},"/api/v1/policy-layer/conflicts":{"get":{"tags":["policy-layer"],"summary":"List Conflicts","description":"List policy conflicts.\n\nConflicts occur when policies have contradictory rules.","operationId":"list_conflicts_api_v1_policy_layer_conflicts_get","parameters":[{"name":"include_resolved","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Resolved"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object"},"title":"Response List Conflicts Api V1 Policy Layer Conflicts Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/conflicts/{conflict_id}/resolve":{"post":{"tags":["policy-layer"],"summary":"Resolve Conflict","description":"Resolve a policy conflict.\n\nDocuments how the conflict should be handled during evaluation.","operationId":"resolve_conflict_api_v1_policy_layer_conflicts__conflict_id__resolve_post","parameters":[{"name":"conflict_id","in":"path","required":true,"schema":{"type":"string","title":"Conflict Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResolveConflictRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Resolve Conflict Api V1 Policy Layer Conflicts  Conflict Id  Resolve Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/temporal-policies":{"get":{"tags":["policy-layer"],"summary":"List Temporal Policies","description":"List temporal (sliding window) policies.\n\nThese policies track cumulative metrics over time windows.","operationId":"list_temporal_policies_api_v1_policy_layer_temporal_policies_get","parameters":[{"name":"metric","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Metric"}},{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Inactive"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object"},"title":"Response List Temporal Policies Api V1 Policy Layer Temporal Policies Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["policy-layer"],"summary":"Create Temporal Policy","description":"Create a new temporal policy.\n\nTemporal policies track cumulative metrics over sliding windows.","operationId":"create_temporal_policy_api_v1_policy_layer_temporal_policies_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemporalPolicyCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Create Temporal Policy Api V1 Policy Layer Temporal Policies Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/temporal-policies/{policy_id}/utilization":{"get":{"tags":["policy-layer"],"summary":"Get Temporal Utilization","description":"Get current utilization for a temporal policy.\n\nShows how much of the limit has been consumed in the current window.","operationId":"get_temporal_utilization_api_v1_policy_layer_temporal_policies__policy_id__utilization_get","parameters":[{"name":"policy_id","in":"path","required":true,"schema":{"type":"string","title":"Policy Id"}},{"name":"agent_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Temporal Utilization Api V1 Policy Layer Temporal Policies  Policy Id  Utilization Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/evaluate/context-aware":{"post":{"tags":["policy-layer"],"summary":"Evaluate With Context","description":"Context-aware policy evaluation (GAP 4).\n\nEvaluates with full agent/tenant context, action chain tracking,\nand temporal policy awareness. Returns updated context for\nuse in subsequent evaluations.","operationId":"evaluate_with_context_api_v1_policy_layer_evaluate_context_aware_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContextAwareEvaluateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Evaluate With Context Api V1 Policy Layer Evaluate Context Aware Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/dependencies/dag/validate":{"get":{"tags":["policy-layer"],"summary":"Validate Dependency Dag","description":"Validate that policy dependencies form a valid DAG.\n\nChecks for cycles in the dependency graph. Cycles cause:\n- Infinite recursion in override resolution\n- Oscillation in dependency evaluation\n- Rule folding failures\n- MODIFY rule loops\n\nReturns:\n- is_dag: True if graph is acyclic\n- cycles: List of detected cycles (if any)\n- topological_order: Evaluation order (if DAG is valid)","operationId":"validate_dependency_dag_api_v1_policy_layer_dependencies_dag_validate_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Validate Dependency Dag Api V1 Policy Layer Dependencies Dag Validate Get"}}}}}}},"/api/v1/policy-layer/dependencies/add":{"post":{"tags":["policy-layer"],"summary":"Add Dependency With Dag Check","description":"Add a policy dependency with DAG validation.\n\nBlocks the addition if it would create a cycle in the\ndependency graph. This ensures the graph remains a\nvalid DAG (Directed Acyclic Graph).\n\nReturns:\n- success: True if added\n- error: Error message if blocked due to cycle\n- blocked: True if cycle detected\n- cycle_path: The path that would form a cycle","operationId":"add_dependency_with_dag_check_api_v1_policy_layer_dependencies_add_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddDependencyRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Add Dependency With Dag Check Api V1 Policy Layer Dependencies Add Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/dependencies/evaluation-order":{"get":{"tags":["policy-layer"],"summary":"Get Evaluation Order","description":"Get the topological evaluation order for policies.\n\nReturns the order in which policies should be evaluated\nbased on their dependencies. Policies that depend on\nothers are evaluated after their dependencies.","operationId":"get_evaluation_order_api_v1_policy_layer_dependencies_evaluation_order_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Evaluation Order Api V1 Policy Layer Dependencies Evaluation Order Get"}}}}}}},"/api/v1/policy-layer/temporal-metrics/prune":{"post":{"tags":["policy-layer"],"summary":"Prune Temporal Metrics","description":"Prune and compact temporal metric events.\n\nThis prevents storage explosion by:\n1. Deleting events older than retention period\n2. Downsampling older events to hourly aggregates\n3. Capping maximum events per policy\n\nShould be run periodically (e.g., via cron job).","operationId":"prune_temporal_metrics_api_v1_policy_layer_temporal_metrics_prune_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PruneTemporalMetricsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Prune Temporal Metrics Api V1 Policy Layer Temporal Metrics Prune Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/temporal-metrics/storage-stats":{"get":{"tags":["policy-layer"],"summary":"Get Temporal Storage Stats","description":"Get storage statistics for temporal metrics.\n\nUse this to monitor storage growth and determine\nwhen pruning is needed.","operationId":"get_temporal_storage_stats_api_v1_policy_layer_temporal_metrics_storage_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Temporal Storage Stats Api V1 Policy Layer Temporal Metrics Storage Stats Get"}}}}}}},"/api/v1/policy-layer/versions/activate":{"post":{"tags":["policy-layer"],"summary":"Activate Policy Version","description":"Activate a policy version with pre-activation integrity checks.\n\nPerforms comprehensive checks before activation:\n1. Dependency closure - all dependencies exist\n2. Conflict scan - no unresolved critical conflicts\n3. DAG validation - no cycles\n4. Temporal integrity - valid window configurations\n5. Severity compatibility - escalation paths exist\n6. Simulation - dry-run against test cases\n\nUse dry_run=True to test without activating.\n\nReturns:\n- success: True if activated (or would be, for dry_run)\n- all_checks_passed: True if all integrity checks pass\n- checks: Detailed results of each check\n- activated_version: The version that was activated","operationId":"activate_policy_version_api_v1_policy_layer_versions_activate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActivateVersionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Activate Policy Version Api V1 Policy Layer Versions Activate Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-layer/versions/{version_id}/check":{"post":{"tags":["policy-layer"],"summary":"Check Version Integrity","description":"Run integrity checks on a version without activating.\n\nShortcut for activate with dry_run=True.\nUseful for validating a version before scheduling activation.","operationId":"check_version_integrity_api_v1_policy_layer_versions__version_id__check_post","parameters":[{"name":"version_id","in":"path","required":true,"schema":{"type":"string","title":"Version Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Check Version Integrity Api V1 Policy Layer Versions  Version Id  Check Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/embedding/quota":{"get":{"tags":["embedding"],"summary":"Get Embedding Quota","description":"Get current embedding quota status.\n\nReturns:\n    - daily_quota: Maximum embeddings per day (0 = unlimited)\n    - current_count: Number of embeddings used today\n    - remaining: Embeddings remaining (-1 if unlimited)\n    - exceeded: Whether quota has been exceeded\n    - reset_at: When quota resets (midnight UTC)\n    - vector_search_enabled: Whether vector search is active\n    - fallback_enabled: Whether keyword fallback is enabled","operationId":"get_embedding_quota_api_v1_embedding_quota_get","parameters":[{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmbeddingQuotaResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/embedding/config":{"get":{"tags":["embedding"],"summary":"Get Embedding Config","description":"Get embedding configuration.\n\nReturns current embedding provider settings including backup provider.","operationId":"get_embedding_config_api_v1_embedding_config_get","parameters":[{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmbeddingConfigResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/embedding/health":{"get":{"tags":["embedding"],"summary":"Embedding Health","description":"Quick health check for embedding subsystem.\n\nNo authentication required - used for monitoring.","operationId":"embedding_health_api_v1_embedding_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Embedding Health Api V1 Embedding Health Get"}}}}}}},"/api/v1/embedding/cache/stats":{"get":{"tags":["embedding"],"summary":"Embedding Cache Stats","description":"Get embedding cache statistics.\n\nReturns cache configuration and entry count.","operationId":"embedding_cache_stats_api_v1_embedding_cache_stats_get","parameters":[{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Embedding Cache Stats Api V1 Embedding Cache Stats Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/embedding/cache":{"delete":{"tags":["embedding"],"summary":"Clear Embedding Cache","description":"Clear all embedding cache entries.\n\nReturns number of entries cleared.","operationId":"clear_embedding_cache_api_v1_embedding_cache_delete","parameters":[{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Clear Embedding Cache Api V1 Embedding Cache Delete"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/embedding/compose":{"post":{"tags":["embedding"],"summary":"Compose Embedding","description":"Compose an instruction-aware embedding using IAEC v3.0.\n\nIAEC creates structured composite embeddings with 4 slots:\n- Instruction: what kind of task (summarize, extract, analyze, etc.)\n- Query: what the user wants\n- Context: what the system knows\n- Temporal + Policy: version/governance metadata (v3.0)\n\nModes:\n- \"segmented\": Best for routing - splits vector into regions\n- \"weighted\": Best for search - uses learned weights per instruction\n- \"hybrid\": Returns weighted, stores segmented metadata\n\nv3.0 Features:\n- Reversible decomposition (weighted mode)\n- Temporal signature for drift control\n- Deep embedding-based mismatch detection\n- Policy slot encoding for governance\n- Slot integrity verification\n\nSupported instructions: summarize, extract, analyze, rewrite, qa,\ncompare, classify, generate, route, default","operationId":"compose_embedding_api_v1_embedding_compose_post","parameters":[{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IAECComposeRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IAECComposeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/embedding/decompose":{"post":{"tags":["embedding"],"summary":"Decompose Embedding","description":"Decompose an IAEC embedding back into its constituent slots (v3.0).\n\nFor segmented mode embeddings: Direct extraction from dimensional regions\nFor raw vectors: Assumes segmented layout\n\nNote: For full reversibility of weighted mode embeddings, the original\nCompositeEmbedding with slot_basis must be preserved.\n\nReturns all 5 slots:\n- instruction_slot: Task type encoding\n- query_slot: User intent encoding\n- context_slot: System context encoding\n- temporal_slot: Version/epoch signature (32 dims)\n- policy_slot: Governance encoding (32 dims)","operationId":"decompose_embedding_api_v1_embedding_decompose_post","parameters":[{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IAECDecomposeRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IAECDecomposeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/embedding/iaec/instructions":{"get":{"tags":["embedding"],"summary":"Get Iaec Instructions","description":"Get available IAEC instruction types and their weights.","operationId":"get_iaec_instructions_api_v1_embedding_iaec_instructions_get","parameters":[{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Iaec Instructions Api V1 Embedding Iaec Instructions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/embedding/iaec/segment-info":{"get":{"tags":["embedding"],"summary":"Get Iaec Segment Info","description":"Get IAEC v3.0 segmentation configuration.\n\nReturns slot layout, dimensions, and temporal signature info.","operationId":"get_iaec_segment_info_api_v1_embedding_iaec_segment_info_get","parameters":[{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Iaec Segment Info Api V1 Embedding Iaec Segment Info Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/embedding/iaec/check-mismatch":{"post":{"tags":["embedding"],"summary":"Check Mismatch","description":"Check instruction-query semantic compatibility (v3.1).\n\nUses both keyword-based and embedding-based detection.\n\nv3.1: Includes corrective_action with confidence for M18/M19 governance.\n\nReturns:\n- score: Keyword-based mismatch score (0-1)\n- deep_score: Embedding-based mismatch score (0-1)\n- suggested_instruction: Better instruction if mismatch detected\n- detection_method: \"keyword\", \"embedding\", or \"none\"\n- message: Human-readable guidance\n- corrective_action: Prescriptive action with confidence (v3.1)","operationId":"check_mismatch_api_v1_embedding_iaec_check_mismatch_post","parameters":[{"name":"instruction","in":"query","required":true,"schema":{"type":"string","title":"Instruction"}},{"name":"query","in":"query","required":true,"schema":{"type":"string","title":"Query"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Check Mismatch Api V1 Embedding Iaec Check Mismatch Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workers/business-builder/run":{"post":{"tags":["Workers"],"summary":"Run Worker","description":"Execute the Business Builder Worker.\n\nTakes a business idea and optionally brand constraints, produces a complete\nlaunch package including:\n- Market research\n- Brand strategy\n- Landing page copy\n- HTML/CSS assets\n- Replay token for deterministic reproduction\n\nIntegrates with:\n- M4: Golden replay (deterministic execution)\n- M9: Failure catalog (pattern detection)\n- M10: Recovery engine (auto-recovery)\n- M15: SBA (strategy-bound agents)\n- M17: CARE (complexity-aware routing)\n- M18: Drift detection\n- M19/M20: Policy governance","operationId":"run_worker_api_v1_workers_business_builder_run_post","parameters":[{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerRunRequest"}}}},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerRunResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workers/business-builder/replay":{"post":{"tags":["Workers"],"summary":"Replay Execution Endpoint","description":"Replay a previous execution using Golden Replay (M4).\n\nDeterministically reproduces the same outputs given the same replay token.\n\nPhase F-3: Uses L3 adapter instead of direct L5 worker import.\nF-W-RULE-4: L3 Adapter Is the Only Entry.","operationId":"replay_execution_endpoint_api_v1_workers_business_builder_replay_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__api__workers__ReplayRequest"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerRunResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workers/business-builder/runs/{run_id}":{"get":{"tags":["Workers"],"summary":"Get Run","description":"Get details of a worker run.\n\nUse this to poll for async run completion or inspect past runs.","operationId":"get_run_api_v1_workers_business_builder_runs__run_id__get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerRunResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Workers"],"summary":"Delete Run","description":"Delete a run from storage.\n\nNote: In production, this would require admin privileges.","operationId":"delete_run_api_v1_workers_business_builder_runs__run_id__delete","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workers/business-builder/runs":{"get":{"tags":["Workers"],"summary":"List Runs","description":"List recent worker runs.\n\nReturns summary information for recent executions.\nOptionally filter by tenant_id.","operationId":"list_runs_api_v1_workers_business_builder_runs_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}},{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__api__workers__RunListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workers/business-builder/runs/{run_id}/retry":{"post":{"tags":["Workers"],"summary":"Retry Run","description":"Retry a completed or failed run - Phase-2.5.\n\nCreates a new run linked to the original via parent_run_id.\nThis is a lifecycle event, not execution - the run is queued only.\n\nRules:\n- Original run must be COMPLETED or FAILED\n- No agent execution triggered\n- DB write only, deterministic","operationId":"retry_run_api_v1_workers_business_builder_runs__run_id__retry_post","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunRetryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workers/business-builder/validate-brand":{"post":{"tags":["Workers"],"summary":"Validate Brand","description":"Validate a brand schema without executing the worker.\n\nChecks:\n- Schema validity\n- Policy rules generation (M19)\n- Drift anchors extraction (M18)","operationId":"validate_brand_api_v1_workers_business_builder_validate_brand_post","parameters":[{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BrandRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BrandValidationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workers/business-builder/health":{"get":{"tags":["Workers"],"summary":"Worker Health","description":"Health check for Business Builder Worker.\n\nReturns status of all integrated moats.","operationId":"worker_health_api_v1_workers_business_builder_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/workers/business-builder/schema/brand":{"get":{"tags":["Workers"],"summary":"Get Brand Schema","description":"Get the JSON schema for BrandRequest.\n\nUseful for clients to understand the expected format.","operationId":"get_brand_schema_api_v1_workers_business_builder_schema_brand_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/workers/business-builder/schema/run":{"get":{"tags":["Workers"],"summary":"Get Run Schema","description":"Get the JSON schema for WorkerRunRequest.","operationId":"get_run_schema_api_v1_workers_business_builder_schema_run_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/workers/business-builder/stream/{run_id}":{"get":{"tags":["Workers"],"summary":"Stream Run Events","description":"Stream real-time events for a worker run via Server-Sent Events (SSE).\n\nEvents include:\n- run_started: Worker execution began\n- stage_started/completed/failed: Stage lifecycle\n- log: Agent output logs\n- routing_decision: CARE routing decisions\n- policy_check/violation: M19 policy events\n- drift_detected: M18 drift detection\n- failure_detected: M9 failure pattern match\n- recovery_started/completed: M10 recovery actions\n- artifact_created: New artifact generated\n- run_completed/failed: Terminal state\n\nUsage (JavaScript):\n```js\nconst sse = new EventSource('/api/v1/workers/business-builder/stream/{run_id}');\nsse.onmessage = (event) => console.log(JSON.parse(event.data));\nsse.addEventListener('stage_completed', (event) => { ... });\n```","operationId":"stream_run_events_api_v1_workers_business_builder_stream__run_id__get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workers/business-builder/events/{run_id}":{"get":{"tags":["Workers"],"summary":"Get Run Events","description":"Get all events for a run (non-streaming).\n\nUseful for replaying events or debugging.","operationId":"get_run_events_api_v1_workers_business_builder_events__run_id__get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workers/business-builder/run-streaming":{"post":{"tags":["Workers"],"summary":"Run Worker Streaming","description":"Execute the Business Builder Worker with real-time event streaming.\n\nReturns immediately with run_id. Connect to /stream/{run_id} for real-time events.\n\nThis is the preferred endpoint for UI-driven execution where you want to\nshow progress, routing decisions, and artifacts building in real-time.","operationId":"run_worker_streaming_api_v1_workers_business_builder_run_streaming_post","parameters":[{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerRunRequest"}}}},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerRunResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tenant":{"get":{"tags":["Tenants & API Keys"],"summary":"Get Current Tenant","description":"Get information about the current tenant (from API key).","operationId":"get_current_tenant_api_v1_tenant_get","parameters":[{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tenant/usage":{"get":{"tags":["Tenants & API Keys"],"summary":"Get Tenant Usage","description":"Get usage summary for the current tenant.\n\nReturns envelope with provenance for SDSR ANALYTICS domain compliance.","operationId":"get_tenant_usage_api_v1_tenant_usage_get","parameters":[{"name":"period","in":"query","required":false,"schema":{"type":"string","pattern":"^(24h|7d|30d)$","default":"24h","title":"Period"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsageSummaryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tenant/quota/runs":{"get":{"tags":["Tenants & API Keys"],"summary":"Check Run Quota","description":"Check if the tenant can create a new run.","operationId":"check_run_quota_api_v1_tenant_quota_runs_get","parameters":[{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuotaCheckResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tenant/quota/tokens":{"get":{"tags":["Tenants & API Keys"],"summary":"Check Token Quota","description":"Check if the tenant has token budget for an operation.","operationId":"check_token_quota_api_v1_tenant_quota_tokens_get","parameters":[{"name":"tokens_needed","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":10000,"title":"Tokens Needed"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuotaCheckResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api-keys":{"get":{"tags":["Tenants & API Keys"],"summary":"List Api Keys","description":"List all API keys for the current tenant.\n\nRequires admin permission.","operationId":"list_api_keys_api_v1_api_keys_get","parameters":[{"name":"include_revoked","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Revoked"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/APIKeyResponse"},"title":"Response List Api Keys Api V1 Api Keys Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Tenants & API Keys"],"summary":"Create Api Key","description":"Create a new API key for the current tenant.\n\n**Important:** The full API key is only shown once in this response.\nStore it securely!\n\nRequires admin permission.","operationId":"create_api_key_api_v1_api_keys_post","parameters":[{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIKeyCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIKeyCreatedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api-keys/{key_id}":{"delete":{"tags":["Tenants & API Keys"],"summary":"Revoke Api Key","description":"Revoke an API key.\n\nThe key cannot be un-revoked. Create a new key instead.\n\nRequires admin permission.","operationId":"revoke_api_key_api_v1_api_keys__key_id__delete","parameters":[{"name":"key_id","in":"path","required":true,"schema":{"type":"string","title":"Key Id"}},{"name":"reason","in":"query","required":false,"schema":{"type":"string","default":"Manual revocation","title":"Reason"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workers":{"get":{"tags":["Tenants & API Keys"],"summary":"List Workers","description":"List all available workers.","operationId":"list_workers_api_v1_workers_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/WorkerSummaryResponse"},"title":"Response List Workers Api V1 Workers Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workers/available":{"get":{"tags":["Tenants & API Keys"],"summary":"List Available Workers For Tenant","description":"List workers available to the current tenant with their configurations.","operationId":"list_available_workers_for_tenant_api_v1_workers_available_get","parameters":[{"name":"include_disabled","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Disabled"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object"},"title":"Response List Available Workers For Tenant Api V1 Workers Available Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workers/{worker_id}":{"get":{"tags":["Tenants & API Keys"],"summary":"Get Worker Details","description":"Get detailed information about a specific worker.","operationId":"get_worker_details_api_v1_workers__worker_id__get","parameters":[{"name":"worker_id","in":"path","required":true,"schema":{"type":"string","title":"Worker Id"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workers/{worker_id}/config":{"get":{"tags":["Tenants & API Keys"],"summary":"Get Worker Config","description":"Get the effective configuration for a worker (tenant overrides merged with defaults).","operationId":"get_worker_config_api_v1_workers__worker_id__config_get","parameters":[{"name":"worker_id","in":"path","required":true,"schema":{"type":"string","title":"Worker Id"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerConfigResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Tenants & API Keys"],"summary":"Set Worker Config","description":"Set tenant-specific configuration for a worker.\n\nRequires admin permission.","operationId":"set_worker_config_api_v1_workers__worker_id__config_put","parameters":[{"name":"worker_id","in":"path","required":true,"schema":{"type":"string","title":"Worker Id"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerConfigRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerConfigResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runs":{"get":{"tags":["Tenants & API Keys"],"summary":"List Runs","description":"List runs for the current tenant.","operationId":"list_runs_api_v1_runs_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"worker_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Worker Id"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RunHistoryItem"},"title":"Response List Runs Api V1 Runs Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tenant/health":{"get":{"tags":["Tenants & API Keys"],"summary":"Tenant Health","description":"Health check for tenant system.","operationId":"tenant_health_api_v1_tenant_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/sdk/handshake":{"post":{"tags":["SDK"],"summary":"Sdk Handshake","description":"SDK handshake endpoint.\n\nCalled by SDK clients on first connection to validate setup\nand trigger onboarding state transition.\n\nPIN-399: This endpoint triggers API_KEY_CREATED  SDK_CONNECTED transition.\n\nRequires: Valid API key authentication (X-AOS-Key header)","operationId":"sdk_handshake_sdk_handshake_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HandshakeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HandshakeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sdk/instructions":{"get":{"tags":["SDK"],"summary":"Get Sdk Instructions","description":"Get SDK setup instructions.\n\nReturns configuration and example code for SDK setup.\n\nRequires: Valid authentication (JWT or API key)","operationId":"get_sdk_instructions_sdk_instructions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstructionsResponse"}}}}}}},"/api/v1/session/context":{"get":{"tags":["Session"],"summary":"Get Session Context","description":"Get verified session context for the current authenticated user.\n\nThis endpoint returns authorization facts derived from the verified\nbackend context. The frontend should use these values instead of\nderiving them locally.\n\nReturns:\n    actor_type: \"customer\" | \"founder\" | \"machine\"\n    tenant_id: Tenant ID if applicable (null for founders)\n    capabilities: List of scopes for machine clients (empty for humans)\n    lifecycle_state: Current tenant lifecycle state (for tenant-scoped actors)\n    onboarding_state: Current onboarding state (for tenant-scoped actors)\n\nRaises:\n    401: Not authenticated","operationId":"get_session_context_api_v1_session_context_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Session Context Api V1 Session Context Get"}}}}}}},"/v1/chat/completions":{"post":{"tags":["OpenAI Proxy"],"summary":"Chat Completions","description":"OpenAI-compatible chat completions endpoint.\n\nStatus codes:\n- 200: Success\n- 400: Bad request or content blocked\n- 401: Unauthorized\n- 402: Budget exceeded\n- 423: Tenant/key frozen\n- 429: Rate limited\n- 503: Upstream error","operationId":"chat_completions_v1_chat_completions_post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}},{"name":"X-API-Key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatCompletionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatCompletionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/embeddings":{"post":{"tags":["OpenAI Proxy"],"summary":"Embeddings","description":"OpenAI-compatible embeddings endpoint.","operationId":"embeddings_v1_embeddings_post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}},{"name":"X-API-Key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmbeddingRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmbeddingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/status":{"get":{"tags":["OpenAI Proxy"],"summary":"Proxy Status","description":"Protection status endpoint - the pulse of your safety net.\n\nReturns:\n- System status and features\n- Enforcement latency (p95)\n- Last incident timestamp\n- Current freeze status\n- Incidents blocked count\n\nWhen authenticated, shows tenant-specific protection metrics.\nWhen unauthenticated, shows global system health.","operationId":"proxy_status_v1_status_get","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}},{"name":"X-API-Key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/killswitch/tenant":{"post":{"tags":["KillSwitch"],"summary":"Freeze Tenant","description":"Hard stop everything for a tenant.\n\n**Tier: REACT ($9)** - Emergency response capability. \"You see the fire.\"\n\nImmediate. No in-flight retries. Sticky until manually lifted.","operationId":"freeze_tenant_v1_killswitch_tenant_post","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID to freeze","title":"Tenant Id"},"description":"Tenant ID to freeze"},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/KillSwitchAction"}],"title":"Action"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KillSwitchStatus"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["KillSwitch"],"summary":"Unfreeze Tenant","description":"Unfreeze a tenant.\n\n**Tier: REACT ($9)** - Emergency response capability.","operationId":"unfreeze_tenant_v1_killswitch_tenant_delete","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID to unfreeze","title":"Tenant Id"},"description":"Tenant ID to unfreeze"},{"name":"actor","in":"query","required":false,"schema":{"type":"string","description":"Who is unfreezing","default":"system","title":"Actor"},"description":"Who is unfreezing"},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KillSwitchStatus"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/killswitch/key":{"post":{"tags":["KillSwitch"],"summary":"Freeze Key","description":"Kill a single API key.\n\n**Tier: REACT ($9)** - Emergency response capability. \"You see the fire.\"\n\nUse cases: Compromised key, rogue experiment, limit damage.","operationId":"freeze_key_v1_killswitch_key_post","parameters":[{"name":"key_id","in":"query","required":true,"schema":{"type":"string","description":"API key ID to freeze","title":"Key Id"},"description":"API key ID to freeze"},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/KillSwitchAction"}],"title":"Action"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KillSwitchStatus"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["KillSwitch"],"summary":"Unfreeze Key","description":"Unfreeze an API key.\n\n**Tier: REACT ($9)** - Emergency response capability.","operationId":"unfreeze_key_v1_killswitch_key_delete","parameters":[{"name":"key_id","in":"query","required":true,"schema":{"type":"string","description":"API key ID to unfreeze","title":"Key Id"},"description":"API key ID to unfreeze"},{"name":"actor","in":"query","required":false,"schema":{"type":"string","description":"Who is unfreezing","default":"system","title":"Actor"},"description":"Who is unfreezing"},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KillSwitchStatus"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/killswitch/status":{"get":{"tags":["KillSwitch"],"summary":"Get Killswitch Status","description":"Get complete kill switch status for a tenant.\n\n**Tier: REACT ($9)** - KillSwitch visibility.\n\nShows tenant state plus all key overrides.","operationId":"get_killswitch_status_v1_killswitch_status_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Killswitch Status V1 Killswitch Status Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/policies/active":{"get":{"tags":["KillSwitch"],"summary":"Get Active Policies","description":"Get active guardrails - \"What's protecting me right now?\"\n\n**Tier: OBSERVE ($0)** - Basic visibility into protection.\n\nReturns the Default Guardrail Pack v1 (read-only).\nNo editing in MVP - this is intentional for trust.","operationId":"get_active_policies_v1_policies_active_get","parameters":[{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GuardrailSummary"},"title":"Response Get Active Policies V1 Policies Active Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/incidents":{"get":{"tags":["KillSwitch"],"summary":"List Incidents","description":"List incidents (auto-grouped failures).\n\n**Tier: REACT ($9)** - Incident visibility. \"You see the fire.\"\n\nAn incident = correlated failures + retries + cost spike within time window.","operationId":"list_incidents_v1_incidents_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/app__models__killswitch__IncidentSummary"},"title":"Response List Incidents V1 Incidents Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/incidents/{incident_id}":{"get":{"tags":["KillSwitch"],"summary":"Get Incident","description":"Get incident detail with timeline.\n\n**Tier: REACT ($9)** - Incident visibility. \"You see the fire.\"\n\nOne-screen explanation readable by a founder at 2am.","operationId":"get_incident_v1_incidents__incident_id__get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IncidentDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/replay/{call_id}":{"post":{"tags":["KillSwitch"],"summary":"Replay Call","description":"REPLAY PROVES ENFORCEMENT\n\n**Tier: PREVENT ($199)** - Evidence and compliance verification. \"You stop the fire.\"\n\nLanguage layer: This is NOT \"re-execution\" - it's PROOF.\nReplay demonstrates that your guardrails are working correctly.\n\nGuarantees:\n- Same input\n- Same policy evaluation\n- Same routing decision\n- Deterministic outcome\n\nReturns comparison showing enforcement consistency.","operationId":"replay_call_v1_replay__call_id__post","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"string","title":"Call Id"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/app__models__killswitch__ReplayRequest"}],"title":"Request"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__models__killswitch__ReplayResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/calls/{call_id}":{"get":{"tags":["KillSwitch"],"summary":"Get Call","description":"Get single call truth.\n\n**Tier: REACT ($9)** - Decision timeline visibility.\n\nIncludes input hash, policy decisions, cost, outcome, replay eligibility.","operationId":"get_call_v1_calls__call_id__get","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"string","title":"Call Id"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProxyCallDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/status":{"get":{"tags":["Guard Console"],"summary":"Get Guard Status","description":"Get protection status - \"Am I safe right now?\"\n\nReturns:\n- Freeze state\n- Active guardrails\n- 24h incident count\n- Last incident time\n\nCached for 5 seconds to reduce cross-region DB latency.","operationId":"get_guard_status_guard_status_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GuardStatus"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/snapshot/today":{"get":{"tags":["Guard Console"],"summary":"Get Today Snapshot","description":"Get today's metrics - \"What did it cost/save me?\"\n\nCached for 10 seconds to reduce cross-region DB latency.","operationId":"get_today_snapshot_guard_snapshot_today_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TodaySnapshot"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/killswitch/activate":{"post":{"tags":["Guard Console"],"summary":"Activate Killswitch","description":"Stop all traffic - Emergency kill switch.\n\nImmediate. All requests blocked until manually resumed.\n\nPIN-281: Uses L3 CustomerKillswitchAdapter for tenant-scoped operations.","operationId":"activate_killswitch_guard_killswitch_activate_post","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/killswitch/deactivate":{"post":{"tags":["Guard Console"],"summary":"Deactivate Killswitch","description":"Resume traffic - Deactivate kill switch.\n\nGuardrails will continue protecting.\n\nPIN-281: Uses L3 CustomerKillswitchAdapter for tenant-scoped operations.","operationId":"deactivate_killswitch_guard_killswitch_deactivate_post","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/incidents":{"get":{"tags":["Guard Console"],"summary":"List Incidents","description":"List incidents - \"What did you stop for me?\"\n\nHuman narrative, not logs.\n\nPIN-281: Uses L3 CustomerIncidentsAdapter for tenant-scoped operations.","operationId":"list_incidents_guard_incidents_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/incidents/{incident_id}":{"get":{"tags":["Guard Console"],"summary":"Get Incident Detail","description":"Get incident detail with timeline.\n\nOne-screen explanation readable at 2am.\n\nPIN-281: Uses L3 CustomerIncidentsAdapter with tenant isolation.","operationId":"get_incident_detail_guard_incidents__incident_id__get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IncidentDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/incidents/{incident_id}/acknowledge":{"post":{"tags":["Guard Console"],"summary":"Acknowledge Incident","description":"Acknowledge an incident.\n\nPIN-281: Uses L3 CustomerIncidentsAdapter with tenant isolation.","operationId":"acknowledge_incident_guard_incidents__incident_id__acknowledge_post","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/incidents/{incident_id}/resolve":{"post":{"tags":["Guard Console"],"summary":"Resolve Incident","description":"Resolve an incident.\n\nPIN-281: Uses L3 CustomerIncidentsAdapter with tenant isolation.","operationId":"resolve_incident_guard_incidents__incident_id__resolve_post","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/incidents/{incident_id}/narrative":{"get":{"tags":["Guard Console"],"summary":"Get Customer Incident Narrative","description":"GET /guard/incidents/{id}/narrative\n\nCustomer Incident Narrative - Calm, reassuring summary.\n\nM29 Category 5: Incident Console Contrast\n\nAnswers:\n- What happened? (plain language)\n- Did it affect me? (yes/no/some)\n- Is it fixed? (status + message)\n- Do I need to act? (only if necessary)\n\nIMPORTANT: Uses CALM vocabulary only.\n- No internal terminology (policy names, thresholds)\n- No cross-tenant data\n- No raw metrics that could cause panic","operationId":"get_customer_incident_narrative_guard_incidents__incident_id__narrative_get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerIncidentNarrativeDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/replay/{call_id}":{"post":{"tags":["Guard Console"],"summary":"Replay Call","description":"Replay a call - Trust builder.\n\nM23: Uses real ReplayValidator from replay_determinism.py\n\nDeterminism Levels:\n- strict: Byte-for-byte exact match (only works for cached/local)\n- logical: Policy decision equivalence (default - proves guardrails work)\n- semantic: Meaning-equivalent match (for content validation)\n\nShows:\n- Original outcome\n- Replay outcome\n- Policy decisions (same/different)\n- Model drift detection","operationId":"replay_call_guard_replay__call_id__post","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"string","title":"Call Id"}},{"name":"level","in":"query","required":false,"schema":{"type":"string","description":"Determinism level: strict, logical, or semantic","default":"logical","title":"Level"},"description":"Determinism level: strict, logical, or semantic"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__api__guard__ReplayResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/keys":{"get":{"tags":["Guard Console"],"summary":"List Api Keys","description":"List API keys with status.\n\nCustomer can freeze/unfreeze individual keys.\n\nPIN-281: Uses L3 CustomerKeysAdapter for tenant-scoped operations.","operationId":"list_api_keys_guard_keys_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/keys/{key_id}/freeze":{"post":{"tags":["Guard Console"],"summary":"Freeze Api Key","description":"Freeze an API key.\n\nPIN-281: Uses L3 CustomerKeysAdapter with tenant isolation.","operationId":"freeze_api_key_guard_keys__key_id__freeze_post","parameters":[{"name":"key_id","in":"path","required":true,"schema":{"type":"string","title":"Key Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/keys/{key_id}/unfreeze":{"post":{"tags":["Guard Console"],"summary":"Unfreeze Api Key","description":"Unfreeze an API key.\n\nPIN-281: Uses L3 CustomerKeysAdapter with tenant isolation.","operationId":"unfreeze_api_key_guard_keys__key_id__unfreeze_post","parameters":[{"name":"key_id","in":"path","required":true,"schema":{"type":"string","title":"Key Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/settings":{"get":{"tags":["Guard Console"],"summary":"Get Settings","description":"Get read-only settings.\n\nCustomers can see what's configured but can't change it.\nContact support to modify.\n\nIn demo mode (tenant_demo or non-existent tenant), returns demo defaults.","operationId":"get_settings_guard_settings_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantSettings"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/incidents/search":{"post":{"tags":["Guard Console"],"summary":"Search Incidents","description":"Search incidents with filters - M23 component map spec.\n\nSupports:\n- Free text search in title/description\n- Filter by user_id (from related calls)\n- Filter by policy status (passed/failed)\n- Filter by severity\n- Filter by time range\n- Filter by model","operationId":"search_incidents_guard_incidents_search_post","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IncidentSearchRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IncidentSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/incidents/{incident_id}/timeline":{"get":{"tags":["Guard Console"],"summary":"Get Decision Timeline","description":"Get decision timeline - M23 component map spec.\n\nReturns step-by-step trace:\n1. INPUT_RECEIVED - What the user asked\n2. CONTEXT_RETRIEVED - What data was fetched\n3. POLICY_EVALUATED - Each policy check (PASS/FAIL/WARN)\n4. MODEL_CALLED - LLM invocation\n5. OUTPUT_GENERATED - Final response\n6. LOGGED - Audit trail\n\nPlus root cause identification if policy failed.","operationId":"get_decision_timeline_guard_incidents__incident_id__timeline_get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DecisionTimelineResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/incidents/{incident_id}/export":{"post":{"tags":["Guard Console"],"summary":"Export Incident Evidence","description":"Export incident as a legal-grade PDF evidence report.\n\nThis document is designed to survive:\n- Legal review\n- Audit compliance\n- Executive briefing\n- Hostile questioning\n\nSections included:\n1. Executive Summary (for lawyers/leadership)\n2. Factual Reconstruction (pure evidence)\n3. Policy Evaluation Record\n4. Decision Timeline (deterministic trace)\n5. Replay Verification (cryptographic proof)\n6. Prevention Proof (counterfactual)\n7. Remediation & Controls\n8. Legal Attestation\n\nReturns: PDF file with Content-Disposition header","operationId":"export_incident_evidence_guard_incidents__incident_id__export_post","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"},{"name":"include_replay","in":"query","required":false,"schema":{"type":"boolean","description":"Include replay verification","default":true,"title":"Include Replay"},"description":"Include replay verification"},{"name":"include_prevention","in":"query","required":false,"schema":{"type":"boolean","description":"Include prevention proof","default":true,"title":"Include Prevention"},"description":"Include prevention proof"},{"name":"is_demo","in":"query","required":false,"schema":{"type":"boolean","description":"Add demo watermark","default":true,"title":"Is Demo"},"description":"Add demo watermark"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/onboarding/verify":{"post":{"tags":["Guard Console"],"summary":"Onboarding Verify","description":"REAL safety verification for onboarding.\n\nThis endpoint:\n1. Fires a REAL request through the proxy (not simulated)\n2. Uses a prompt designed to trigger a guardrail\n3. Creates a REAL incident if blocked\n4. Sends a REAL alert if configured\n\nThe user will see:\n- A real API call being made\n- Real tokens being consumed (minimal)\n- A real incident in their console\n- A real alert (if Slack/email configured)\n\nTest types:\n- guardrail_block: Triggers prompt injection guardrail (blocked, no cost)\n- killswitch_demo: Shows what happens when kill switch fires","operationId":"onboarding_verify_guard_onboarding_verify_post","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OnboardingVerifyRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__api__guard__OnboardingVerifyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/logs":{"get":{"tags":["Guard Console - Logs"],"summary":"List Logs","description":"List execution logs for customer.\n\nReturns paginated list of customer logs (execution audit trail).\nCustomer can only see their own tenant's logs (enforced by adapter).\n\nThis endpoint:\n- Shows what ran / is running\n- Provides step counts and status\n- Enables filtering by agent, status, date range\n- Supports pagination\n\nNo internal fields exposed (cost_cents, hashes, replay data).\n\nReference: PIN-281 Phase 5 (L3L2 promotion)","operationId":"list_logs_guard_logs_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID (required)","title":"Tenant Id"},"description":"Tenant ID (required)"},{"name":"agent_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by agent ID","title":"Agent Id"},"description":"Filter by agent ID"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status (running, completed, failed)","title":"Status"},"description":"Filter by status (running, completed, failed)"},{"name":"from_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter from date (ISO format)","title":"From Date"},"description":"Filter from date (ISO format)"},{"name":"to_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter to date (ISO format)","title":"To Date"},"description":"Filter to date (ISO format)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"description":"Page size (max 100)","default":50,"title":"Limit"},"description":"Page size (max 100)"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Pagination offset","default":0,"title":"Offset"},"description":"Pagination offset"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerLogListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/logs/export":{"get":{"tags":["Guard Console - Logs"],"summary":"Export Logs","description":"Export logs for customer.\n\nReturns logs in requested format (JSON or CSV).\nCustomer can only export their own tenant's logs (enforced by adapter).\n\nSupports:\n- JSON format (default)\n- CSV format for spreadsheet import\n\nReference: PIN-281 Phase 5 (L3L2 promotion)","operationId":"export_logs_guard_logs_export_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID (required)","title":"Tenant Id"},"description":"Tenant ID (required)"},{"name":"format","in":"query","required":false,"schema":{"type":"string","description":"Export format (json, csv)","default":"json","title":"Format"},"description":"Export format (json, csv)"},{"name":"from_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter from date (ISO format)","title":"From Date"},"description":"Filter from date (ISO format)"},{"name":"to_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter to date (ISO format)","title":"To Date"},"description":"Filter to date (ISO format)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":10000,"description":"Max records (max 10000)","default":1000,"title":"Limit"},"description":"Max records (max 10000)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/logs/{log_id}":{"get":{"tags":["Guard Console - Logs"],"summary":"Get Log","description":"Get log detail with execution steps.\n\nReturns detailed view of a single log including all steps.\nCustomer can only see their own tenant's logs (enforced by adapter).\n\nThis endpoint:\n- Shows step-by-step execution trace\n- Shows outcome categories and codes\n- Shows duration per step\n- No cost or internal hash data\n\nReference: PIN-281 Phase 5 (L3L2 promotion)","operationId":"get_log_guard_logs__log_id__get","parameters":[{"name":"log_id","in":"path","required":true,"schema":{"type":"string","title":"Log Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID (required)","title":"Tenant Id"},"description":"Tenant ID (required)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerLogDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/policies":{"get":{"tags":["Guard Console - Policies"],"summary":"Get Policy Constraints","description":"Get policy constraints for customer.\n\nReturns summary of:\n- Budget constraints (limit, usage, remaining)\n- Rate limits\n- Active guardrails\n\nCustomer can only see their own tenant's constraints (enforced by adapter).\n\nThis endpoint answers:\n- What are my limits?\n- How much have I used?\n- What protection is active?\n\nReference: PIN-281 Phase 5 (L3L2 promotion)","operationId":"get_policy_constraints_guard_policies_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID (required)","title":"Tenant Id"},"description":"Tenant ID (required)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerPolicyConstraints"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/policies/guardrails/{guardrail_id}":{"get":{"tags":["Guard Console - Policies"],"summary":"Get Guardrail Detail","description":"Get guardrail detail.\n\nReturns information about a specific guardrail:\n- Name and description\n- Whether it's enabled\n- Action on trigger (block, warn, log)\n\nNo threshold values exposed (internal implementation detail).\n\nReference: PIN-281 Phase 5 (L3L2 promotion)","operationId":"get_guardrail_detail_guard_policies_guardrails__guardrail_id__get","parameters":[{"name":"guardrail_id","in":"path","required":true,"schema":{"type":"string","title":"Guardrail Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID (required)","title":"Tenant Id"},"description":"Tenant ID (required)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerGuardrail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/customer/activity":{"get":{"tags":["customer-activity"],"summary":"List Activities","description":"List activities for the current tenant.\n\nReturns paginated list of customer-safe activity summaries.\nAll results are scoped to the authenticated tenant.\n\nThis endpoint:\n- Shows what ran / is running\n- Provides step counts and status\n- Enables filtering by status, worker\n- Supports pagination\n\nNo internal fields exposed (cost_cents, replay_token).\n\nCAPABILITY: ACTIVITY_LIST","operationId":"list_activities_api_v1_customer_activity_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Max items to return","default":20,"title":"Limit"},"description":"Max items to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Pagination offset","default":0,"title":"Offset"},"description":"Pagination offset"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"worker_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by worker","title":"Worker Id"},"description":"Filter by worker"},{"name":"X-Tenant-ID","in":"header","required":true,"schema":{"type":"string","description":"Tenant ID (required)","title":"X-Tenant-Id"},"description":"Tenant ID (required)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerActivityListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/customer/activity/{run_id}":{"get":{"tags":["customer-activity"],"summary":"Get Activity","description":"Get activity detail for a specific run.\n\nReturns customer-safe activity detail if the run exists\nand belongs to the authenticated tenant.\n\nThis endpoint:\n- Shows detailed execution information\n- Shows recoveries and policy violations\n- Shows duration and timing\n- No cost or internal hash data\n\nCAPABILITY: ACTIVITY_DETAIL","operationId":"get_activity_api_v1_customer_activity__run_id__get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"X-Tenant-ID","in":"header","required":true,"schema":{"type":"string","description":"Tenant ID (required)","title":"X-Tenant-Id"},"description":"Tenant ID (required)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerActivityDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/activity/runs":{"get":{"tags":["Activity"],"summary":"List Activity Runs","description":"List runs for Activity domain.\n\nReturns runs from the `runs` table for SDSR validation.\nBy default includes synthetic data for preflight testing.\n\nNote: Auth bypassed for SDSR preflight validation (PIN-370)\nRoute is public in gateway_config.py and rbac_middleware.py","operationId":"list_activity_runs_api_v1_activity_runs_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Per Page"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"include_synthetic","in":"query","required":false,"schema":{"type":"boolean","description":"Include synthetic SDSR data","default":true,"title":"Include Synthetic"},"description":"Include synthetic SDSR data"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActivityResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/activity/runs/{run_id}":{"get":{"tags":["Activity"],"summary":"Get Run Detail","description":"Get details of a specific run.\n\nNote: Auth bypassed for SDSR preflight validation (PIN-370)","operationId":"get_run_detail_api_v1_activity_runs__run_id__get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__api__activity__RunSummary"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/activity/summary":{"get":{"tags":["Activity"],"summary":"Get Activity Summary","description":"Activity summary for HIL v1 interpretation panel.\n\nReturns:\n- Run counts by status\n- Attention flags (runs needing review)\n- Provenance metadata\n\nRules (locked per PIN-417):\n- No adjectives in response\n- Counts must reconcile\n- Reasons must be from registry\n- Provenance always present\n\nCapabilities derived from: activity.runs.list, incidents.list","operationId":"get_activity_summary_api_v1_activity_summary_get","parameters":[{"name":"window","in":"query","required":false,"schema":{"type":"string","description":"Time window: 24h or 7d","default":"24h","title":"Window"},"description":"Time window: 24h or 7d"},{"name":"include_synthetic","in":"query","required":false,"schema":{"type":"boolean","description":"Include synthetic SDSR data","default":true,"title":"Include Synthetic"},"description":"Include synthetic SDSR data"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActivitySummaryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/incidents/summary":{"get":{"tags":["Incidents"],"summary":"Get Incidents Summary","description":"Incidents summary for HIL v1 interpretation panel.\n\nReturns:\n- Incident counts by lifecycle_state (ACTIVE, ACKED, RESOLVED)\n- Attention flags (incidents needing review)\n- Provenance metadata\n\nRules (locked per PIN-417):\n- No adjectives in response\n- Counts must reconcile: active + acked + resolved == total\n- attention.count == active count (INV-002)\n- Reasons must be from registry (fail fast on unknown)\n- Provenance always present\n\nCapabilities derived from: activity.runs.list, incidents.list","operationId":"get_incidents_summary_api_v1_incidents_summary_get","parameters":[{"name":"window","in":"query","required":false,"schema":{"type":"string","description":"Time window: 24h or 7d","default":"24h","title":"Window"},"description":"Time window: 24h or 7d"},{"name":"include_synthetic","in":"query","required":false,"schema":{"type":"boolean","description":"Include synthetic SDSR data","default":true,"title":"Include Synthetic"},"description":"Include synthetic SDSR data"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IncidentsSummaryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/incidents":{"get":{"tags":["Incidents"],"summary":"List Incidents","description":"List incidents for Incidents domain.\n\nReturns incidents from the `incidents` table for SDSR validation.\nBy default includes synthetic data for preflight testing.\n\nNote: Auth bypassed for SDSR preflight validation (PIN-370)\nRoute is public in gateway_config.py and rbac_middleware.py","operationId":"list_incidents_api_v1_incidents_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Per Page"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"severity","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Severity"}},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"}},{"name":"include_synthetic","in":"query","required":false,"schema":{"type":"boolean","description":"Include synthetic SDSR data","default":true,"title":"Include Synthetic"},"description":"Include synthetic SDSR data"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IncidentsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/incidents/metrics":{"get":{"tags":["Incidents"],"summary":"Get Incidents Metrics","description":"Get summary metrics for incidents dashboard.\n\nReturns counts by status and severity.","operationId":"get_incidents_metrics_api_v1_incidents_metrics_get","parameters":[{"name":"include_synthetic","in":"query","required":false,"schema":{"type":"boolean","description":"Include synthetic SDSR data","default":true,"title":"Include Synthetic"},"description":"Include synthetic SDSR data"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IncidentsMetricsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/incidents/{incident_id}":{"get":{"tags":["Incidents"],"summary":"Get Incident Detail","description":"Get details of a specific incident.\n\nNote: Auth bypassed for SDSR preflight validation (PIN-370)","operationId":"get_incident_detail_api_v1_incidents__incident_id__get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__api__incidents__IncidentSummary"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/incidents/by-run/{run_id}":{"get":{"tags":["Incidents"],"summary":"Get Incidents For Run","description":"Get all incidents linked to a specific run.\n\nUsed by SDSR expectations validator and UI to show linked incidents.","operationId":"get_incidents_for_run_api_v1_incidents_by_run__run_id__get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/incidents/trigger":{"post":{"tags":["Incidents"],"summary":"Trigger Incident For Run","description":"[DEPRECATED] Trigger incident creation for a failed run.\n\n DEPRECATION NOTICE (PIN-370):\nThis endpoint is deprecated. Incidents are now created AUTOMATICALLY\nby the worker via Incident Engine when a run fails. Do not rely on\nthis endpoint for new integrations.\n\nThis endpoint remains for backward compatibility only and will be\nremoved in a future release. It delegates to the Incident Engine\ninternally (same as automatic creation).\n\nMigration path:\n- Remove calls to this endpoint\n- Incidents are auto-created on run failure\n- Use GET /incidents/by-run/{run_id} to check for incidents","operationId":"trigger_incident_for_run_api_v1_incidents_trigger_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TriggerIncidentRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TriggerIncidentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"deprecated":true}},"/ops/pulse":{"get":{"tags":["Ops Console"],"summary":"Get System Pulse","description":"System Pulse - \"Is my business healthy right now?\"\n\nReal-time view of system health with 24h deltas.\nCached for 12 seconds to reduce DB load.","operationId":"get_system_pulse_ops_pulse_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__api__ops__SystemPulse"}}}}}}},"/ops/customers":{"get":{"tags":["Ops Console"],"summary":"Get Customer Segments","description":"Customer Intelligence - All tenant profiles with stickiness and risk.\nCached for 12 seconds to reduce DB load.","operationId":"get_customer_segments_ops_customers_get","parameters":[{"name":"risk_level","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by risk level","title":"Risk Level"},"description":"Filter by risk level"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CustomerSegment"},"title":"Response Get Customer Segments Ops Customers Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/customers/at-risk":{"get":{"tags":["Ops Console"],"summary":"Get Customers At Risk","description":"Customers At Risk - Phase-2 Founder Intelligence.\n\nReturns at-risk customers with:\n- Risk scores and signals\n- Stickiness decay (7d vs 30d)\n- Friction events\n- Suggested founder interventions\n\nThis is THE endpoint for \"who should I call today?\"\nCached for 12 seconds to reduce DB load.","operationId":"get_customers_at_risk_ops_customers_at_risk_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CustomerAtRisk"},"title":"Response Get Customers At Risk Ops Customers At Risk Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/customers/{tenant_id}":{"get":{"tags":["Ops Console"],"summary":"Get Customer Detail","description":"Get detailed customer profile for a specific tenant.","operationId":"get_customer_detail_ops_customers__tenant_id__get","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerSegment"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/playbooks":{"get":{"tags":["Ops Console"],"summary":"Get Founder Playbooks","description":"Founder Playbooks - Signal  Action Matrix.\n\nReturns the v1 playbooks for manual founder intervention.\nUse these BEFORE automating - learn what works first.\n\nPlaybooks available:\n- silent_churn: API active but no investigation\n- policy_friction: Repeated policy blocks\n- abandonment: Replay/export abandonment pattern\n- engagement_decay: Stickiness drop >50%\n- legal_only: Using certs but no investigation","operationId":"get_founder_playbooks_ops_playbooks_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/PlaybookDetail"},"type":"array","title":"Response Get Founder Playbooks Ops Playbooks Get"}}}}}}},"/ops/playbooks/{playbook_id}":{"get":{"tags":["Ops Console"],"summary":"Get Playbook Detail","description":"Get a specific founder playbook by ID.","operationId":"get_playbook_detail_ops_playbooks__playbook_id__get","parameters":[{"name":"playbook_id","in":"path","required":true,"schema":{"type":"string","title":"Playbook Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlaybookDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/incidents/patterns":{"get":{"tags":["Ops Console"],"summary":"Get Incident Patterns","description":"Incident Intelligence - What's breaking and is it systemic?\n\nGroups failures by pattern type with trends.","operationId":"get_incident_patterns_ops_incidents_patterns_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/IncidentPattern"},"type":"array","title":"Response Get Incident Patterns Ops Incidents Patterns Get"}}}}}}},"/ops/incidents/infra-summary":{"get":{"tags":["Ops Console"],"summary":"Get Infra Incident Summary","description":"GET /ops/incidents/infra-summary\n\nPhase-S Infrastructure Incident Summary.\n\nThis endpoint uses the new L4 OpsIncidentService to query\ninfra_error_events and return aggregated OpsIncident data.\n\nReference: PIN-264 (Phase-S Track 1.3 + L4 Aggregation)\n\nReturns:\n    Aggregated incident summary from infra persistence layer.","operationId":"get_infra_incident_summary_ops_incidents_infra_summary_get","parameters":[{"name":"hours","in":"query","required":false,"schema":{"type":"integer","maximum":168,"minimum":1,"description":"Lookback window in hours","default":24,"title":"Hours"},"description":"Lookback window in hours"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Infra Incident Summary Ops Incidents Infra Summary Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/incidents/{incident_id}":{"get":{"tags":["Ops Console"],"summary":"Get Founder Incident Detail","description":"GET /ops/incidents/{incident_id}\n\nFounder Incident Detail - Full causality and impact analysis.\n\nM29 Category 5: Incident Console Contrast\n\nAnswers:\n- What failed?\n- Why?\n- What system allowed it?\n- Is it recurring?\n- What do we do next?\n\nContains internal terminology, thresholds, and raw metrics.\nNEVER expose to Customer Console.","operationId":"get_founder_incident_detail_ops_incidents__incident_id__get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderIncidentDetailDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/incidents":{"get":{"tags":["Ops Console"],"summary":"Get Founder Incidents","description":"GET /ops/incidents\n\nFounder Incident List - All incidents with summary stats.\n\nM29 Category 5: Incident Console Contrast","operationId":"get_founder_incidents_ops_incidents_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Page Size"}},{"name":"severity","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Severity"}},{"name":"state","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderIncidentListDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/stickiness":{"get":{"tags":["Ops Console"],"summary":"Get Stickiness By Feature","description":"Product Stickiness - Which feature actually keeps users?\n\nAnalyzes 30-day feature usage to identify stickiness drivers.","operationId":"get_stickiness_by_feature_ops_stickiness_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/StickinessByFeature"},"type":"array","title":"Response Get Stickiness By Feature Ops Stickiness Get"}}}}}}},"/ops/revenue":{"get":{"tags":["Ops Console"],"summary":"Get Revenue Risk","description":"Revenue & Risk - Am I making money safely?\n\nMRR estimates, at-risk tenants, silent churn detection.","operationId":"get_revenue_risk_ops_revenue_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RevenueRisk"}}}}}}},"/ops/infra":{"get":{"tags":["Ops Console"],"summary":"Get Infra Limits","description":"Infra & Limits - What breaks first if I grow?\n\nDatabase, Redis, and API capacity metrics with days-to-limit projections.\nCached for 30 seconds (infra metrics change slowly).","operationId":"get_infra_limits_ops_infra_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InfraLimits"}}}}}}},"/ops/events":{"get":{"tags":["Ops Console"],"summary":"Get Event Stream","description":"Event Stream - Raw events for debugging and analysis.\n\nUse this for Replay Lab functionality.","operationId":"get_event_stream_ops_events_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"},{"name":"event_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by event type","title":"Event Type"},"description":"Filter by event type"},{"name":"hours","in":"query","required":false,"schema":{"type":"integer","maximum":168,"minimum":1,"description":"Hours to look back","default":24,"title":"Hours"},"description":"Hours to look back"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OpsEventListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/platform/health":{"get":{"tags":["platform"],"summary":"Get Platform Health","description":"Get platform system health (lightweight version).\n\nReturns basic governance status without iterating all capabilities.\nFor full capability health, use /platform/capabilities.\n\nAudience: Founder only","operationId":"get_platform_health_platform_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/platform/capabilities":{"get":{"tags":["platform"],"summary":"Get Capabilities Eligibility","description":"Get capability eligibility list (lightweight version).\n\nReturns a batch summary of all capabilities using efficient queries.\n\nAudience: Founder only","operationId":"get_capabilities_eligibility_platform_capabilities_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/platform/domains/{domain_name}":{"get":{"tags":["platform"],"summary":"Get Domain Health","description":"Get health for a specific domain (lightweight version).\n\nArgs:\n    domain_name: Domain name (LOGS, INCIDENTS, KEYS, POLICY, KILLSWITCH, ACTIVITY)\n\nReturns:\n    Domain state with per-capability health summary\n\nRaises:\n    404: Domain not found","operationId":"get_domain_health_platform_domains__domain_name__get","parameters":[{"name":"domain_name","in":"path","required":true,"schema":{"type":"string","title":"Domain Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/platform/capabilities/{capability_name}":{"get":{"tags":["platform"],"summary":"Get Capability Health","description":"Get health for a specific capability (lightweight version).\n\nArgs:\n    capability_name: Capability name (e.g., LOGS_LIST, INCIDENTS_DETAIL)\n\nReturns:\n    Capability state with eligibility and any blocking reasons\n\nRaises:\n    404: Capability not found","operationId":"get_capability_health_platform_capabilities__capability_name__get","parameters":[{"name":"capability_name","in":"path","required":true,"schema":{"type":"string","title":"Capability Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/platform/eligibility/{capability_name}":{"get":{"tags":["platform"],"summary":"Check Capability Eligibility","description":"Quick eligibility check for a capability (lightweight version).\n\nUses direct SQL to check for blocking signals in a single query.\n\nArgs:\n    capability_name: Capability name\n\nReturns:\n    {\n        \"capability\": name,\n        \"is_eligible\": bool,\n        \"state\": \"HEALTHY|DEGRADED|BLOCKED\"\n    }\n\nRaises:\n    404: Capability not found","operationId":"check_capability_eligibility_platform_eligibility__capability_name__get","parameters":[{"name":"capability_name","in":"path","required":true,"schema":{"type":"string","title":"Capability Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Check Capability Eligibility Platform Eligibility  Capability Name  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/founder/timeline/run/{run_id}":{"get":{"tags":["founder-timeline"],"summary":"Get Run Timeline","description":"Get complete timeline for a run.\n\nStructure (chronological):\n1. PRE-RUN SNAPSHOT - What was declared before execution\n2. DECISION RECORDS - Each decision made during execution\n3. OUTCOME RECORD - What actually happened\n\nThis is a court transcript.\nFounder uses this to answer: \"Did the system behave correctly given its rules?\"","operationId":"get_run_timeline_founder_timeline_run__run_id__get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunTimeline"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/founder/timeline/decisions":{"get":{"tags":["founder-timeline"],"summary":"List Decision Records","description":"List all decision records.\n\nFor founder forensics across runs.\nNo aggregation, no scoring.\nJust filtered visibility.","operationId":"list_decision_records_founder_timeline_decisions_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}},{"name":"decision_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by type: routing, recovery, memory, policy, budget","title":"Decision Type"},"description":"Filter by type: routing, recovery, memory, policy, budget"},{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DecisionRecordView"},"title":"Response List Decision Records Founder Timeline Decisions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/founder/timeline/decisions/{decision_id}":{"get":{"tags":["founder-timeline"],"summary":"Get Decision Record","description":"Get a single decision record by ID.\n\nAll fields exposed. No interpretation.","operationId":"get_decision_record_founder_timeline_decisions__decision_id__get","parameters":[{"name":"decision_id","in":"path","required":true,"schema":{"type":"string","title":"Decision Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DecisionRecordView"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/founder/timeline/count":{"get":{"tags":["founder-timeline"],"summary":"Count Decision Records","description":"Count decision records.\n\nNo aggregation beyond counting.","operationId":"count_decision_records_founder_timeline_count_get","parameters":[{"name":"decision_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Decision Type"}},{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Count Decision Records Founder Timeline Count Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/founder/review/auto-execute":{"get":{"tags":["founder-review"],"summary":"List AUTO_EXECUTE decisions","description":"List SUB-019 AUTO_EXECUTE decisions with evidence.\n\n    **PIN-333 Constraints:**\n    - Evidence-only: Returns data from execution envelopes\n    - Read-only: No mutation\n    - Founder-only: Requires FOPS token\n\n    Default: Last 7 days, all tenants.","operationId":"list_auto_execute_decisions_founder_review_auto_execute_get","parameters":[{"name":"start_time","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"ISO8601 start time","title":"Start Time"},"description":"ISO8601 start time"},{"name":"end_time","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"ISO8601 end time","title":"End Time"},"description":"ISO8601 end time"},{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"},{"name":"decision","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"EXECUTED or SKIPPED","title":"Decision"},"description":"EXECUTED or SKIPPED"},{"name":"min_confidence","in":"query","required":false,"schema":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Min Confidence"}},{"name":"max_confidence","in":"query","required":false,"schema":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Max Confidence"}},{"name":"has_safety_flags","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter for flagged items","title":"Has Safety Flags"},"description":"Filter for flagged items"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AutoExecuteReviewListDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/founder/review/auto-execute/stats":{"get":{"tags":["founder-review"],"summary":"Get AUTO_EXECUTE statistics","description":"Get aggregate statistics for AUTO_EXECUTE decisions.\n\n    **PIN-333 Constraints:**\n    - Charts reflect stored evidence only\n    - No predictive analytics\n    - No computed risk scores","operationId":"get_auto_execute_stats_founder_review_auto_execute_stats_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"minimum":1,"description":"Number of days to aggregate","default":7,"title":"Days"},"description":"Number of days to aggregate"},{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AutoExecuteReviewStatsDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/founder/review/auto-execute/{invocation_id}":{"get":{"tags":["founder-review"],"summary":"Get single AUTO_EXECUTE decision","description":"Get detailed evidence for a single AUTO_EXECUTE decision.\n\n    **PIN-333 Constraints:**\n    - Evidence-only: Returns data from execution envelope\n    - Read-only: No mutation\n    - Founder-only: Requires FOPS token","operationId":"get_auto_execute_decision_founder_review_auto_execute__invocation_id__get","parameters":[{"name":"invocation_id","in":"path","required":true,"schema":{"type":"string","title":"Invocation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AutoExecuteReviewItemDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/founder/contracts/review-queue":{"get":{"tags":["founder-review"],"summary":"Get Review Queue","description":"Get the Founder Review Queue.\n\nReturns all contracts in ELIGIBLE status awaiting founder review.\nMAY_NOT contracts never appear here (enforced by L4).\n\nReturns:\n    FounderReviewQueueResponse with:\n    - total: Count of contracts awaiting review\n    - contracts: List of contract summaries\n    - as_of: Timestamp when queue was fetched\n\nAudience: Founder only","operationId":"get_review_queue_founder_contracts_review_queue_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/founder/contracts/{contract_id}":{"get":{"tags":["founder-review"],"summary":"Get Contract Detail","description":"Get contract details for review.\n\nReturns full contract context for making APPROVE/REJECT decision.\n\nArgs:\n    contract_id: UUID of the contract\n\nReturns:\n    FounderContractDetailView with full contract context\n\nRaises:\n    404: Contract not found\n\nAudience: Founder only","operationId":"get_contract_detail_founder_contracts__contract_id__get","parameters":[{"name":"contract_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Contract Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/founder/contracts/{contract_id}/review":{"post":{"tags":["founder-review"],"summary":"Submit Review","description":"Submit a review decision for a contract.\n\nThis is the Founder Review Gate - the last human authority point\nin the governance workflow.\n\nAllowed transitions:\n- ELIGIBLE  APPROVED (decision = \"APPROVE\")\n- ELIGIBLE  REJECTED (decision = \"REJECT\")\n\nArgs:\n    contract_id: UUID of the contract to review\n    request: Review decision (APPROVE or REJECT)\n\nReturns:\n    FounderReviewResult with:\n    - contract_id: The reviewed contract\n    - previous_status: Status before review\n    - new_status: Status after review\n    - reviewed_by: Founder ID (from auth context)\n    - reviewed_at: Timestamp\n    - comment: Optional comment\n\nRaises:\n    404: Contract not found\n    400: Invalid transition (contract not ELIGIBLE)\n    409: Contract in terminal state\n\nAudience: Founder only","operationId":"submit_review_founder_contracts__contract_id__review_post","parameters":[{"name":"contract_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Contract Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewDecisionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/founder/onboarding/force-complete":{"post":{"tags":["Founder Onboarding"],"summary":"Force Complete Onboarding","description":"Force-complete onboarding for a tenant.\n\nPIN-399 Phase-4: This is the ONLY recovery mutation allowed.\n\nConstraints (Non-Negotiable):\n- Founder-only (enforced by verify_fops_token)\n- Explicit justification required (min 10 chars)\n- Fully audited (action fails if audit fails)\n- Forward-only (advances to COMPLETE, never backward)\n\nUse cases:\n- White-glove onboarding\n- Enterprise customer unblock\n- Contractual exceptions\n\nThis is the escape hatch. Use it wisely.","operationId":"force_complete_onboarding_founder_onboarding_force_complete_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForceCompleteRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForceCompleteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/founder/onboarding/stalled":{"get":{"tags":["Founder Onboarding"],"summary":"Get Stalled Tenants","description":"Get list of stalled onboarding tenants.\n\nThis is a READ-ONLY endpoint for founder visibility.\nNo mutations. Founders can see which tenants are stuck.\n\nUse the force-complete endpoint to resolve if needed.","operationId":"get_stalled_tenants_founder_onboarding_stalled_get","parameters":[{"name":"threshold_hours","in":"query","required":false,"schema":{"type":"integer","default":24,"title":"Threshold Hours"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/customer/pre-run":{"post":{"tags":["customer-visibility"],"summary":"Get Pre Run Declaration","description":"Get PRE-RUN declaration before execution.\n\nReturns all information needed for customer to make an informed decision:\n- Stages that will execute (ordered)\n- Estimated cost range\n- Budget enforcement mode\n- Policy posture\n- Memory mode\n\nCustomer must acknowledge before execution can proceed.","operationId":"get_pre_run_declaration_customer_pre_run_post","parameters":[{"name":"agent_id","in":"query","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"goal","in":"query","required":true,"schema":{"type":"string","title":"Goal"}},{"name":"strict_mode","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Strict Mode"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreRunDeclaration"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/customer/acknowledge":{"post":{"tags":["customer-visibility"],"summary":"Acknowledge Declaration","description":"Acknowledge PRE-RUN declaration.\n\nCustomer must acknowledge to proceed with execution.\nThis creates an audit trail of informed consent.","operationId":"acknowledge_declaration_customer_acknowledge_post","parameters":[{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AcknowledgementRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AcknowledgementResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/customer/outcome/{run_id}":{"get":{"tags":["customer-visibility"],"summary":"Get Outcome Reconciliation","description":"Get outcome reconciliation after execution.\n\nReturns decomposed results (never a single success flag):\n- Task completion status\n- Budget usage status\n- Policy compliance status\n- Recovery status","operationId":"get_outcome_reconciliation_customer_outcome__run_id__get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OutcomeReconciliation"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/customer/declaration/{declaration_id}":{"get":{"tags":["customer-visibility"],"summary":"Get Declaration","description":"Retrieve a previously created PRE-RUN declaration.","operationId":"get_declaration_customer_declaration__declaration_id__get","parameters":[{"name":"declaration_id","in":"path","required":true,"schema":{"type":"string","title":"Declaration Id"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreRunDeclaration"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/onboarding/status":{"get":{"tags":["Onboarding"],"summary":"Get Onboarding Status","description":"Get current onboarding status for the authenticated tenant.\n\nReturns console-agnostic data:\n- Current state and step index\n- Next required action (action_id only - console maps to route)\n- Allowed/blocked capabilities (console maps to UI sections)\n\nThis endpoint is the single source of truth for onboarding UI.\nEach console interprets this data according to its own routing.","operationId":"get_onboarding_status_api_v1_onboarding_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OnboardingStatusResponse"}}}}}}},"/api/v1/onboarding/verify":{"post":{"tags":["Onboarding"],"summary":"Verify Identity","description":"Verify identity and advance to IDENTITY_VERIFIED state.\n\nCalled after successful identity verification (e.g., email confirmation,\nSSO completion). This is an explicit verification endpoint, not automatic.\n\nNote: In production, this would be called by the auth callback handler\nafter Clerk confirms identity. For now, it's a manual trigger.","operationId":"verify_identity_api_v1_onboarding_verify_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__api__onboarding__OnboardingVerifyResponse"}}}}}}},"/api/v1/onboarding/advance/api-key":{"post":{"tags":["Onboarding"],"summary":"Advance Api Key Created","description":"Advance to API_KEY_CREATED state.\n\nCalled after first API key is created. This is typically triggered\nautomatically by the API key creation endpoint.\n\nReturns the new onboarding status.","operationId":"advance_api_key_created_api_v1_onboarding_advance_api_key_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/integration/loop/{incident_id}":{"get":{"tags":["integration"],"summary":"Get Loop Status","description":"Get current loop status for an incident.\n\nReturns the full loop state including:\n- Completed and failed stages\n- Pending human checkpoints\n- Narrative artifacts for storytelling","operationId":"get_loop_status_integration_loop__incident_id__get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoopStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/loop/{incident_id}/stages":{"get":{"tags":["integration"],"summary":"Get Loop Stages","description":"Get detailed stage information for a loop.","operationId":"get_loop_stages_integration_loop__incident_id__stages_get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StageDetail"},"title":"Response Get Loop Stages Integration Loop  Incident Id  Stages Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/loop/{incident_id}/stream":{"get":{"tags":["integration"],"summary":"Stream Loop Status","description":"SSE endpoint for live loop status updates.\n\nConnect to receive real-time updates as the loop progresses.","operationId":"stream_loop_status_integration_loop__incident_id__stream_get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/loop/{incident_id}/retry":{"post":{"tags":["integration"],"summary":"Retry Loop Stage","description":"Retry a failed loop stage.","operationId":"retry_loop_stage_integration_loop__incident_id__retry_post","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RetryStageRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoopStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/loop/{incident_id}/revert":{"post":{"tags":["integration"],"summary":"Revert Loop","description":"Revert all changes made by a loop.\n\nThis is the ultimate human override - use with caution.","operationId":"revert_loop_integration_loop__incident_id__revert_post","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"User ID","title":"User Id"},"description":"User ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RevertLoopRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Revert Loop Integration Loop  Incident Id  Revert Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/checkpoints":{"get":{"tags":["integration"],"summary":"List Pending Checkpoints","description":"List all pending human checkpoints for the tenant.","operationId":"list_pending_checkpoints_integration_checkpoints_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CheckpointResponse"},"title":"Response List Pending Checkpoints Integration Checkpoints Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/checkpoints/{checkpoint_id}":{"get":{"tags":["integration"],"summary":"Get Checkpoint","description":"Get details of a specific checkpoint.","operationId":"get_checkpoint_integration_checkpoints__checkpoint_id__get","parameters":[{"name":"checkpoint_id","in":"path","required":true,"schema":{"type":"string","title":"Checkpoint Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckpointResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/checkpoints/{checkpoint_id}/resolve":{"post":{"tags":["integration"],"summary":"Resolve Checkpoint","description":"Resolve a pending checkpoint.\n\nAvailable resolutions depend on checkpoint type:\n- approve_policy: approve, reject, modify\n- approve_recovery: apply, reject, defer\n- simulate_routing: apply, cancel\n- revert_loop: confirm_revert, cancel","operationId":"resolve_checkpoint_integration_checkpoints__checkpoint_id__resolve_post","parameters":[{"name":"checkpoint_id","in":"path","required":true,"schema":{"type":"string","title":"Checkpoint Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"User ID","title":"User Id"},"description":"User ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResolveCheckpointRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Resolve Checkpoint Integration Checkpoints  Checkpoint Id  Resolve Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/stats":{"get":{"tags":["integration"],"summary":"Get Integration Stats","description":"Get integration loop statistics for the specified period.","operationId":"get_integration_stats_integration_stats_get","parameters":[{"name":"hours","in":"query","required":false,"schema":{"type":"integer","maximum":720,"minimum":1,"description":"Period in hours","default":24,"title":"Hours"},"description":"Period in hours"},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IntegrationStatsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/loop/{incident_id}/narrative":{"get":{"tags":["integration"],"summary":"Get Loop Narrative","description":"Get narrative artifacts for an incident loop.\n\nReturns storytelling elements:\n- before_after: Before vs After this incident\n- policy_origin: Policy born from this failure\n- agent_improvement: How agent behavior improved","operationId":"get_loop_narrative_integration_loop__incident_id__narrative_get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Loop Narrative Integration Loop  Incident Id  Narrative Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/graduation":{"get":{"tags":["integration"],"summary":"Get Graduation Status","description":"Get M25 graduation status (HARDENED).\n\nCRITICAL: This status is DERIVED from evidence, not manually set.\n\nReturns:\n- Derived graduation level (alpha/beta/candidate/complete/degraded)\n- Gate status with evidence\n- Capability gates (what's unlocked/blocked)\n- Simulation state (separate from real graduation)\n- Degradation info if status has regressed\n\nGraduation is computed from real evidence only:\n- Simulated records are excluded\n- Status is re-evaluated on each call\n- Degradation occurs when evidence regresses","operationId":"get_graduation_status_integration_graduation_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HardenedGraduationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/graduation/simulate/prevention":{"post":{"tags":["integration"],"summary":"Simulate Prevention","description":"Simulate a prevention event for demo/testing purposes.\n\nIMPORTANT: Simulated records are marked with is_simulated=true\nand DO NOT count toward real graduation.\n\nThis endpoint creates demo data for UI testing only.\nReal graduation requires real prevention evidence.","operationId":"simulate_prevention_integration_graduation_simulate_prevention_post","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulatePreventionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Simulate Prevention Integration Graduation Simulate Prevention Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/graduation/simulate/regret":{"post":{"tags":["integration"],"summary":"Simulate Regret","description":"Simulate a regret event for demo/testing purposes.\n\nIMPORTANT: Simulated records are marked with is_simulated=true\nand DO NOT count toward real graduation.\n\nThis endpoint creates demo data for UI testing only.\nReal graduation requires real regret/demotion evidence.","operationId":"simulate_regret_integration_graduation_simulate_regret_post","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulateRegretRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Simulate Regret Integration Graduation Simulate Regret Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/graduation/simulate/timeline-view":{"post":{"tags":["integration"],"summary":"Simulate Timeline View","description":"Simulate viewing a prevention timeline for Gate 3.\n\nIMPORTANT: Simulated views are marked with is_simulated=true\nand DO NOT count toward real graduation.\n\nThis endpoint creates demo data for UI testing only.\nReal graduation requires real timeline views.","operationId":"simulate_timeline_view_integration_graduation_simulate_timeline_view_post","parameters":[{"name":"incident_id","in":"query","required":true,"schema":{"type":"string","description":"Incident ID to mark as viewed in timeline","title":"Incident Id"},"description":"Incident ID to mark as viewed in timeline"},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Simulate Timeline View Integration Graduation Simulate Timeline View Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/graduation/record-view":{"post":{"tags":["integration"],"summary":"Record Timeline View","description":"Record a REAL timeline view for Gate 3 graduation.\n\nThis endpoint is called by the console when a user ACTUALLY views\nan incident's prevention timeline. This counts toward real graduation.\n\nCall this when:\n- User opens the prevention timeline UI\n- Timeline shows learning proof (prevention or rollback)","operationId":"record_timeline_view_integration_graduation_record_view_post","parameters":[{"name":"incident_id","in":"query","required":true,"schema":{"type":"string","description":"Incident ID viewed in timeline","title":"Incident Id"},"description":"Incident ID viewed in timeline"},{"name":"has_prevention","in":"query","required":false,"schema":{"type":"boolean","description":"Timeline shows prevention event","default":false,"title":"Has Prevention"},"description":"Timeline shows prevention event"},{"name":"has_rollback","in":"query","required":false,"schema":{"type":"boolean","description":"Timeline shows rollback event","default":false,"title":"Has Rollback"},"description":"Timeline shows rollback event"},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"User ID","title":"User Id"},"description":"User ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Record Timeline View Integration Graduation Record View Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/graduation/re-evaluate":{"post":{"tags":["integration"],"summary":"Trigger Graduation Re Evaluation","description":"Trigger a re-evaluation of graduation status.\n\nThis recalculates graduation level from current evidence.\nUseful after:\n- New prevention/regret events\n- Timeline views recorded\n- Manual verification\n\nNote: Graduation is automatically re-evaluated on GET /graduation,\nbut this endpoint forces a fresh computation and stores history.","operationId":"trigger_graduation_re_evaluation_integration_graduation_re_evaluate_post","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Trigger Graduation Re Evaluation Integration Graduation Re Evaluate Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/integration/timeline/{incident_id}":{"get":{"tags":["integration"],"summary":"Get Prevention Timeline","description":"Get the prevention timeline for an incident.\n\nThis is the Gate 3 UI - shows the learning loop in action:\n1. Original incident detected\n2. Pattern identified\n3. Policy born from failure\n4. (later) Similar incident detected\n5. Policy PREVENTED recurrence\n\nViewing this timeline with a prevention event proves Gate 3.","operationId":"get_prevention_timeline_integration_timeline__incident_id__get","parameters":[{"name":"incident_id","in":"path","required":true,"schema":{"type":"string","title":"Incident Id"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreventionTimelineResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cost/features":{"post":{"tags":["Cost Intelligence"],"summary":"Create Feature Tag","description":"Register a new feature tag.\n\nFeature tags are MANDATORY for cost attribution.\nNo tag  request defaulted to 'unclassified' (and flagged).","operationId":"create_feature_tag_cost_features_post","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeatureTagCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeatureTagResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Cost Intelligence"],"summary":"List Feature Tags","description":"List all feature tags for the tenant.","operationId":"list_feature_tags_cost_features_get","parameters":[{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Inactive"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FeatureTagResponse"},"title":"Response List Feature Tags Cost Features Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cost/features/{tag}":{"put":{"tags":["Cost Intelligence"],"summary":"Update Feature Tag","description":"Update a feature tag.","operationId":"update_feature_tag_cost_features__tag__put","parameters":[{"name":"tag","in":"path","required":true,"schema":{"type":"string","title":"Tag"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeatureTagUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeatureTagResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cost/record":{"post":{"tags":["Cost Intelligence"],"summary":"Record Cost","description":"Record a cost entry.\n\nThis is called internally after each LLM invocation.\nFeature tag validation: if tag doesn't exist, default to 'unclassified'.","operationId":"record_cost_cost_record_post","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CostRecordCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Record Cost Cost Record Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cost/dashboard":{"get":{"tags":["Cost Intelligence"],"summary":"Get Cost Dashboard","description":"Get complete cost dashboard.\n\nIf a CTO can't answer \"what burned money yesterday?\" in 10 seconds, this failed.","operationId":"get_cost_dashboard_cost_dashboard_get","parameters":[{"name":"period","in":"query","required":false,"schema":{"type":"string","pattern":"^(24h|7d|30d)$","default":"24h","title":"Period"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CostDashboard"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cost/summary":{"get":{"tags":["Cost Intelligence"],"summary":"Get Cost Summary","description":"Get cost summary for the period.","operationId":"get_cost_summary_cost_summary_get","parameters":[{"name":"period","in":"query","required":false,"schema":{"type":"string","pattern":"^(24h|7d|30d)$","default":"24h","title":"Period"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CostSummary"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cost/by-feature":{"get":{"tags":["Cost Intelligence"],"summary":"Get Costs By Feature","description":"Get cost breakdown by feature tag.\n\nReturns envelope with provenance for SDSR ANALYTICS domain compliance.","operationId":"get_costs_by_feature_cost_by_feature_get","parameters":[{"name":"period","in":"query","required":false,"schema":{"type":"string","pattern":"^(24h|7d|30d)$","default":"24h","title":"Period"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CostByFeatureEnvelope"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cost/by-user":{"get":{"tags":["Cost Intelligence"],"summary":"Get Costs By User","description":"Get cost breakdown by user with anomaly detection.\n\nReturns envelope with provenance for SDSR ANALYTICS domain compliance.","operationId":"get_costs_by_user_cost_by_user_get","parameters":[{"name":"period","in":"query","required":false,"schema":{"type":"string","pattern":"^(24h|7d|30d)$","default":"24h","title":"Period"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CostByUserEnvelope"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cost/by-model":{"get":{"tags":["Cost Intelligence"],"summary":"Get Costs By Model","description":"Get cost breakdown by model.\n\nReturns envelope with provenance for SDSR ANALYTICS domain compliance.","operationId":"get_costs_by_model_cost_by_model_get","parameters":[{"name":"period","in":"query","required":false,"schema":{"type":"string","pattern":"^(24h|7d|30d)$","default":"24h","title":"Period"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CostByModelEnvelope"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cost/anomalies":{"get":{"tags":["Cost Intelligence"],"summary":"Get Anomalies","description":"Get detected cost anomalies.\n\nReturns envelope with provenance for SDSR ANALYTICS domain compliance.","operationId":"get_anomalies_cost_anomalies_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"minimum":1,"default":7,"title":"Days"}},{"name":"include_resolved","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Resolved"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CostAnomaliesEnvelope"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cost/projection":{"get":{"tags":["Cost Intelligence"],"summary":"Get Projection","description":"Get cost projection based on historical data.","operationId":"get_projection_cost_projection_get","parameters":[{"name":"lookback_days","in":"query","required":false,"schema":{"type":"integer","maximum":30,"minimum":1,"default":7,"title":"Lookback Days"}},{"name":"forecast_days","in":"query","required":false,"schema":{"type":"integer","maximum":30,"minimum":1,"default":7,"title":"Forecast Days"}},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CostProjection"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cost/budgets":{"post":{"tags":["Cost Intelligence"],"summary":"Create Or Update Budget","description":"Create or update a budget.","operationId":"create_or_update_budget_cost_budgets_post","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BudgetCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BudgetResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Cost Intelligence"],"summary":"List Budgets","description":"List all budgets for the tenant.","operationId":"list_budgets_cost_budgets_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BudgetResponse"},"title":"Response List Budgets Cost Budgets Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cost/anomalies/detect":{"post":{"tags":["Cost Intelligence"],"summary":"Trigger Anomaly Detection","description":"Trigger anomaly detection for this tenant.\n\nThis endpoint:\n1. Scans for USER_SPIKE, FEATURE_SPIKE, BUDGET_WARNING, BUDGET_EXCEEDED\n2. Persists detected anomalies to database\n3. Optionally escalates HIGH/CRITICAL anomalies to M25 incident loop\n\nM25 Integration:\nWhen escalate_to_m25=True (default), HIGH and CRITICAL anomalies are:\n- Converted to M25 incidents\n- Processed through the M25 loop (Pattern  Recovery  Policy  Routing)\n- Resulting in automated policies to prevent future cost anomalies","operationId":"trigger_anomaly_detection_cost_anomalies_detect_post","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"}],"requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AnomalyDetectionRequest"}],"default":{"escalate_to_m25":true},"title":"Request"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnomalyDetectionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/cost/overview":{"get":{"tags":["Ops Cost Intelligence"],"summary":"Get Cost Overview","description":"GET /ops/cost/overview\n\nGlobal cost overview for founders.\nAggregates data from complete snapshots only.\n\nShows:\n- Total spend (today, MTD, 7d)\n- Tenants with anomalies (count)\n- Largest deviation\n- Snapshot freshness","operationId":"get_cost_overview_ops_cost_overview_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderCostOverviewDTO"}}}}}}},"/ops/cost/anomalies":{"get":{"tags":["Ops Cost Intelligence"],"summary":"Get Cost Anomalies","description":"GET /ops/cost/anomalies\n\nCross-tenant anomaly aggregation for founders.\n\nFOUNDER-ONLY: Shows affected_tenants count (cross-tenant data).\nNEVER expose to Customer Console.","operationId":"get_cost_anomalies_ops_cost_anomalies_get","parameters":[{"name":"include_resolved","in":"query","required":false,"schema":{"type":"boolean","description":"Include resolved anomalies","default":false,"title":"Include Resolved"},"description":"Include resolved anomalies"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderCostAnomalyListDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/cost/tenants":{"get":{"tags":["Ops Cost Intelligence"],"summary":"Get Cost Tenants","description":"GET /ops/cost/tenants\n\nPer-tenant cost drilldown for founders.\nShows each tenant's cost metrics with anomaly indicators.","operationId":"get_cost_tenants_ops_cost_tenants_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Page Size"}},{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","pattern":"^(spend_today|spend_mtd|deviation|anomaly_count)$","default":"spend_today","title":"Sort By"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderCostTenantListDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/cost/customers/{tenant_id}":{"get":{"tags":["Ops Cost Intelligence"],"summary":"Get Customer Cost Drilldown","description":"GET /ops/cost/customers/{tenant_id}\n\nDeep-dive cost analysis for a single customer.\nAnswers \"why is this customer spending so much?\"\n\nProvides:\n- Daily cost breakdown (last 7 days)\n- Cost attribution by feature, user, and model\n- Anomaly history\n- Budget status and projections","operationId":"get_customer_cost_drilldown_ops_cost_customers__tenant_id__get","parameters":[{"name":"tenant_id","in":"path","required":true,"schema":{"type":"string","title":"Tenant Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderCustomerCostDrilldownDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/costs/summary":{"get":{"tags":["Guard Cost Visibility"],"summary":"Get Cost Summary","description":"GET /guard/costs/summary\n\nCustomer cost summary with trend and projection.\nUses calm vocabulary: normal, rising, spike (not critical/high/medium).\n\nShows:\n- Today spend, MTD spend, 7d spend\n- Budget usage (if configured)\n- Projected month-end\n- Trend with human-readable message","operationId":"get_cost_summary_guard_costs_summary_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Your tenant ID","title":"Tenant Id"},"description":"Your tenant ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerCostSummaryDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/costs/explained":{"get":{"tags":["Guard Cost Visibility"],"summary":"Get Cost Explained","description":"GET /guard/costs/explained\n\nExplains WHY costs are what they are.\nBreaks down by feature, model, and user.\n\nDoes NOT expose:\n- churn_risk_score (founder only)\n- affected_tenants (founder only)\n- stickiness_delta (founder only)","operationId":"get_cost_explained_guard_costs_explained_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Your tenant ID","title":"Tenant Id"},"description":"Your tenant ID"},{"name":"period","in":"query","required":false,"schema":{"enum":["today","7d","30d"],"type":"string","default":"7d","title":"Period"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerCostExplainedDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/guard/costs/incidents":{"get":{"tags":["Guard Cost Visibility"],"summary":"Get Cost Incidents","description":"GET /guard/costs/incidents\n\nCost-related incidents visible to customer.\nUses calm vocabulary (protected, attention_needed).\nDoes NOT expose severity levels directly.","operationId":"get_cost_incidents_guard_costs_incidents_get","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Your tenant ID","title":"Tenant Id"},"description":"Your tenant ID"},{"name":"include_resolved","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Resolved"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerCostIncidentListDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/internal/authz/status":{"get":{"tags":["Internal - Authorization"],"summary":"Get Authz Status","description":"Get current authorization system status.\n\nReturns phase, strict mode, and resource counts.","operationId":"get_authz_status_internal_authz_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Authz Status Internal Authz Status Get"}}}}}}},"/internal/authz/mappings":{"get":{"tags":["Internal - Authorization"],"summary":"Get Authz Mappings","description":"Get all M7M28 mappings for inspection.\n\nReturns the complete mapping table.","operationId":"get_authz_mappings_internal_authz_mappings_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Authz Mappings Internal Authz Mappings Get"}}}}}}},"/internal/authz/phase-info":{"get":{"tags":["Internal - Authorization"],"summary":"Get Phase Info","description":"Get detailed information about authorization phases.\n\nReturns descriptions and migration guidance for each phase.","operationId":"get_phase_info_internal_authz_phase_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Phase Info Internal Authz Phase Info Get"}}}}}}},"/internal/authz/metrics-info":{"get":{"tags":["Internal - Authorization"],"summary":"Get Metrics Info","description":"Get metrics information for authorization monitoring.\n\nReturns dashboard queries and alert rules.","operationId":"get_metrics_info_internal_authz_metrics_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Metrics Info Internal Authz Metrics Info Get"}}}}}}},"/internal/authz/alert-rules":{"get":{"tags":["Internal - Authorization"],"summary":"Get Alert Rules Endpoint","description":"Get Prometheus alert rules for authorization monitoring.\n\nReturns YAML alert rule templates.","operationId":"get_alert_rules_endpoint_internal_authz_alert_rules_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Alert Rules Endpoint Internal Authz Alert Rules Get"}}}}}}},"/api/v1/c2/predictions/incident-risk":{"post":{"tags":["predictions","c2"],"summary":"Create Incident Risk Prediction","description":"Create ONE advisory prediction for incident risk.\n\nThis is C2-T1: minimal implementation, no generalization.\nPurpose: Prove predictions can be created without side effects.","operationId":"create_incident_risk_prediction_api_v1_c2_predictions_incident_risk_post","parameters":[{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"},{"name":"subject_type","in":"query","required":true,"schema":{"type":"string","description":"Subject type (tenant, worker, run)","title":"Subject Type"},"description":"Subject type (tenant, worker, run)"},{"name":"subject_id","in":"query","required":true,"schema":{"type":"string","description":"Subject identifier","title":"Subject Id"},"description":"Subject identifier"},{"name":"confidence_score","in":"query","required":true,"schema":{"type":"number","maximum":1.0,"minimum":0.0,"description":"Confidence 0-1","title":"Confidence Score"},"description":"Confidence 0-1"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/c2/predictions":{"get":{"tags":["predictions","c2"],"summary":"List Predictions","description":"List non-expired predictions for a subject.\n\nO4-ready surface (API exists, UI doesn't).\nExpired predictions are invisible.","operationId":"list_predictions_api_v1_c2_predictions_get","parameters":[{"name":"subject_type","in":"query","required":true,"schema":{"type":"string","description":"Subject type","title":"Subject Type"},"description":"Subject type"},{"name":"subject_id","in":"query","required":true,"schema":{"type":"string","description":"Subject identifier","title":"Subject Id"},"description":"Subject identifier"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object"},"title":"Response List Predictions Api V1 C2 Predictions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/c2/predictions/spend-spike":{"post":{"tags":["predictions","c2"],"summary":"Create Spend Spike Prediction","description":"Create ONE advisory prediction for spend spike.\n\nC2-T2: minimal implementation, no enforcement.\nPurpose: Prove spend predictions can exist without influencing behavior.\n\nRules:\n- No derived metrics computed here (no spike_ratio)\n- Raw values only in prediction_value\n- No schema changes from T1","operationId":"create_spend_spike_prediction_api_v1_c2_predictions_spend_spike_post","parameters":[{"name":"subject_type","in":"query","required":true,"schema":{"type":"string","description":"Subject type (tenant, workflow, agent)","title":"Subject Type"},"description":"Subject type (tenant, workflow, agent)"},{"name":"subject_id","in":"query","required":true,"schema":{"type":"string","description":"Subject identifier","title":"Subject Id"},"description":"Subject identifier"},{"name":"confidence_score","in":"query","required":true,"schema":{"type":"number","maximum":1.0,"minimum":0.0,"description":"Confidence 0-1","title":"Confidence Score"},"description":"Confidence 0-1"},{"name":"projected_spend","in":"query","required":true,"schema":{"type":"number","minimum":0.0,"description":"Projected spend (raw value)","title":"Projected Spend"},"description":"Projected spend (raw value)"},{"name":"baseline_spend","in":"query","required":true,"schema":{"type":"number","minimum":0.0,"description":"Baseline spend (raw value)","title":"Baseline Spend"},"description":"Baseline spend (raw value)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/c2/predictions/policy-drift":{"post":{"tags":["predictions","c2"],"summary":"Create Policy Drift Prediction","description":"Create ONE advisory prediction for policy drift observation.\n\nC2-T3: minimal implementation, STRICTEST semantic constraints.\nPurpose: Prove policy observations can exist without influencing enforcement.\n\nSEMANTIC RULES (D1 - NON-NEGOTIABLE):\n- Language MUST be advisory: \"observed\", \"may indicate\", \"similarity\"\n- Language MUST NOT imply: \"violation\", \"will violate\", \"non-compliant\"\n- This prediction has ZERO enforcement influence\n- No blocking, throttling, or incident creation\n\nRules:\n- No derived metrics or pattern computation\n- Raw observation only in prediction_value\n- No schema changes from T1/T2","operationId":"create_policy_drift_prediction_api_v1_c2_predictions_policy_drift_post","parameters":[{"name":"subject_type","in":"query","required":true,"schema":{"type":"string","description":"Subject type (tenant, workflow, agent)","title":"Subject Type"},"description":"Subject type (tenant, workflow, agent)"},{"name":"subject_id","in":"query","required":true,"schema":{"type":"string","description":"Subject identifier","title":"Subject Id"},"description":"Subject identifier"},{"name":"confidence_score","in":"query","required":true,"schema":{"type":"number","maximum":1.0,"minimum":0.0,"description":"Confidence 0-1","title":"Confidence Score"},"description":"Confidence 0-1"},{"name":"observed_pattern","in":"query","required":true,"schema":{"type":"string","description":"Raw observation (no computation)","title":"Observed Pattern"},"description":"Raw observation (no computation)"},{"name":"reference_policy_type","in":"query","required":false,"schema":{"type":"string","description":"Policy type observed (optional)","title":"Reference Policy Type"},"description":"Policy type observed (optional)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/actions/freeze-tenant":{"post":{"tags":["founder-actions"],"summary":"Freeze tenant - block all API calls","description":"Immediately block all API calls for a tenant. Reversible via unfreeze-tenant.","operationId":"freeze_tenant_ops_actions_freeze_tenant_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderActionRequestDTO"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderActionResponseDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/actions/throttle-tenant":{"post":{"tags":["founder-actions"],"summary":"Throttle tenant - reduce rate limit to 10%","description":"Reduce tenant rate limit to 10% of normal. Reversible via unthrottle-tenant.","operationId":"throttle_tenant_ops_actions_throttle_tenant_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderActionRequestDTO"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderActionResponseDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/actions/freeze-api-key":{"post":{"tags":["founder-actions"],"summary":"Freeze API key - immediately revoke","description":"Immediately revoke a specific API key. Reversible via unfreeze-api-key.","operationId":"freeze_api_key_ops_actions_freeze_api_key_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderActionRequestDTO"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderActionResponseDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/actions/override-incident":{"post":{"tags":["founder-actions"],"summary":"Override incident - mark as false positive","description":"Mark incident as false positive and close it. NOT REVERSIBLE.","operationId":"override_incident_ops_actions_override_incident_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderActionRequestDTO"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderActionResponseDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/actions/unfreeze-tenant":{"post":{"tags":["founder-actions"],"summary":"Unfreeze tenant - restore access","description":"Restore tenant access after a freeze. Requires the action_id of the original freeze.","operationId":"unfreeze_tenant_ops_actions_unfreeze_tenant_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderReversalRequestDTO"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderActionResponseDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/actions/unthrottle-tenant":{"post":{"tags":["founder-actions"],"summary":"Unthrottle tenant - restore rate limit","description":"Restore tenant rate limit after a throttle. Requires the action_id of the original throttle.","operationId":"unthrottle_tenant_ops_actions_unthrottle_tenant_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderReversalRequestDTO"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderActionResponseDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/actions/unfreeze-api-key":{"post":{"tags":["founder-actions"],"summary":"Unfreeze API key - restore access","description":"Restore API key access after a freeze. Requires the action_id of the original freeze.","operationId":"unfreeze_api_key_ops_actions_unfreeze_api_key_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderReversalRequestDTO"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderActionResponseDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/actions/audit":{"get":{"tags":["founder-actions"],"summary":"Get founder action audit trail","description":"Get list of recent founder actions for audit purposes.","operationId":"get_audit_trail_ops_actions_audit_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Page Size"}},{"name":"target_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Target Id"}},{"name":"action_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action Type"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderActionListDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ops/actions/audit/{action_id}":{"get":{"tags":["founder-actions"],"summary":"Get single audit record","description":"Get detailed audit record for a specific action.","operationId":"get_audit_record_ops_actions_audit__action_id__get","parameters":[{"name":"action_id","in":"path","required":true,"schema":{"type":"string","title":"Action Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FounderAuditRecordDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/dashboard":{"get":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Dashboard","description":"410 Gone - Dashboard is not available for MVP customers.\n\nThe dashboard has been replaced by domain-specific consoles:\n- /guard/* for customers (trust + control)\n- /ops/* for founders (intelligence + action)","operationId":"legacy_dashboard_dashboard_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}},"put":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Dashboard","description":"410 Gone - Dashboard is not available for MVP customers.\n\nThe dashboard has been replaced by domain-specific consoles:\n- /guard/* for customers (trust + control)\n- /ops/* for founders (intelligence + action)","operationId":"legacy_dashboard_dashboard_put","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}},"post":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Dashboard","description":"410 Gone - Dashboard is not available for MVP customers.\n\nThe dashboard has been replaced by domain-specific consoles:\n- /guard/* for customers (trust + control)\n- /ops/* for founders (intelligence + action)","operationId":"legacy_dashboard_dashboard_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}},"delete":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Dashboard","description":"410 Gone - Dashboard is not available for MVP customers.\n\nThe dashboard has been replaced by domain-specific consoles:\n- /guard/* for customers (trust + control)\n- /ops/* for founders (intelligence + action)","operationId":"legacy_dashboard_dashboard_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/operator/{path}":{"delete":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Operator","description":"410 Gone - Operator console merged into /ops/*.\n\nThe /operator/* routes were merged into /ops/* in M28 (PIN-145).\nCommon migrations:\n- /operator/status  /ops/overview\n- /operator/tenants  /ops/customers\n- /operator/incidents  /ops/incidents","operationId":"legacy_operator_operator__path__delete","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Operator","description":"410 Gone - Operator console merged into /ops/*.\n\nThe /operator/* routes were merged into /ops/* in M28 (PIN-145).\nCommon migrations:\n- /operator/status  /ops/overview\n- /operator/tenants  /ops/customers\n- /operator/incidents  /ops/incidents","operationId":"legacy_operator_operator__path__put","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Operator","description":"410 Gone - Operator console merged into /ops/*.\n\nThe /operator/* routes were merged into /ops/* in M28 (PIN-145).\nCommon migrations:\n- /operator/status  /ops/overview\n- /operator/tenants  /ops/customers\n- /operator/incidents  /ops/incidents","operationId":"legacy_operator_operator__path__post","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Operator","description":"410 Gone - Operator console merged into /ops/*.\n\nThe /operator/* routes were merged into /ops/* in M28 (PIN-145).\nCommon migrations:\n- /operator/status  /ops/overview\n- /operator/tenants  /ops/customers\n- /operator/incidents  /ops/incidents","operationId":"legacy_operator_operator__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/operator":{"delete":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Operator","description":"410 Gone - Operator console merged into /ops/*.\n\nThe /operator/* routes were merged into /ops/* in M28 (PIN-145).\nCommon migrations:\n- /operator/status  /ops/overview\n- /operator/tenants  /ops/customers\n- /operator/incidents  /ops/incidents","operationId":"legacy_operator_operator_delete","parameters":[{"name":"path","in":"query","required":false,"schema":{"type":"string","default":"","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Operator","description":"410 Gone - Operator console merged into /ops/*.\n\nThe /operator/* routes were merged into /ops/* in M28 (PIN-145).\nCommon migrations:\n- /operator/status  /ops/overview\n- /operator/tenants  /ops/customers\n- /operator/incidents  /ops/incidents","operationId":"legacy_operator_operator_put","parameters":[{"name":"path","in":"query","required":false,"schema":{"type":"string","default":"","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Operator","description":"410 Gone - Operator console merged into /ops/*.\n\nThe /operator/* routes were merged into /ops/* in M28 (PIN-145).\nCommon migrations:\n- /operator/status  /ops/overview\n- /operator/tenants  /ops/customers\n- /operator/incidents  /ops/incidents","operationId":"legacy_operator_operator_post","parameters":[{"name":"path","in":"query","required":false,"schema":{"type":"string","default":"","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Operator","description":"410 Gone - Operator console merged into /ops/*.\n\nThe /operator/* routes were merged into /ops/* in M28 (PIN-145).\nCommon migrations:\n- /operator/status  /ops/overview\n- /operator/tenants  /ops/customers\n- /operator/incidents  /ops/incidents","operationId":"legacy_operator_operator_get","parameters":[{"name":"path","in":"query","required":false,"schema":{"type":"string","default":"","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/demo/{path}":{"post":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Demo","description":"410 Gone - Demo/simulation endpoints removed.\n\nDemo and simulation endpoints were removed in M28:\n- /demo/simulate-incident removed\n- /v1/demo/* removed\n\nFor testing, use the canary deployment or staging environment.","operationId":"legacy_demo_demo__path__post","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Demo","description":"410 Gone - Demo/simulation endpoints removed.\n\nDemo and simulation endpoints were removed in M28:\n- /demo/simulate-incident removed\n- /v1/demo/* removed\n\nFor testing, use the canary deployment or staging environment.","operationId":"legacy_demo_demo__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/demo":{"post":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Demo","description":"410 Gone - Demo/simulation endpoints removed.\n\nDemo and simulation endpoints were removed in M28:\n- /demo/simulate-incident removed\n- /v1/demo/* removed\n\nFor testing, use the canary deployment or staging environment.","operationId":"legacy_demo_demo_post","parameters":[{"name":"path","in":"query","required":false,"schema":{"type":"string","default":"","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Demo","description":"410 Gone - Demo/simulation endpoints removed.\n\nDemo and simulation endpoints were removed in M28:\n- /demo/simulate-incident removed\n- /v1/demo/* removed\n\nFor testing, use the canary deployment or staging environment.","operationId":"legacy_demo_demo_get","parameters":[{"name":"path","in":"query","required":false,"schema":{"type":"string","default":"","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/simulation/{path}":{"post":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Simulation","description":"410 Gone - Simulation endpoints removed.\n\nPre-M29 simulation tools have been removed from production.\nFor cost simulation, use /cost/simulate with proper auth.","operationId":"legacy_simulation_simulation__path__post","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Simulation","description":"410 Gone - Simulation endpoints removed.\n\nPre-M29 simulation tools have been removed from production.\nFor cost simulation, use /cost/simulate with proper auth.","operationId":"legacy_simulation_simulation__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/simulation":{"post":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Simulation","description":"410 Gone - Simulation endpoints removed.\n\nPre-M29 simulation tools have been removed from production.\nFor cost simulation, use /cost/simulate with proper auth.","operationId":"legacy_simulation_simulation_post","parameters":[{"name":"path","in":"query","required":false,"schema":{"type":"string","default":"","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Simulation","description":"410 Gone - Simulation endpoints removed.\n\nPre-M29 simulation tools have been removed from production.\nFor cost simulation, use /cost/simulate with proper auth.","operationId":"legacy_simulation_simulation_get","parameters":[{"name":"path","in":"query","required":false,"schema":{"type":"string","default":"","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/operator/{path}":{"post":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Api Operator","description":"410 Gone - /api/v1/operator/* merged into /ops/*.\n\nThe versioned operator API has been merged into the /ops/* domain.","operationId":"legacy_api_operator_api_v1_operator__path__post","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Api Operator","description":"410 Gone - /api/v1/operator/* merged into /ops/*.\n\nThe versioned operator API has been merged into the /ops/* domain.","operationId":"legacy_api_operator_api_v1_operator__path__get","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/operator":{"get":{"tags":["Legacy (Deprecated)"],"summary":"Legacy Api Operator","description":"410 Gone - /api/v1/operator/* merged into /ops/*.\n\nThe versioned operator API has been merged into the /ops/* domain.","operationId":"legacy_api_operator_api_v1_operator_get","parameters":[{"name":"path","in":"query","required":false,"schema":{"type":"string","default":"","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/feedback":{"get":{"tags":["feedback","pb-s3","read-only"],"summary":"List Feedback","description":"List pattern feedback records (PB-S3).\n\nREAD-ONLY: This endpoint only reads data.\nNo execution data is modified by this query.","operationId":"list_feedback_api_v1_feedback_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"},{"name":"pattern_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by pattern type","title":"Pattern Type"},"description":"Filter by pattern type"},{"name":"severity","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by severity","title":"Severity"},"description":"Filter by severity"},{"name":"acknowledged","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by acknowledgement status","title":"Acknowledged"},"description":"Filter by acknowledgement status"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Maximum results","default":50,"title":"Limit"},"description":"Maximum results"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Pagination offset","default":0,"title":"Offset"},"description":"Pagination offset"},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/feedback/{feedback_id}":{"get":{"tags":["feedback","pb-s3","read-only"],"summary":"Get Feedback","description":"Get detailed feedback record by ID (PB-S3).\n\nREAD-ONLY: This endpoint only reads data.\nNo execution data is modified by this query.","operationId":"get_feedback_api_v1_feedback__feedback_id__get","parameters":[{"name":"feedback_id","in":"path","required":true,"schema":{"type":"string","title":"Feedback Id"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/feedback/stats/summary":{"get":{"tags":["feedback","pb-s3","read-only"],"summary":"Get Feedback Stats","description":"Get feedback statistics summary (PB-S3).\n\nREAD-ONLY: This endpoint only reads aggregated data.\nNo execution data is modified by this query.","operationId":"get_feedback_stats_api_v1_feedback_stats_summary_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-proposals":{"get":{"tags":["policy-proposals","pb-s4"],"summary":"List Proposals","description":"List policy proposals (PB-S4).\n\nREAD-ONLY: This endpoint only reads data.\nNo execution data is modified by this query.","operationId":"list_proposals_api_v1_policy_proposals_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status (draft/approved/rejected)","title":"Status"},"description":"Filter by status (draft/approved/rejected)"},{"name":"proposal_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by proposal type","title":"Proposal Type"},"description":"Filter by proposal type"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Maximum results","default":50,"title":"Limit"},"description":"Maximum results"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Pagination offset","default":0,"title":"Offset"},"description":"Pagination offset"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProposalListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-proposals/stats/summary":{"get":{"tags":["policy-proposals","pb-s4"],"summary":"Get Proposal Stats","description":"Get policy proposal statistics (PB-S4).\n\nREAD-ONLY: This endpoint only reads aggregated data.\nNo execution data is modified by this query.","operationId":"get_proposal_stats_api_v1_policy_proposals_stats_summary_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-proposals/{proposal_id}":{"get":{"tags":["policy-proposals","pb-s4"],"summary":"Get Proposal","description":"Get detailed policy proposal by ID (PB-S4).\n\nREAD-ONLY: This endpoint only reads data.\nNo execution data is modified by this query.","operationId":"get_proposal_api_v1_policy_proposals__proposal_id__get","parameters":[{"name":"proposal_id","in":"path","required":true,"schema":{"type":"string","title":"Proposal Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProposalDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-proposals/{proposal_id}/versions":{"get":{"tags":["policy-proposals","pb-s4"],"summary":"List Proposal Versions","description":"List all versions of a policy proposal (PB-S4).\n\nREAD-ONLY: This endpoint only reads data.\nShows the evolution of a policy through approvals.","operationId":"list_proposal_versions_api_v1_policy_proposals__proposal_id__versions_get","parameters":[{"name":"proposal_id","in":"path","required":true,"schema":{"type":"string","title":"Proposal Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VersionResponse"},"title":"Response List Proposal Versions Api V1 Policy Proposals  Proposal Id  Versions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-proposals/{proposal_id}/approve":{"post":{"tags":["policy-proposals","pb-s4"],"summary":"Approve Proposal","description":"Approve a policy proposal (PIN-373).\n\nHUMAN ACTION: This creates a policy_rules entry when approved.\nOnly draft proposals can be approved.\n\nPB-S4 Contract: Human approval is mandatory - system cannot auto-approve.","operationId":"approve_proposal_api_v1_policy_proposals__proposal_id__approve_post","parameters":[{"name":"proposal_id","in":"path","required":true,"schema":{"type":"string","title":"Proposal Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApproveRejectRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApprovalResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/policy-proposals/{proposal_id}/reject":{"post":{"tags":["policy-proposals","pb-s4"],"summary":"Reject Proposal","description":"Reject a policy proposal (PIN-373).\n\nHUMAN ACTION: This marks the proposal as rejected.\nRejection is preserved for audit trail.\nOnly draft proposals can be rejected.\n\nPB-S4 Contract: Human decision is mandatory - system cannot auto-reject.","operationId":"reject_proposal_api_v1_policy_proposals__proposal_id__reject_post","parameters":[{"name":"proposal_id","in":"path","required":true,"schema":{"type":"string","title":"Proposal Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApproveRejectRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApprovalResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/predictions":{"get":{"tags":["predictions","pb-s5","read-only"],"summary":"List Predictions","description":"List prediction events (PB-S5).\n\nREAD-ONLY: This endpoint only reads data.\nNo execution data is modified by this query.\nAll predictions are ADVISORY only.","operationId":"list_predictions_api_v1_predictions_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"},{"name":"prediction_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by type (failure_likelihood/cost_overrun)","title":"Prediction Type"},"description":"Filter by type (failure_likelihood/cost_overrun)"},{"name":"subject_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by subject type (worker/run/tenant)","title":"Subject Type"},"description":"Filter by subject type (worker/run/tenant)"},{"name":"subject_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by subject ID","title":"Subject Id"},"description":"Filter by subject ID"},{"name":"include_expired","in":"query","required":false,"schema":{"type":"boolean","description":"Include expired predictions","default":false,"title":"Include Expired"},"description":"Include expired predictions"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Maximum results","default":50,"title":"Limit"},"description":"Maximum results"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Pagination offset","default":0,"title":"Offset"},"description":"Pagination offset"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictionListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/predictions/{prediction_id}":{"get":{"tags":["predictions","pb-s5","read-only"],"summary":"Get Prediction","description":"Get detailed prediction by ID (PB-S5).\n\nREAD-ONLY: This endpoint only reads data.\nNo execution data is modified by this query.\nThis prediction is ADVISORY only.","operationId":"get_prediction_api_v1_predictions__prediction_id__get","parameters":[{"name":"prediction_id","in":"path","required":true,"schema":{"type":"string","title":"Prediction Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictionDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/predictions/subject/{subject_type}/{subject_id}":{"get":{"tags":["predictions","pb-s5","read-only"],"summary":"Get Predictions For Subject","description":"Get all predictions for a specific subject (PB-S5).\n\nREAD-ONLY: This endpoint only reads data.\nReturns all advisory predictions for a worker/run/tenant.","operationId":"get_predictions_for_subject_api_v1_predictions_subject__subject_type___subject_id__get","parameters":[{"name":"subject_type","in":"path","required":true,"schema":{"type":"string","title":"Subject Type"}},{"name":"subject_id","in":"path","required":true,"schema":{"type":"string","title":"Subject Id"}},{"name":"include_expired","in":"query","required":false,"schema":{"type":"boolean","description":"Include expired predictions","default":false,"title":"Include Expired"},"description":"Include expired predictions"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximum results","default":20,"title":"Limit"},"description":"Maximum results"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/predictions/stats/summary":{"get":{"tags":["predictions","pb-s5","read-only"],"summary":"Get Prediction Stats","description":"Get prediction statistics (PB-S5).\n\nREAD-ONLY: This endpoint only reads aggregated data.\nNo execution data is modified by this query.","operationId":"get_prediction_stats_api_v1_predictions_stats_summary_get","parameters":[{"name":"tenant_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tenant","title":"Tenant Id"},"description":"Filter by tenant"},{"name":"include_expired","in":"query","required":false,"schema":{"type":"boolean","description":"Include expired predictions","default":false,"title":"Include Expired"},"description":"Include expired predictions"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/discovery/":{"get":{"tags":["discovery"],"summary":"List Signals","description":"List discovery signals from the ledger.\n\nThis is a read-only endpoint for the Founder Console.\nSorted by seen_count (descending), then last_seen_at (descending).\n\nNo actions required - you look at it when you care.","operationId":"list_signals_api_v1_discovery__get","parameters":[{"name":"artifact","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by artifact name","title":"Artifact"},"description":"Filter by artifact name"},{"name":"signal_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by signal type","title":"Signal Type"},"description":"Filter by signal type"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"description":"Max records to return","default":100,"title":"Limit"},"description":"Max records to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/discovery":{"get":{"tags":["discovery"],"summary":"List Signals","description":"List discovery signals from the ledger.\n\nThis is a read-only endpoint for the Founder Console.\nSorted by seen_count (descending), then last_seen_at (descending).\n\nNo actions required - you look at it when you care.","operationId":"list_signals_api_v1_discovery_get","parameters":[{"name":"artifact","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by artifact name","title":"Artifact"},"description":"Filter by artifact name"},{"name":"signal_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by signal type","title":"Signal Type"},"description":"Filter by signal type"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"description":"Max records to return","default":100,"title":"Limit"},"description":"Max records to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/discovery/stats":{"get":{"tags":["discovery"],"summary":"Signal Stats","description":"Get summary statistics of discovery signals.\n\nReturns counts by artifact, signal_type, and status.","operationId":"signal_stats_api_v1_discovery_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/runtime/activity/runs":{"get":{"tags":["runtime-projections","runtime-projections","activity","o2-list"],"summary":"List runs with unified query filters","description":"Returns paginated list of runs matching filter criteria.\n    This is the canonical O2 endpoint for all Activity domain topics.\n\n    Topic mapping:\n    - Live Topic: `?state=LIVE`\n    - Completed Topic: `?state=COMPLETED`\n    - Risk Signals Topic: `?risk=true`\n\n    READ-ONLY: All data pre-computed upstream. No query-time computation.\n\n    SECURITY INVARIANT (PIN-411):\n    - tenant_id is derived from auth_context, NEVER from query params\n    - Supplying tenant_id in query params is rejected with 400","operationId":"list_runs_api_v1_runtime_activity_runs_get","parameters":[{"name":"project_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Project scope","title":"Project Id"},"description":"Project scope"},{"name":"state","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/RunState"},{"type":"null"}],"description":"Run lifecycle state","title":"State"},"description":"Run lifecycle state"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"type":"string"}},{"type":"null"}],"description":"Run status (can specify multiple)","title":"Status"},"description":"Run status (can specify multiple)"},{"name":"risk","in":"query","required":false,"schema":{"type":"boolean","description":"If true, returns runs with risk signals","default":false,"title":"Risk"},"description":"If true, returns runs with risk signals"},{"name":"risk_level","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"$ref":"#/components/schemas/RiskLevel"}},{"type":"null"}],"description":"Filter by risk level","title":"Risk Level"},"description":"Filter by risk level"},{"name":"latency_bucket","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"$ref":"#/components/schemas/LatencyBucket"}},{"type":"null"}],"description":"Filter by latency","title":"Latency Bucket"},"description":"Filter by latency"},{"name":"evidence_health","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"$ref":"#/components/schemas/EvidenceHealth"}},{"type":"null"}],"description":"Filter by evidence health","title":"Evidence Health"},"description":"Filter by evidence health"},{"name":"integrity_status","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"$ref":"#/components/schemas/IntegrityStatus"}},{"type":"null"}],"description":"Filter by integrity","title":"Integrity Status"},"description":"Filter by integrity"},{"name":"source","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"$ref":"#/components/schemas/RunSource"}},{"type":"null"}],"description":"Filter by run source","title":"Source"},"description":"Filter by run source"},{"name":"provider_type","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"$ref":"#/components/schemas/ProviderType"}},{"type":"null"}],"description":"Filter by LLM provider","title":"Provider Type"},"description":"Filter by LLM provider"},{"name":"is_synthetic","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by synthetic data flag","title":"Is Synthetic"},"description":"Filter by synthetic data flag"},{"name":"started_after","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter runs started after","title":"Started After"},"description":"Filter runs started after"},{"name":"started_before","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter runs started before","title":"Started Before"},"description":"Filter runs started before"},{"name":"completed_after","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter runs completed after","title":"Completed After"},"description":"Filter runs completed after"},{"name":"completed_before","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter runs completed before","title":"Completed Before"},"description":"Filter runs completed before"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Max runs to return","default":50,"title":"Limit"},"description":"Max runs to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of runs to skip","default":0,"title":"Offset"},"description":"Number of runs to skip"},{"name":"sort_by","in":"query","required":false,"schema":{"allOf":[{"$ref":"#/components/schemas/SortField"}],"description":"Field to sort by","default":"started_at","title":"Sort By"},"description":"Field to sort by"},{"name":"sort_order","in":"query","required":false,"schema":{"allOf":[{"$ref":"#/components/schemas/SortOrder"}],"description":"Sort direction","default":"desc","title":"Sort Order"},"description":"Sort direction"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__runtime_projections__activity__runs__RunListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/activity/runs/{run_id}":{"get":{"tags":["runtime-projections","runtime-projections","activity","o2-list","o3-detail"],"summary":"Get run detail (O3)","description":"Returns detailed information about a specific run.","operationId":"get_run_detail_api_v1_runtime_activity_runs__run_id__get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Run Detail Api V1 Runtime Activity Runs  Run Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/activity/runs/{run_id}/evidence":{"get":{"tags":["runtime-projections","runtime-projections","activity","o2-list","o4-evidence","preflight-only"],"summary":"Get run evidence (O4)","description":"Returns cross-domain impact and evidence context. Preflight only.","operationId":"get_run_evidence_api_v1_runtime_activity_runs__run_id__evidence_get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Run Evidence Api V1 Runtime Activity Runs  Run Id  Evidence Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/activity/runs/{run_id}/proof":{"get":{"tags":["runtime-projections","runtime-projections","activity","o2-list","o5-proof","preflight-only"],"summary":"Get run proof (O5)","description":"Returns raw traces, logs, and integrity proof. Preflight only.","operationId":"get_run_proof_api_v1_runtime_activity_runs__run_id__proof_get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"include_payloads","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Payloads"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Get Run Proof Api V1 Runtime Activity Runs  Run Id  Proof Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/incidents":{"get":{"tags":["runtime-projections","runtime-incidents"],"summary":"List Incidents","description":"GET /api/v1/runtime/incidents\n\nINC-RT-O2: Incidents Runtime Projection\n\nReturns incidents matching the specified UX topic and filters.\nACTIVE topic includes both ACTIVE and ACKED lifecycle states.\nACKED items should be displayed with a badge in the UI.\nTenant isolation is enforced from auth context.","operationId":"list_incidents_api_v1_runtime_incidents_get","parameters":[{"name":"topic","in":"query","required":true,"schema":{"type":"string","pattern":"^(ACTIVE|RESOLVED)$","description":"UX Topic: ACTIVE (includes ACKED as badge) or RESOLVED","title":"Topic"},"description":"UX Topic: ACTIVE (includes ACKED as badge) or RESOLVED"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Max rows to return","default":20,"title":"Limit"},"description":"Max rows to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Rows to skip","default":0,"title":"Offset"},"description":"Rows to skip"},{"name":"severity","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(critical|high|medium|low)$"},{"type":"null"}],"description":"Filter by severity: critical, high, medium, low","title":"Severity"},"description":"Filter by severity: critical, high, medium, low"},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by category (exact match)","title":"Category"},"description":"Filter by category (exact match)"},{"name":"cause_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(LLM_RUN|SYSTEM|HUMAN)$"},{"type":"null"}],"description":"Filter by cause type: LLM_RUN, SYSTEM, HUMAN","title":"Cause Type"},"description":"Filter by cause type: LLM_RUN, SYSTEM, HUMAN"},{"name":"created_after","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter by created_at >= value","title":"Created After"},"description":"Filter by created_at >= value"},{"name":"created_before","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter by created_at <= value","title":"Created Before"},"description":"Filter by created_at <= value"},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IncidentsO2Response"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/policies/rules":{"get":{"tags":["runtime-projections","runtime-policies","runtime-governance"],"summary":"List Governance Rules","description":"GET /api/v1/runtime/policies/rules\n\nGOV-RT-O2: Governance Runtime Projection\n\nReturns policy rules matching the specified status and filters.\nIncludes integrity status and trigger statistics.\nTenant isolation is enforced from auth context.","operationId":"list_governance_rules_api_v1_runtime_policies_rules_get","parameters":[{"name":"status","in":"query","required":true,"schema":{"type":"string","pattern":"^(ACTIVE|RETIRED)$","description":"Rule status: ACTIVE or RETIRED","title":"Status"},"description":"Rule status: ACTIVE or RETIRED"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Max rows to return","default":20,"title":"Limit"},"description":"Max rows to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Rows to skip","default":0,"title":"Offset"},"description":"Rows to skip"},{"name":"enforcement_mode","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(BLOCK|WARN|AUDIT|DISABLED)$"},{"type":"null"}],"description":"Filter by enforcement mode: BLOCK, WARN, AUDIT, DISABLED","title":"Enforcement Mode"},"description":"Filter by enforcement mode: BLOCK, WARN, AUDIT, DISABLED"},{"name":"scope","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(GLOBAL|TENANT|PROJECT|AGENT)$"},{"type":"null"}],"description":"Filter by scope: GLOBAL, TENANT, PROJECT, AGENT","title":"Scope"},"description":"Filter by scope: GLOBAL, TENANT, PROJECT, AGENT"},{"name":"source","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(MANUAL|SYSTEM|LEARNED)$"},{"type":"null"}],"description":"Filter by source: MANUAL, SYSTEM, LEARNED","title":"Source"},"description":"Filter by source: MANUAL, SYSTEM, LEARNED"},{"name":"created_after","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter by created_at >= value","title":"Created After"},"description":"Filter by created_at >= value"},{"name":"created_before","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter by created_at <= value","title":"Created Before"},"description":"Filter by created_at <= value"},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GovernanceO2Response"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/policies/limits":{"get":{"tags":["runtime-projections","runtime-policies","runtime-limits"],"summary":"List Limits","description":"GET /api/v1/runtime/policies/limits?type={BUDGET|RATE|THRESHOLD}\n\nLIM-RT-O2: Limits Runtime Projection\n\nReturns limits matching the specified category and filters.\nIncludes integrity status and breach statistics.\nTenant isolation is enforced from auth context.","operationId":"list_limits_api_v1_runtime_policies_limits_get","parameters":[{"name":"type","in":"query","required":true,"schema":{"type":"string","pattern":"^(BUDGET|RATE|THRESHOLD)$","description":"Limit category: BUDGET, RATE, or THRESHOLD","title":"Type"},"description":"Limit category: BUDGET, RATE, or THRESHOLD"},{"name":"status","in":"query","required":false,"schema":{"type":"string","pattern":"^(ACTIVE|DISABLED)$","description":"Limit status: ACTIVE or DISABLED","default":"ACTIVE","title":"Status"},"description":"Limit status: ACTIVE or DISABLED"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Max rows to return","default":20,"title":"Limit"},"description":"Max rows to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Rows to skip","default":0,"title":"Offset"},"description":"Rows to skip"},{"name":"scope","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(GLOBAL|TENANT|PROJECT|AGENT|PROVIDER)$"},{"type":"null"}],"description":"Filter by scope: GLOBAL, TENANT, PROJECT, AGENT, PROVIDER","title":"Scope"},"description":"Filter by scope: GLOBAL, TENANT, PROJECT, AGENT, PROVIDER"},{"name":"enforcement","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(BLOCK|WARN|REJECT|QUEUE|DEGRADE|ALERT)$"},{"type":"null"}],"description":"Filter by enforcement: BLOCK, WARN, REJECT, QUEUE, DEGRADE, ALERT","title":"Enforcement"},"description":"Filter by enforcement: BLOCK, WARN, REJECT, QUEUE, DEGRADE, ALERT"},{"name":"created_after","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter by created_at >= value","title":"Created After"},"description":"Filter by created_at >= value"},{"name":"created_before","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter by created_at <= value","title":"Created Before"},"description":"Filter by created_at <= value"},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LimitsO2Response"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/overview/highlights":{"get":{"tags":["runtime-projections","runtime-overview"],"summary":"Get Cross Domain Highlights","description":"GET /api/v1/runtime/overview/highlights\n\nCross-Domain Highlights: System pulse and domain counts.\n\nPROJECTION-ONLY: Aggregates from existing domain tables.\nNo owned state. Read-only.","operationId":"get_cross_domain_highlights_api_v1_runtime_overview_highlights_get","parameters":[{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CrossDomainHighlightsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/overview/decisions":{"get":{"tags":["runtime-projections","runtime-overview"],"summary":"Get Decisions Queue","description":"GET /api/v1/runtime/overview/decisions\n\nDecisions Queue: Pending items requiring human action.\n\nPROJECTION-ONLY: Aggregates from incidents (pending ACK) and\npolicy_proposals (pending approval). Does NOT create or own\ndecision state  only projects existing pending items.","operationId":"get_decisions_queue_api_v1_runtime_overview_decisions_get","parameters":[{"name":"source_domain","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(INCIDENT|POLICY)$"},{"type":"null"}],"description":"Filter by source domain: INCIDENT, POLICY","title":"Source Domain"},"description":"Filter by source domain: INCIDENT, POLICY"},{"name":"priority","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(CRITICAL|HIGH|MEDIUM|LOW)$"},{"type":"null"}],"description":"Filter by priority: CRITICAL, HIGH, MEDIUM, LOW","title":"Priority"},"description":"Filter by priority: CRITICAL, HIGH, MEDIUM, LOW"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Max items to return","default":50,"title":"Limit"},"description":"Max items to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Rows to skip","default":0,"title":"Offset"},"description":"Rows to skip"},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DecisionsQueueResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/overview/costs":{"get":{"tags":["runtime-projections","runtime-overview"],"summary":"Get Cost Intelligence","description":"GET /api/v1/runtime/overview/costs\n\nCost Intelligence: Realized and constrained costs.\n\nPROJECTION-ONLY: Aggregates from limits, limit_breaches, and worker_runs.\nNo owned state. Read-only. No speculation.\n\nV1 SCOPE:\n- Actual LLM spend (from worker_runs.cost_cents)\n- Budget limits (from limits where category=BUDGET)\n- Breach counts and overage (from limit_breaches)\n\nEXPLICITLY EXCLUDED (v2+):\n- \"Saved cost\" / policy-prevented attribution\n- Forecasts or projections\n- Synthetic attribution","operationId":"get_cost_intelligence_api_v1_runtime_overview_costs_get","parameters":[{"name":"period_days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Period in days to calculate costs","default":30,"title":"Period Days"},"description":"Period in days to calculate costs"},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CostIntelligenceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/logs/audit":{"get":{"tags":["runtime-projections","runtime-logs"],"summary":"List Audit Entries","description":"GET /api/v1/runtime/logs/audit\n\nAudit Ledger: Immutable governance action log.\n\nRecords governance-relevant actions taken by actors.\nOnly canonical events from the approved list create rows.\nAPPEND-ONLY: No UPDATE, no DELETE (enforced by DB trigger).","operationId":"list_audit_entries_api_v1_runtime_logs_audit_get","parameters":[{"name":"event_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by event type","title":"Event Type"},"description":"Filter by event type"},{"name":"entity_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(POLICY_RULE|POLICY_PROPOSAL|LIMIT|INCIDENT)$"},{"type":"null"}],"description":"Filter by entity type: POLICY_RULE, POLICY_PROPOSAL, LIMIT, INCIDENT","title":"Entity Type"},"description":"Filter by entity type: POLICY_RULE, POLICY_PROPOSAL, LIMIT, INCIDENT"},{"name":"actor_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(HUMAN|SYSTEM|AGENT)$"},{"type":"null"}],"description":"Filter by actor type: HUMAN, SYSTEM, AGENT","title":"Actor Type"},"description":"Filter by actor type: HUMAN, SYSTEM, AGENT"},{"name":"created_after","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter by created_at >= value","title":"Created After"},"description":"Filter by created_at >= value"},{"name":"created_before","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter by created_at <= value","title":"Created Before"},"description":"Filter by created_at <= value"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Max items to return","default":50,"title":"Limit"},"description":"Max items to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Rows to skip","default":0,"title":"Offset"},"description":"Rows to skip"},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuditLedgerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/logs/audit/{entry_id}":{"get":{"tags":["runtime-projections","runtime-logs"],"summary":"Get Audit Entry","description":"GET /api/v1/runtime/logs/audit/{entry_id}\n\nAudit Ledger Entry Detail: Full entry with state snapshots.\n\nShows before_state and after_state for MODIFY events.","operationId":"get_audit_entry_api_v1_runtime_logs_audit__entry_id__get","parameters":[{"name":"entry_id","in":"path","required":true,"schema":{"type":"string","title":"Entry Id"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuditLedgerDetailItem"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/logs/llm-runs":{"get":{"tags":["runtime-projections","runtime-logs"],"summary":"List Llm Run Records","description":"GET /api/v1/runtime/logs/llm-runs\n\nLLM Run Records: Immutable execution records for every LLM run.\n\nThis is the TRUST ANCHOR for execution verification.\nRecords are WRITE-ONCE (no UPDATE, no DELETE - enforced by DB trigger).\n\nAnswers:\n- Did this run really happen?\n- What provider, model, tokens, cost?\n- What was the execution outcome?","operationId":"list_llm_run_records_api_v1_runtime_logs_llm_runs_get","parameters":[{"name":"run_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by run ID","title":"Run Id"},"description":"Filter by run ID"},{"name":"provider","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by provider: anthropic, openai, stub","title":"Provider"},"description":"Filter by provider: anthropic, openai, stub"},{"name":"model","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by model name","title":"Model"},"description":"Filter by model name"},{"name":"execution_status","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(SUCCEEDED|FAILED|ABORTED|TIMEOUT)$"},{"type":"null"}],"description":"Filter by status: SUCCEEDED, FAILED, ABORTED, TIMEOUT","title":"Execution Status"},"description":"Filter by status: SUCCEEDED, FAILED, ABORTED, TIMEOUT"},{"name":"is_synthetic","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by synthetic flag","title":"Is Synthetic"},"description":"Filter by synthetic flag"},{"name":"created_after","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter by created_at >= value","title":"Created After"},"description":"Filter by created_at >= value"},{"name":"created_before","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter by created_at <= value","title":"Created Before"},"description":"Filter by created_at <= value"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Max items to return","default":50,"title":"Limit"},"description":"Max items to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Rows to skip","default":0,"title":"Offset"},"description":"Rows to skip"},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LLMRunRecordsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/logs/llm-runs/{record_id}":{"get":{"tags":["runtime-projections","runtime-logs"],"summary":"Get Llm Run Record","description":"GET /api/v1/runtime/logs/llm-runs/{record_id}\n\nLLM Run Record Detail: Full record with content hashes.\n\nShows prompt_hash and response_hash for verification.","operationId":"get_llm_run_record_api_v1_runtime_logs_llm_runs__record_id__get","parameters":[{"name":"record_id","in":"path","required":true,"schema":{"type":"string","title":"Record Id"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LLMRunRecordDetailItem"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/logs/system":{"get":{"tags":["runtime-projections","runtime-logs"],"summary":"List System Records","description":"GET /api/v1/runtime/logs/system\n\nSystem Records: Immutable records for system-level events.\n\nNOT infra noise or stdout spam. YES:\n- Worker restarts\n- Deployment changes\n- Schema migrations\n- Auth / permission changes\n\nRecords are WRITE-ONCE (no UPDATE, no DELETE - enforced by DB trigger).","operationId":"list_system_records_api_v1_runtime_logs_system_get","parameters":[{"name":"component","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(worker|api|scheduler|db|auth|migration)$"},{"type":"null"}],"description":"Filter by component: worker, api, scheduler, db, auth, migration","title":"Component"},"description":"Filter by component: worker, api, scheduler, db, auth, migration"},{"name":"event_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by event type: STARTUP, SHUTDOWN, RESTART, DEPLOY, MIGRATION, AUTH_CHANGE, CONFIG_CHANGE, ERROR, HEALTH_CHECK","title":"Event Type"},"description":"Filter by event type: STARTUP, SHUTDOWN, RESTART, DEPLOY, MIGRATION, AUTH_CHANGE, CONFIG_CHANGE, ERROR, HEALTH_CHECK"},{"name":"severity","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(INFO|WARN|CRITICAL)$"},{"type":"null"}],"description":"Filter by severity: INFO, WARN, CRITICAL","title":"Severity"},"description":"Filter by severity: INFO, WARN, CRITICAL"},{"name":"created_after","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter by created_at >= value","title":"Created After"},"description":"Filter by created_at >= value"},{"name":"created_before","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter by created_at <= value","title":"Created Before"},"description":"Filter by created_at <= value"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Max items to return","default":50,"title":"Limit"},"description":"Max items to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Rows to skip","default":0,"title":"Offset"},"description":"Rows to skip"},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemRecordsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runtime/logs/system/{record_id}":{"get":{"tags":["runtime-projections","runtime-logs"],"summary":"Get System Record","description":"GET /api/v1/runtime/logs/system/{record_id}\n\nSystem Record Detail: Full record with details payload.","operationId":"get_system_record_api_v1_runtime_logs_system__record_id__get","parameters":[{"name":"record_id","in":"path","required":true,"schema":{"type":"string","title":"Record Id"}},{"name":"X-AOS-Key","in":"header","required":false,"schema":{"type":"string","title":"X-Aos-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemRecordDetailItem"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/version":{"get":{"summary":"Version","description":"Version info.","operationId":"version_version_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/healthz":{"get":{"summary":"Healthz","description":"Kubernetes-style health check.","operationId":"healthz_healthz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/openapi-download":{"get":{"summary":"Download Openapi","description":"Download OpenAPI spec as JSON file.","operationId":"download_openapi_openapi_download_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/healthz/worker_pool":{"get":{"summary":"Worker Pool Health","description":"Worker pool health probe endpoint.","operationId":"worker_pool_health_healthz_worker_pool_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/metrics":{"get":{"summary":"Metrics","description":"Prometheus metrics endpoint (multiprocess-aware).","operationId":"metrics_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/skills":{"get":{"summary":"Get Skills","description":"List all registered skills.","operationId":"get_skills_skills_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/agents":{"post":{"summary":"Create Agent","description":"Create a new agent.","operationId":"create_agent_agents_post","parameters":[{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAgentRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAgentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/agents/{agent_id}":{"get":{"summary":"Get Agent","description":"Get agent by ID.","operationId":"get_agent_agents__agent_id__get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/agents/{agent_id}/goals":{"post":{"summary":"Post Goal","description":"Submit a goal to an agent.\nReturns 202 Accepted with run_id. Poll /runs/{run_id} for status.\n\nIncludes:\n- Idempotency checking (via idempotency_key in payload)\n- Rate limiting per tenant (100 requests/min)\n- Concurrent runs limiting per agent (max 5)\n- Budget pre-check before accepting","operationId":"post_goal_agents__agent_id__goals_post","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GoalRequest"}}}},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GoalResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/agents/{agent_id}/runs/{run_id}":{"get":{"summary":"Get Run","description":"Get run status and results.","operationId":"get_run_agents__agent_id__runs__run_id__get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/agents/{agent_id}/runs":{"get":{"summary":"List Runs","description":"List runs for an agent.","operationId":"list_runs_agents__agent_id__runs_get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RunResponse"},"title":"Response List Runs Agents  Agent Id  Runs Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/agents/{agent_id}/recall":{"get":{"summary":"Recall Memory","description":"Recall memories for an agent.","operationId":"recall_memory_agents__agent_id__recall_get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"query","in":"query","required":true,"schema":{"type":"string","title":"Query"}},{"name":"k","in":"query","required":false,"schema":{"type":"integer","default":5,"title":"K"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MemoryResponse"},"title":"Response Recall Memory Agents  Agent Id  Recall Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/agents/{agent_id}/provenance":{"get":{"summary":"Get Provenance","description":"Get provenance records for an agent.","operationId":"get_provenance_agents__agent_id__provenance_get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProvenanceResponse"},"title":"Response Get Provenance Agents  Agent Id  Provenance Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/agents/{agent_id}/provenance/{prov_id}":{"get":{"summary":"Get Provenance By Id","description":"Get a specific provenance record.","operationId":"get_provenance_by_id_agents__agent_id__provenance__prov_id__get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}},{"name":"prov_id","in":"path","required":true,"schema":{"type":"string","title":"Prov Id"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProvenanceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/retry":{"post":{"summary":"Retry Failed Run","description":"Retry a failed worker run by creating a NEW execution (PB-S1 compliant).\n\nThis endpoint:\n- Creates a NEW run with a new ID\n- Sets parent_run_id to link to the original failed run\n- Increments the attempt counter\n- NEVER modifies the original run (immutable)\n\nPB-S1 Guarantee: Original execution remains unchanged.\n\nPIN-337: Routes through ExecutionKernel for structural governance.","operationId":"retry_failed_run_admin_retry_post","parameters":[{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RetryRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RetryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/rerun":{"post":{"summary":"Rerun Failed Run","description":"REMOVED: This endpoint has been disabled to enforce PB-S1 truth guarantees.\n\nUse POST /admin/retry instead.\n\nPB-S1 Invariant: Retry creates NEW execution, never mutates original.\nThis endpoint violated that invariant and has been hard-disabled.","operationId":"rerun_failed_run_admin_rerun_post","deprecated":true,"parameters":[{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RerunRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RerunResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/failed-runs":{"get":{"summary":"List Failed Runs","description":"List recent failed runs for review.","operationId":"list_failed_runs_admin_failed_runs_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"X-AOS-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Aos-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"APIKeyCreateRequest":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name"},"permissions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Permissions"},"allowed_workers":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Allowed Workers"},"expires_in_days":{"anyOf":[{"type":"integer","maximum":365.0,"minimum":1.0},{"type":"null"}],"title":"Expires In Days"},"rate_limit_rpm":{"anyOf":[{"type":"integer","maximum":1000.0,"minimum":1.0},{"type":"null"}],"title":"Rate Limit Rpm"},"max_concurrent_runs":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":1.0},{"type":"null"}],"title":"Max Concurrent Runs"}},"type":"object","required":["name"],"title":"APIKeyCreateRequest","description":"Request to create an API key."},"APIKeyCreatedResponse":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"key_prefix":{"type":"string","title":"Key Prefix"},"status":{"type":"string","title":"Status"},"last_used_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Used At"},"total_requests":{"type":"integer","title":"Total Requests"},"expires_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expires At"},"created_at":{"type":"string","title":"Created At"},"key":{"type":"string","title":"Key","description":"The full API key. Store this securely - it won't be shown again!"}},"type":"object","required":["id","name","key_prefix","status","last_used_at","total_requests","expires_at","created_at","key"],"title":"APIKeyCreatedResponse","description":"Response when creating an API key (includes the key once)."},"APIKeyResponse":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"key_prefix":{"type":"string","title":"Key Prefix"},"status":{"type":"string","title":"Status"},"last_used_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Used At"},"total_requests":{"type":"integer","title":"Total Requests"},"expires_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expires At"},"created_at":{"type":"string","title":"Created At"}},"type":"object","required":["id","name","key_prefix","status","last_used_at","total_requests","expires_at","created_at"],"title":"APIKeyResponse","description":"API key information (without the actual key)."},"AcknowledgementRequest":{"properties":{"declaration_id":{"type":"string","title":"Declaration Id"},"acknowledged":{"type":"boolean","title":"Acknowledged","default":true}},"type":"object","required":["declaration_id"],"title":"AcknowledgementRequest","description":"Customer acknowledgement of PRE-RUN declaration."},"AcknowledgementResponse":{"properties":{"declaration_id":{"type":"string","title":"Declaration Id"},"acknowledged":{"type":"boolean","title":"Acknowledged"},"execution_allowed":{"type":"boolean","title":"Execution Allowed"},"message":{"type":"string","title":"Message"}},"type":"object","required":["declaration_id","acknowledged","execution_allowed","message"],"title":"AcknowledgementResponse","description":"Response after acknowledgement."},"ActionListResponse":{"properties":{"actions":{"items":{"$ref":"#/components/schemas/ActionResponse"},"type":"array","title":"Actions"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["actions","total"],"title":"ActionListResponse","description":"Response for actions list endpoint."},"ActionResponse":{"properties":{"id":{"type":"integer","title":"Id"},"action_code":{"type":"string","title":"Action Code"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"action_type":{"type":"string","title":"Action Type"},"template":{"type":"object","title":"Template"},"applies_to_error_codes":{"items":{"type":"string"},"type":"array","title":"Applies To Error Codes"},"applies_to_skills":{"items":{"type":"string"},"type":"array","title":"Applies To Skills"},"success_rate":{"type":"number","title":"Success Rate"},"total_applications":{"type":"integer","title":"Total Applications"},"is_automated":{"type":"boolean","title":"Is Automated"},"requires_approval":{"type":"boolean","title":"Requires Approval"},"priority":{"type":"integer","title":"Priority"},"is_active":{"type":"boolean","title":"Is Active"}},"type":"object","required":["id","action_code","name","description","action_type","template","applies_to_error_codes","applies_to_skills","success_rate","total_applications","is_automated","requires_approval","priority","is_active"],"title":"ActionResponse","description":"Recovery action from catalog."},"ActionType":{"type":"string","enum":["route","execute","adapt","escalate","self_modify","spawn","invoke","data_access","external_call"],"title":"ActionType","description":"Types of actions that require policy evaluation."},"ActivateVersionRequest":{"properties":{"version_id":{"type":"string","title":"Version Id"},"activated_by":{"type":"string","title":"Activated By","default":"system"},"dry_run":{"type":"boolean","title":"Dry Run","default":false}},"type":"object","required":["version_id"],"title":"ActivateVersionRequest","description":"Request to activate a policy version."},"ActivityBlockersResponse":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"blockers":{"items":{"$ref":"#/components/schemas/BlockerEntry"},"type":"array","title":"Blockers"},"blocked":{"type":"boolean","title":"Blocked"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["agent_id","blockers","blocked","timestamp"],"title":"ActivityBlockersResponse","description":"Response for blockers endpoint."},"ActivityCostsResponse":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"workers":{"items":{"$ref":"#/components/schemas/WorkerCostMetrics"},"type":"array","title":"Workers"},"total_cost_level":{"type":"string","title":"Total Cost Level"},"total_risk":{"type":"number","title":"Total Risk"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["agent_id","workers","total_cost_level","total_risk","timestamp"],"title":"ActivityCostsResponse","description":"Response for activity costs endpoint."},"ActivityResponse":{"properties":{"runs":{"items":{"$ref":"#/components/schemas/app__api__activity__RunSummary"},"type":"array","title":"Runs"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"per_page":{"type":"integer","title":"Per Page"}},"type":"object","required":["runs","total","page","per_page"],"title":"ActivityResponse","description":"Activity list response."},"ActivityRetriesResponse":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"retries":{"items":{"$ref":"#/components/schemas/RetryEntryResponse"},"type":"array","title":"Retries"},"total_retries":{"type":"integer","title":"Total Retries"},"success_rate":{"type":"number","title":"Success Rate"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["agent_id","retries","total_retries","success_rate","timestamp"],"title":"ActivityRetriesResponse","description":"Response for retries endpoint."},"ActivitySummaryResponse":{"properties":{"window":{"type":"string","title":"Window"},"runs":{"type":"object","title":"Runs"},"attention":{"$ref":"#/components/schemas/app__api__activity__AttentionSummary"},"provenance":{"$ref":"#/components/schemas/Provenance"}},"type":"object","required":["window","runs","attention","provenance"],"title":"ActivitySummaryResponse","description":"Activity summary response (HIL v1).\n\nRules (locked):\n- No adjectives (good, bad, healthy, critical)\n- Counts must reconcile: sum(by_status) == total\n- Reasons must be from registry (fail fast on unknown)\n- Provenance always present"},"AddDependencyRequest":{"properties":{"source_policy":{"type":"string","title":"Source Policy"},"target_policy":{"type":"string","title":"Target Policy"},"dependency_type":{"type":"string","title":"Dependency Type"},"resolution_strategy":{"type":"string","title":"Resolution Strategy","default":"source_wins"},"priority":{"type":"integer","title":"Priority","default":100},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"}},"type":"object","required":["source_policy","target_policy","dependency_type"],"title":"AddDependencyRequest","description":"Request to add a policy dependency with DAG validation."},"AdhocSimulationRequest":{"properties":{"plan":{"items":{"$ref":"#/components/schemas/SimulationStepInput"},"type":"array","maxItems":50,"minItems":1,"title":"Plan","description":"Plan steps"},"budget_cents":{"type":"integer","maximum":1000000.0,"minimum":0.0,"title":"Budget Cents","description":"Budget in cents","default":1000}},"type":"object","required":["plan"],"title":"AdhocSimulationRequest","description":"Request for ad-hoc simulation without saving scenario."},"AnomalyDetectionRequest":{"properties":{"escalate_to_m25":{"type":"boolean","title":"Escalate To M25","description":"Whether to escalate HIGH/CRITICAL anomalies to M25 incident loop","default":true}},"type":"object","title":"AnomalyDetectionRequest","description":"Request to trigger anomaly detection."},"AnomalyDetectionResponse":{"properties":{"detected_count":{"type":"integer","title":"Detected Count"},"escalated_count":{"type":"integer","title":"Escalated Count"},"anomalies":{"items":{"$ref":"#/components/schemas/CostAnomalyResponse"},"type":"array","title":"Anomalies"},"escalated":{"items":{"type":"object"},"type":"array","title":"Escalated","default":[]}},"type":"object","required":["detected_count","escalated_count","anomalies"],"title":"AnomalyDetectionResponse","description":"Response from anomaly detection."},"ApprovalAction":{"properties":{"approver_id":{"type":"string","title":"Approver Id","description":"ID of approver"},"level":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Level","description":"Approval level (1-5)"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Optional notes"}},"type":"object","required":["approver_id","level"],"title":"ApprovalAction","description":"Action to approve or reject a request."},"ApprovalRequestCreate":{"properties":{"policy_type":{"allOf":[{"$ref":"#/components/schemas/PolicyType"}],"description":"Type of policy requiring approval"},"skill_id":{"type":"string","title":"Skill Id","description":"Skill requiring approval"},"tenant_id":{"type":"string","title":"Tenant Id","description":"Tenant context"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id","description":"Agent context"},"payload":{"type":"object","title":"Payload","description":"Execution payload"},"requested_by":{"type":"string","title":"Requested By","description":"Requester ID"},"justification":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Justification","description":"Why approval is needed"},"webhook_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Webhook Url","description":"Webhook for async callback"},"webhook_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Webhook Secret","description":"Secret for webhook HMAC"},"expires_in_seconds":{"type":"integer","title":"Expires In Seconds","description":"Expiration time","default":300}},"type":"object","required":["policy_type","skill_id","tenant_id","requested_by"],"title":"ApprovalRequestCreate","description":"Request to create an approval request."},"ApprovalRequestResponse":{"properties":{"request_id":{"type":"string","title":"Request Id"},"status":{"$ref":"#/components/schemas/ApprovalStatus"},"required_level":{"type":"integer","title":"Required Level"},"escalate_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Escalate To"},"expires_at":{"type":"string","title":"Expires At"},"created_at":{"type":"string","title":"Created At"}},"type":"object","required":["request_id","status","required_level","escalate_to","expires_at","created_at"],"title":"ApprovalRequestResponse","description":"Response when creating an approval request."},"ApprovalResponse":{"properties":{"proposal_id":{"type":"string","title":"Proposal Id"},"status":{"type":"string","title":"Status"},"reviewed_by":{"type":"string","title":"Reviewed By"},"reviewed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reviewed At"},"message":{"type":"string","title":"Message"}},"type":"object","required":["proposal_id","status","reviewed_by","reviewed_at","message"],"title":"ApprovalResponse","description":"Response for approve/reject actions."},"ApprovalStatus":{"type":"string","enum":["pending","approved","rejected","escalated","expired","auto_approved"],"title":"ApprovalStatus","description":"Status of an approval request."},"ApprovalStatusResponse":{"properties":{"request_id":{"type":"string","title":"Request Id"},"correlation_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Correlation Id","description":"Idempotency key for webhook deduplication"},"status":{"$ref":"#/components/schemas/ApprovalStatus"},"status_history":{"items":{"type":"object"},"type":"array","title":"Status History","description":"Audit trail of status transitions"},"policy_type":{"$ref":"#/components/schemas/PolicyType"},"skill_id":{"type":"string","title":"Skill Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"payload":{"type":"object","title":"Payload"},"requested_by":{"type":"string","title":"Requested By"},"justification":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Justification"},"required_level":{"type":"integer","title":"Required Level"},"current_level":{"type":"integer","title":"Current Level"},"approvers":{"items":{"type":"object"},"type":"array","title":"Approvers"},"escalate_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Escalate To"},"webhook_attempts":{"type":"integer","title":"Webhook Attempts","description":"Number of webhook delivery attempts","default":0},"last_webhook_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Webhook Status","description":"Last webhook delivery status"},"expires_at":{"type":"string","title":"Expires At"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"}},"type":"object","required":["request_id","status","policy_type","skill_id","tenant_id","agent_id","payload","requested_by","justification","required_level","current_level","approvers","escalate_to","expires_at","created_at","updated_at"],"title":"ApprovalStatusResponse","description":"Full status of an approval request."},"ApproveRejectRequest":{"properties":{"reviewed_by":{"type":"string","title":"Reviewed By"},"review_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Review Notes"}},"type":"object","required":["reviewed_by"],"title":"ApproveRejectRequest","description":"Request body for approve/reject actions."},"ApproveRequest":{"properties":{"candidate_id":{"type":"integer","title":"Candidate Id","description":"ID of candidate to approve"},"approved_by":{"type":"string","title":"Approved By","description":"User making the decision"},"decision":{"type":"string","pattern":"^(approved|rejected)$","title":"Decision","description":"Decision: 'approved' or 'rejected'"},"note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Note","description":"Optional review note","default":""}},"type":"object","required":["candidate_id","approved_by","decision"],"title":"ApproveRequest","description":"Request to approve/reject a recovery candidate."},"AuditEntry":{"properties":{"id":{"type":"integer","title":"Id"},"ts":{"type":"string","format":"date-time","title":"Ts"},"subject":{"type":"string","title":"Subject"},"resource":{"type":"string","title":"Resource"},"action":{"type":"string","title":"Action"},"allowed":{"type":"boolean","title":"Allowed"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"roles":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Roles"},"path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Path"},"method":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Method"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"},"latency_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Latency Ms"}},"type":"object","required":["id","ts","subject","resource","action","allowed","reason","roles","path","method","tenant_id","latency_ms"],"title":"AuditEntry","description":"Single audit log entry."},"AuditLedgerDetailItem":{"properties":{"id":{"type":"string","title":"Id"},"event_type":{"type":"string","title":"Event Type"},"entity_type":{"type":"string","title":"Entity Type"},"entity_id":{"type":"string","title":"Entity Id"},"actor_type":{"type":"string","title":"Actor Type"},"actor_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Actor Id"},"action_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action Reason"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"before_state":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Before State"},"after_state":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"After State"}},"type":"object","required":["id","event_type","entity_type","entity_id","actor_type","actor_id","action_reason","created_at"],"title":"AuditLedgerDetailItem","description":"Audit ledger entry with state snapshots (O3)."},"AuditLedgerItem":{"properties":{"id":{"type":"string","title":"Id"},"event_type":{"type":"string","title":"Event Type"},"entity_type":{"type":"string","title":"Entity Type"},"entity_id":{"type":"string","title":"Entity Id"},"actor_type":{"type":"string","title":"Actor Type"},"actor_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Actor Id"},"action_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action Reason"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","event_type","entity_type","entity_id","actor_type","actor_id","action_reason","created_at"],"title":"AuditLedgerItem","description":"Single audit ledger entry (O2)."},"AuditLedgerResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/AuditLedgerItem"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["items","total","has_more"],"title":"AuditLedgerResponse","description":"Response envelope for audit ledger."},"AuditResponse":{"properties":{"entries":{"items":{"$ref":"#/components/schemas/AuditEntry"},"type":"array","title":"Entries"},"total":{"type":"integer","title":"Total"},"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"}},"type":"object","required":["entries","total","limit","offset"],"title":"AuditResponse","description":"Audit log query response."},"AutoExecuteReviewItemDTO":{"properties":{"invocation_id":{"type":"string","title":"Invocation Id","description":"Unique invocation ID from envelope"},"envelope_id":{"type":"string","title":"Envelope Id","description":"Execution envelope ID"},"timestamp":{"type":"string","title":"Timestamp","description":"ISO8601 timestamp of decision"},"tenant_id":{"type":"string","title":"Tenant Id","description":"Tenant ID from envelope"},"account_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Account Id","description":"Account ID if available"},"project_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Project Id","description":"Project ID if available"},"capability_id":{"const":"SUB-019","title":"Capability Id","description":"Always SUB-019","default":"SUB-019"},"execution_vector":{"const":"AUTO_EXEC","title":"Execution Vector","description":"Always AUTO_EXEC","default":"AUTO_EXEC"},"confidence_score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Confidence Score","description":"Confidence score from envelope"},"threshold":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Threshold","description":"Threshold used for decision"},"decision":{"type":"string","enum":["EXECUTED","SKIPPED"],"title":"Decision","description":"Whether auto-execute triggered"},"recovery_action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recovery Action","description":"Action taken (if executed)"},"recovery_candidate_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recovery Candidate Id","description":"Recovery candidate ID"},"incident_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Incident Id","description":"Related incident ID if known"},"execution_result":{"anyOf":[{"type":"string","enum":["SUCCESS","FAILED","PENDING","UNKNOWN"]},{"type":"null"}],"title":"Execution Result","description":"Result of execution if completed"},"input_hash":{"type":"string","title":"Input Hash","description":"Hash of input from envelope"},"plan_hash":{"type":"string","title":"Plan Hash","description":"Hash of resolved plan from envelope"},"plan_mutation_detected":{"type":"boolean","title":"Plan Mutation Detected","description":"Whether plan was mutated","default":false},"worker_identity":{"type":"string","title":"Worker Identity","description":"Worker identity from envelope","default":"recovery_claim_worker"},"safety_checked":{"type":"boolean","title":"Safety Checked","description":"Whether safety checks ran","default":false},"safety_passed":{"type":"boolean","title":"Safety Passed","description":"Whether safety checks passed","default":true},"safety_flags":{"items":{"type":"string"},"type":"array","title":"Safety Flags","description":"Safety flag values"},"safety_warnings":{"items":{"type":"string"},"type":"array","title":"Safety Warnings","description":"Safety warning messages"}},"type":"object","required":["invocation_id","envelope_id","timestamp","tenant_id","confidence_score","threshold","decision","input_hash","plan_hash"],"title":"AutoExecuteReviewItemDTO","description":"Single AUTO_EXECUTE decision evidence record.\n\nPIN-333: Evidence-only, no control, no behavior change.\n\nMaps 1:1 to ExecutionEnvelope (SUB-019) + InvocationSafetyFlags.\nNo derived fields. No computed judgments. No inferred risk scores.\n\nFrozen: 2026-01-06 (PIN-333)","example":{"capability_id":"SUB-019","confidence_score":0.92,"decision":"EXECUTED","envelope_id":"env_001","execution_result":"SUCCESS","execution_vector":"AUTO_EXEC","incident_id":"inc_456","input_hash":"a1b2c3d4...","invocation_id":"abc123-def456-ghi789","plan_hash":"e5f6g7h8...","plan_mutation_detected":false,"recovery_action":"retry_with_backoff","recovery_candidate_id":"rc_123","safety_checked":true,"safety_flags":[],"safety_passed":true,"safety_warnings":[],"tenant_id":"tenant_xyz","threshold":0.8,"timestamp":"2026-01-06T10:30:00Z","worker_identity":"recovery_claim_worker"}},"AutoExecuteReviewListDTO":{"properties":{"items":{"items":{"$ref":"#/components/schemas/AutoExecuteReviewItemDTO"},"type":"array","title":"Items","description":"List of AUTO_EXECUTE decisions"},"total_count":{"type":"integer","minimum":0.0,"title":"Total Count","description":"Total matching items"},"page":{"type":"integer","minimum":1.0,"title":"Page","description":"Current page","default":1},"page_size":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Page Size","description":"Items per page","default":50},"executed_count":{"type":"integer","minimum":0.0,"title":"Executed Count","description":"Count of EXECUTED decisions in result set"},"skipped_count":{"type":"integer","minimum":0.0,"title":"Skipped Count","description":"Count of SKIPPED decisions in result set"},"flagged_count":{"type":"integer","minimum":0.0,"title":"Flagged Count","description":"Count of decisions with safety flags"}},"type":"object","required":["items","total_count","executed_count","skipped_count","flagged_count"],"title":"AutoExecuteReviewListDTO","description":"List of AUTO_EXECUTE decisions for founder review.\n\nPIN-333: Evidence-only, read-only."},"AutoExecuteReviewStatsDTO":{"properties":{"start_time":{"type":"string","title":"Start Time","description":"ISO8601 start of aggregation window"},"end_time":{"type":"string","title":"End Time","description":"ISO8601 end of aggregation window"},"total_decisions":{"type":"integer","minimum":0.0,"title":"Total Decisions","description":"Total AUTO_EXECUTE decisions in window"},"executed_count":{"type":"integer","minimum":0.0,"title":"Executed Count","description":"Decisions where execution triggered"},"skipped_count":{"type":"integer","minimum":0.0,"title":"Skipped Count","description":"Decisions where execution was skipped"},"confidence_distribution":{"additionalProperties":{"type":"integer"},"type":"object","title":"Confidence Distribution","description":"Confidence score buckets (0.0-0.5, 0.5-0.6, ..., 0.9-1.0)"},"flagged_count":{"type":"integer","minimum":0.0,"title":"Flagged Count","description":"Decisions with at least one safety flag"},"flag_counts":{"additionalProperties":{"type":"integer"},"type":"object","title":"Flag Counts","description":"Count per safety flag type"},"daily_counts":{"items":{"type":"object"},"type":"array","title":"Daily Counts","description":"Daily counts for trend chart"}},"type":"object","required":["start_time","end_time","total_decisions","executed_count","skipped_count","confidence_distribution","flagged_count"],"title":"AutoExecuteReviewStatsDTO","description":"Aggregate statistics for AUTO_EXECUTE review charts.\n\nPIN-333: Charts reflect stored evidence only. No predictive analytics.","example":{"confidence_distribution":{"0.8-0.85":25,"0.85-0.9":45,"0.9-0.95":35,"0.95-1.0":15},"daily_counts":[{"date":"2025-12-30","executed":18,"skipped":4},{"date":"2025-12-31","executed":15,"skipped":5}],"end_time":"2026-01-06T00:00:00Z","executed_count":120,"flag_counts":{"ownership_violation":3,"rate_threshold_exceeded":5},"flagged_count":8,"skipped_count":30,"start_time":"2025-12-30T00:00:00Z","total_decisions":150}},"BlackboardIncrementRequest":{"properties":{"amount":{"type":"integer","title":"Amount","description":"Increment amount","default":1}},"type":"object","title":"BlackboardIncrementRequest","description":"Request to increment counter."},"BlackboardWriteRequest":{"properties":{"value":{"title":"Value","description":"Value to store"},"ttl":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Ttl","description":"TTL in seconds"}},"type":"object","required":["value"],"title":"BlackboardWriteRequest","description":"Request to write to blackboard."},"BlockerEntry":{"properties":{"type":{"type":"string","title":"Type"},"message":{"type":"string","title":"Message"},"since":{"type":"string","title":"Since"},"action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action"},"details":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Details"}},"type":"object","required":["type","message","since"],"title":"BlockerEntry","description":"Single blocker entry."},"BrandRequest":{"properties":{"company_name":{"type":"string","minLength":1,"title":"Company Name","description":"Company name"},"tagline":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tagline"},"mission":{"type":"string","minLength":10,"title":"Mission","description":"Mission statement"},"vision":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vision"},"value_proposition":{"type":"string","minLength":20,"title":"Value Proposition","description":"Value proposition"},"target_audience":{"items":{"type":"string"},"type":"array","title":"Target Audience"},"audience_pain_points":{"items":{"type":"string"},"type":"array","title":"Audience Pain Points"},"tone":{"$ref":"#/components/schemas/ToneRuleRequest"},"voice_attributes":{"items":{"type":"string"},"type":"array","title":"Voice Attributes"},"forbidden_claims":{"items":{"$ref":"#/components/schemas/ForbiddenClaimRequest"},"type":"array","title":"Forbidden Claims"},"required_disclosures":{"items":{"type":"string"},"type":"array","title":"Required Disclosures"},"visual":{"$ref":"#/components/schemas/VisualIdentityRequest"},"budget_tokens":{"anyOf":[{"type":"integer","maximum":1000000.0,"minimum":1000.0},{"type":"null"}],"title":"Budget Tokens"}},"type":"object","required":["company_name","mission","value_proposition"],"title":"BrandRequest","description":"Brand schema for worker execution."},"BrandValidationResponse":{"properties":{"valid":{"type":"boolean","title":"Valid"},"errors":{"items":{"type":"string"},"type":"array","title":"Errors"},"warnings":{"items":{"type":"string"},"type":"array","title":"Warnings"},"policy_rules_generated":{"type":"integer","title":"Policy Rules Generated","default":0},"drift_anchors_count":{"type":"integer","title":"Drift Anchors Count","default":0}},"type":"object","required":["valid"],"title":"BrandValidationResponse","description":"Response from brand validation."},"BudgetCreate":{"properties":{"budget_type":{"type":"string","title":"Budget Type","description":"'tenant', 'feature', or 'user'"},"entity_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Entity Id","description":"Feature tag or user ID"},"daily_limit_cents":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Daily Limit Cents"},"monthly_limit_cents":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Monthly Limit Cents"},"warn_threshold_pct":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Warn Threshold Pct","default":80},"hard_limit_enabled":{"type":"boolean","title":"Hard Limit Enabled","default":false}},"type":"object","required":["budget_type"],"title":"BudgetCreate","description":"Create or update a budget."},"BudgetDeclaration":{"properties":{"mode":{"type":"string","title":"Mode"},"description":{"type":"string","title":"Description"},"limit_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Limit Cents"}},"type":"object","required":["mode","description"],"title":"BudgetDeclaration","description":"Budget enforcement mode."},"BudgetResponse":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"budget_type":{"type":"string","title":"Budget Type"},"entity_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Entity Id"},"daily_limit_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Daily Limit Cents"},"monthly_limit_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Monthly Limit Cents"},"warn_threshold_pct":{"type":"integer","title":"Warn Threshold Pct"},"hard_limit_enabled":{"type":"boolean","title":"Hard Limit Enabled"},"is_active":{"type":"boolean","title":"Is Active"},"current_daily_spend_cents":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Current Daily Spend Cents"},"current_monthly_spend_cents":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Current Monthly Spend Cents"}},"type":"object","required":["id","tenant_id","budget_type","entity_id","daily_limit_cents","monthly_limit_cents","warn_threshold_pct","hard_limit_enabled","is_active","current_daily_spend_cents","current_monthly_spend_cents"],"title":"BudgetResponse","description":"Budget response."},"CARERoutingInfo":{"properties":{"routed":{"type":"boolean","title":"Routed","default":false},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"success_metric":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Success Metric"},"orchestrator_mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Orchestrator Mode"},"risk_policy":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Risk Policy"},"confidence_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Confidence Score"},"fallback_agents":{"items":{"type":"string"},"type":"array","title":"Fallback Agents","default":[]},"stages_passed":{"type":"integer","title":"Stages Passed","default":0},"degraded":{"type":"boolean","title":"Degraded","default":false},"degraded_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Degraded Reason"}},"type":"object","title":"CARERoutingInfo","description":"M17 CARE routing information for decision timeline."},"CanaryRunResponse":{"properties":{"run_id":{"type":"string","title":"Run Id"},"status":{"type":"string","title":"Status"},"passed":{"type":"boolean","title":"Passed"},"total_samples":{"type":"integer","title":"Total Samples"},"matching_samples":{"type":"integer","title":"Matching Samples"},"kl_divergence":{"type":"number","title":"Kl Divergence"},"failure_reasons":{"items":{"type":"string"},"type":"array","title":"Failure Reasons"},"artifact_paths":{"items":{"type":"string"},"type":"array","title":"Artifact Paths"}},"type":"object","required":["run_id","status","passed","total_samples","matching_samples","kl_divergence","failure_reasons","artifact_paths"],"title":"CanaryRunResponse","description":"Canary run response."},"CandidateDetailResponse":{"properties":{"id":{"type":"integer","title":"Id"},"failure_match_id":{"type":"string","title":"Failure Match Id"},"suggestion":{"type":"string","title":"Suggestion"},"confidence":{"type":"number","title":"Confidence"},"explain":{"type":"object","title":"Explain"},"decision":{"type":"string","title":"Decision"},"occurrence_count":{"type":"integer","title":"Occurrence Count"},"last_occurrence_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Occurrence At"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"approved_by_human":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Approved By Human"},"approved_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Approved At"},"review_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Review Note"},"error_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Code"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"},"selected_action":{"anyOf":[{"$ref":"#/components/schemas/ActionResponse"},{"type":"null"}]},"inputs":{"items":{"type":"object"},"type":"array","title":"Inputs"},"provenance":{"items":{"type":"object"},"type":"array","title":"Provenance"},"rules_evaluated":{"items":{"type":"object"},"type":"array","title":"Rules Evaluated"},"execution_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Execution Status"},"executed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Executed At"},"execution_result":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Execution Result"}},"type":"object","required":["id","failure_match_id","suggestion","confidence","explain","decision","occurrence_count","last_occurrence_at","created_at","approved_by_human","approved_at","review_note","error_code","source"],"title":"CandidateDetailResponse","description":"Detailed candidate response with provenance and inputs."},"CandidateListResponse":{"properties":{"candidates":{"items":{"$ref":"#/components/schemas/CandidateResponse"},"type":"array","title":"Candidates"},"total":{"type":"integer","title":"Total"},"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"}},"type":"object","required":["candidates","total","limit","offset"],"title":"CandidateListResponse","description":"Response for candidates list endpoint."},"CandidateResponse":{"properties":{"id":{"type":"integer","title":"Id"},"failure_match_id":{"type":"string","title":"Failure Match Id"},"suggestion":{"type":"string","title":"Suggestion"},"confidence":{"type":"number","title":"Confidence"},"explain":{"type":"object","title":"Explain"},"decision":{"type":"string","title":"Decision"},"occurrence_count":{"type":"integer","title":"Occurrence Count"},"last_occurrence_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Occurrence At"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"approved_by_human":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Approved By Human"},"approved_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Approved At"},"review_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Review Note"},"error_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Code"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"}},"type":"object","required":["id","failure_match_id","suggestion","confidence","explain","decision","occurrence_count","last_occurrence_at","created_at","approved_by_human","approved_at","review_note","error_code","source"],"title":"CandidateResponse","description":"Recovery candidate details."},"CandidateUpdateRequest":{"properties":{"execution_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Execution Status","description":"Execution status: pending, executing, succeeded, failed, rolled_back, skipped"},"selected_action_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Selected Action Id","description":"ID of selected action from action catalog"},"execution_result":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Execution Result","description":"Result of action execution"},"note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Note","description":"Update note"}},"type":"object","title":"CandidateUpdateRequest","description":"Request to update a candidate."},"CapabilitiesResponse":{"properties":{"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"skills":{"additionalProperties":{"type":"object"},"type":"object","title":"Skills"},"budget":{"type":"object","title":"Budget"},"rate_limits":{"additionalProperties":{"type":"object"},"type":"object","title":"Rate Limits"},"permissions":{"items":{"type":"string"},"type":"array","title":"Permissions"}},"type":"object","required":["agent_id","skills","budget","rate_limits","permissions"],"title":"CapabilitiesResponse","description":"Response with agent capabilities."},"CapabilityStatus":{"properties":{"unlocked":{"items":{"type":"string"},"type":"array","title":"Unlocked"},"blocked":{"items":{"type":"string"},"type":"array","title":"Blocked"}},"type":"object","required":["unlocked","blocked"],"title":"CapabilityStatus","description":"Status of a capability gate."},"CascadeEvaluateRequest":{"properties":{"task_description":{"type":"string","minLength":1,"title":"Task Description","description":"Task to evaluate"},"task_domain":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task Domain","description":"Target domain"},"required_tools":{"items":{"type":"string"},"type":"array","title":"Required Tools","description":"Required tools"},"difficulty":{"type":"string","title":"Difficulty","description":"Task difficulty: low, medium, high","default":"medium"},"risk_tolerance":{"type":"string","title":"Risk Tolerance","description":"Risk tolerance: strict, balanced, fast","default":"balanced"},"prefer_metric":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Prefer Metric","description":"Preferred success metric"},"agent_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Agent Ids","description":"Specific agents to evaluate"}},"type":"object","required":["task_description"],"title":"CascadeEvaluateRequest","description":"Request for cascade evaluation."},"ChatCompletionChoice":{"properties":{"index":{"type":"integer","title":"Index"},"message":{"$ref":"#/components/schemas/ChatMessage"},"finish_reason":{"type":"string","title":"Finish Reason"}},"type":"object","required":["index","message","finish_reason"],"title":"ChatCompletionChoice"},"ChatCompletionRequest":{"properties":{"model":{"type":"string","title":"Model","default":"gpt-4o-mini"},"messages":{"items":{"$ref":"#/components/schemas/ChatMessage"},"type":"array","title":"Messages"},"temperature":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Temperature","default":1.0},"top_p":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Top P","default":1.0},"n":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"N","default":1},"stream":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Stream","default":false},"stop":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Stop"},"max_tokens":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Tokens","default":4096},"presence_penalty":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Presence Penalty","default":0},"frequency_penalty":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Frequency Penalty","default":0},"user":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User"},"seed":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Seed"}},"type":"object","required":["messages"],"title":"ChatCompletionRequest"},"ChatCompletionResponse":{"properties":{"id":{"type":"string","title":"Id"},"object":{"type":"string","title":"Object","default":"chat.completion"},"created":{"type":"integer","title":"Created"},"model":{"type":"string","title":"Model"},"choices":{"items":{"$ref":"#/components/schemas/ChatCompletionChoice"},"type":"array","title":"Choices"},"usage":{"$ref":"#/components/schemas/Usage"}},"type":"object","required":["id","created","model","choices","usage"],"title":"ChatCompletionResponse"},"ChatMessage":{"properties":{"role":{"type":"string","title":"Role"},"content":{"type":"string","title":"Content"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"}},"type":"object","required":["role","content"],"title":"ChatMessage"},"CheckpointResponse":{"properties":{"checkpoint_id":{"type":"string","title":"Checkpoint Id"},"checkpoint_type":{"type":"string","title":"Checkpoint Type"},"incident_id":{"type":"string","title":"Incident Id"},"stage":{"type":"string","title":"Stage"},"target_id":{"type":"string","title":"Target Id"},"description":{"type":"string","title":"Description"},"options":{"items":{"type":"string"},"type":"array","title":"Options"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"is_pending":{"type":"boolean","title":"Is Pending"},"resolved_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Resolved At"},"resolved_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolved By"},"resolution":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolution"}},"type":"object","required":["checkpoint_id","checkpoint_type","incident_id","stage","target_id","description","options","created_at","is_pending"],"title":"CheckpointResponse","description":"Response for human checkpoint."},"ClaimItemResponse":{"properties":{"claimed":{"type":"boolean","title":"Claimed"},"item_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Item Id"},"item_index":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Item Index"},"input":{"anyOf":[{},{"type":"null"}],"title":"Input"},"retry_count":{"type":"integer","title":"Retry Count","default":0}},"type":"object","required":["claimed"],"title":"ClaimItemResponse","description":"Response when claiming an item."},"ComparisonResponse":{"properties":{"verdict":{"type":"string","title":"Verdict"},"v1_cost_cents":{"type":"integer","title":"V1 Cost Cents"},"v2_cost_cents":{"type":"integer","title":"V2 Cost Cents"},"cost_delta_cents":{"type":"integer","title":"Cost Delta Cents"},"cost_delta_pct":{"type":"number","title":"Cost Delta Pct"},"drift_score":{"type":"number","title":"Drift Score"},"feasibility_match":{"type":"boolean","title":"Feasibility Match"}},"type":"object","required":["verdict","v1_cost_cents","v2_cost_cents","cost_delta_cents","cost_delta_pct","drift_score","feasibility_match"],"title":"ComparisonResponse","description":"Comparison between V1 and V2."},"CompleteItemRequest":{"properties":{"output":{"title":"Output","description":"Item result"}},"type":"object","required":["output"],"title":"CompleteItemRequest","description":"Request to complete an item."},"ContextAwareEvaluateRequest":{"properties":{"action_type":{"$ref":"#/components/schemas/ActionType"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"agent_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Type"},"agent_capabilities":{"items":{"type":"string"},"type":"array","title":"Agent Capabilities"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"},"customer_tier":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Tier"},"action_chain_depth":{"type":"integer","title":"Action Chain Depth","default":0},"action_chain_ids":{"items":{"type":"string"},"type":"array","title":"Action Chain Ids"},"origin_trigger":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Origin Trigger"},"proposed_action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Proposed Action"},"target_resource":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Target Resource"},"estimated_cost":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Cost"},"data_categories":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Data Categories"},"context":{"type":"object","title":"Context"}},"type":"object","required":["action_type"],"title":"ContextAwareEvaluateRequest","description":"Request for context-aware policy evaluation (GAP 4)."},"CooldownInfo":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"rule_name":{"type":"string","title":"Rule Name"},"started_at":{"type":"string","format":"date-time","title":"Started At"},"expires_at":{"type":"string","format":"date-time","title":"Expires At"},"remaining_seconds":{"type":"number","title":"Remaining Seconds"}},"type":"object","required":["agent_id","rule_name","started_at","expires_at","remaining_seconds"],"title":"CooldownInfo","description":"Information about an active cooldown."},"CostActuals":{"properties":{"llm_run_cost":{"type":"number","title":"Llm Run Cost"}},"type":"object","required":["llm_run_cost"],"title":"CostActuals","description":"Actual costs incurred."},"CostAnomaliesEnvelope":{"properties":{"data":{"items":{"$ref":"#/components/schemas/CostAnomalyResponse"},"type":"array","title":"Data"},"provenance":{"$ref":"#/components/schemas/app__api__cost_intelligence__AnalyticsProvenance"}},"type":"object","required":["data","provenance"],"title":"CostAnomaliesEnvelope","description":"Envelope response for cost anomalies with provenance."},"CostAnomalyResponse":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"anomaly_type":{"type":"string","title":"Anomaly Type"},"severity":{"type":"string","title":"Severity"},"entity_type":{"type":"string","title":"Entity Type"},"entity_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Entity Id"},"current_value_cents":{"type":"number","title":"Current Value Cents"},"expected_value_cents":{"type":"number","title":"Expected Value Cents"},"deviation_pct":{"type":"number","title":"Deviation Pct"},"message":{"type":"string","title":"Message"},"incident_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Incident Id"},"action_taken":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action Taken"},"resolved":{"type":"boolean","title":"Resolved"},"detected_at":{"type":"string","format":"date-time","title":"Detected At"}},"type":"object","required":["id","tenant_id","anomaly_type","severity","entity_type","entity_id","current_value_cents","expected_value_cents","deviation_pct","message","incident_id","action_taken","resolved","detected_at"],"title":"CostAnomalyResponse","description":"Cost anomaly response."},"CostBreakdownItemDTO":{"properties":{"name":{"type":"string","title":"Name","description":"Feature tag, model name, or user ID"},"display_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Display Name","description":"Human-readable name"},"spend_cents":{"type":"integer","minimum":0.0,"title":"Spend Cents"},"request_count":{"type":"integer","minimum":0.0,"title":"Request Count"},"pct_of_total":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Pct Of Total"},"trend":{"type":"string","enum":["normal","rising","spike"],"title":"Trend"}},"type":"object","required":["name","spend_cents","request_count","pct_of_total","trend"],"title":"CostBreakdownItemDTO","description":"Individual cost breakdown item."},"CostByFeature":{"properties":{"feature_tag":{"type":"string","title":"Feature Tag"},"display_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Display Name"},"total_cost_cents":{"type":"number","title":"Total Cost Cents"},"request_count":{"type":"integer","title":"Request Count"},"pct_of_total":{"type":"number","title":"Pct Of Total"},"budget_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Budget Cents"},"budget_used_pct":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Budget Used Pct"}},"type":"object","required":["feature_tag","display_name","total_cost_cents","request_count","pct_of_total","budget_cents","budget_used_pct"],"title":"CostByFeature","description":"Cost breakdown by feature."},"CostByFeatureDTO":{"properties":{"feature_tag":{"type":"string","title":"Feature Tag"},"display_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Display Name"},"spend_cents":{"type":"integer","minimum":0.0,"title":"Spend Cents"},"request_count":{"type":"integer","minimum":0.0,"title":"Request Count"},"pct_of_total":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Pct Of Total"},"trend":{"type":"string","enum":["increasing","stable","decreasing"],"title":"Trend"}},"type":"object","required":["feature_tag","spend_cents","request_count","pct_of_total","trend"],"title":"CostByFeatureDTO","description":"Cost attribution by feature."},"CostByFeatureEnvelope":{"properties":{"data":{"items":{"$ref":"#/components/schemas/CostByFeature"},"type":"array","title":"Data"},"provenance":{"$ref":"#/components/schemas/app__api__cost_intelligence__AnalyticsProvenance"}},"type":"object","required":["data","provenance"],"title":"CostByFeatureEnvelope","description":"Envelope response for cost by feature with provenance."},"CostByModel":{"properties":{"model":{"type":"string","title":"Model"},"total_cost_cents":{"type":"number","title":"Total Cost Cents"},"total_input_tokens":{"type":"integer","title":"Total Input Tokens"},"total_output_tokens":{"type":"integer","title":"Total Output Tokens"},"request_count":{"type":"integer","title":"Request Count"},"pct_of_total":{"type":"number","title":"Pct Of Total"}},"type":"object","required":["model","total_cost_cents","total_input_tokens","total_output_tokens","request_count","pct_of_total"],"title":"CostByModel","description":"Cost breakdown by model."},"CostByModelDTO":{"properties":{"model":{"type":"string","title":"Model"},"spend_cents":{"type":"integer","minimum":0.0,"title":"Spend Cents"},"input_tokens":{"type":"integer","minimum":0.0,"title":"Input Tokens"},"output_tokens":{"type":"integer","minimum":0.0,"title":"Output Tokens"},"request_count":{"type":"integer","minimum":0.0,"title":"Request Count"},"pct_of_total":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Pct Of Total"}},"type":"object","required":["model","spend_cents","input_tokens","output_tokens","request_count","pct_of_total"],"title":"CostByModelDTO","description":"Cost attribution by LLM model."},"CostByModelEnvelope":{"properties":{"data":{"items":{"$ref":"#/components/schemas/CostByModel"},"type":"array","title":"Data"},"provenance":{"$ref":"#/components/schemas/app__api__cost_intelligence__AnalyticsProvenance"}},"type":"object","required":["data","provenance"],"title":"CostByModelEnvelope","description":"Envelope response for cost by model with provenance."},"CostByUser":{"properties":{"user_id":{"type":"string","title":"User Id"},"total_cost_cents":{"type":"number","title":"Total Cost Cents"},"request_count":{"type":"integer","title":"Request Count"},"pct_of_total":{"type":"number","title":"Pct Of Total"},"is_anomaly":{"type":"boolean","title":"Is Anomaly"},"anomaly_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Anomaly Message"}},"type":"object","required":["user_id","total_cost_cents","request_count","pct_of_total","is_anomaly","anomaly_message"],"title":"CostByUser","description":"Cost breakdown by user."},"CostByUserDTO":{"properties":{"user_id":{"type":"string","title":"User Id"},"spend_cents":{"type":"integer","minimum":0.0,"title":"Spend Cents"},"request_count":{"type":"integer","minimum":0.0,"title":"Request Count"},"pct_of_total":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Pct Of Total"},"is_anomalous":{"type":"boolean","title":"Is Anomalous","description":"True if user has active anomaly"}},"type":"object","required":["user_id","spend_cents","request_count","pct_of_total","is_anomalous"],"title":"CostByUserDTO","description":"Cost attribution by user (top N)."},"CostByUserEnvelope":{"properties":{"data":{"items":{"$ref":"#/components/schemas/CostByUser"},"type":"array","title":"Data"},"provenance":{"$ref":"#/components/schemas/app__api__cost_intelligence__AnalyticsProvenance"}},"type":"object","required":["data","provenance"],"title":"CostByUserEnvelope","description":"Envelope response for cost by user with provenance."},"CostDailyBreakdownDTO":{"properties":{"date":{"type":"string","title":"Date","description":"ISO8601 date (YYYY-MM-DD)"},"spend_cents":{"type":"integer","minimum":0.0,"title":"Spend Cents"},"request_count":{"type":"integer","minimum":0.0,"title":"Request Count"},"avg_cost_per_request_cents":{"type":"number","minimum":0.0,"title":"Avg Cost Per Request Cents"}},"type":"object","required":["date","spend_cents","request_count","avg_cost_per_request_cents"],"title":"CostDailyBreakdownDTO","description":"Daily cost data point."},"CostDashboard":{"properties":{"summary":{"$ref":"#/components/schemas/CostSummary"},"by_feature":{"items":{"$ref":"#/components/schemas/CostByFeature"},"type":"array","title":"By Feature"},"by_user":{"items":{"$ref":"#/components/schemas/CostByUser"},"type":"array","title":"By User"},"by_model":{"items":{"$ref":"#/components/schemas/CostByModel"},"type":"array","title":"By Model"},"anomalies":{"items":{"$ref":"#/components/schemas/CostAnomalyResponse"},"type":"array","title":"Anomalies"},"projection":{"$ref":"#/components/schemas/CostProjection"}},"type":"object","required":["summary","by_feature","by_user","by_model","anomalies","projection"],"title":"CostDashboard","description":"Complete cost dashboard data."},"CostDeclaration":{"properties":{"estimated_cents":{"type":"integer","title":"Estimated Cents"},"minimum_cents":{"type":"integer","title":"Minimum Cents"},"maximum_cents":{"type":"integer","title":"Maximum Cents"},"budget_remaining_cents":{"type":"integer","title":"Budget Remaining Cents"}},"type":"object","required":["estimated_cents","minimum_cents","maximum_cents","budget_remaining_cents"],"title":"CostDeclaration","description":"Cost expectations before execution."},"CostIntelligenceResponse":{"properties":{"currency":{"type":"string","title":"Currency"},"period":{"$ref":"#/components/schemas/CostPeriod"},"actuals":{"$ref":"#/components/schemas/CostActuals"},"limits":{"items":{"$ref":"#/components/schemas/LimitCostItem"},"type":"array","title":"Limits"},"violations":{"$ref":"#/components/schemas/CostViolations"}},"type":"object","required":["currency","period","actuals","limits","violations"],"title":"CostIntelligenceResponse","description":"Response envelope for cost intelligence (O2).\n\nCost Intelligence v2 may include policy-prevented cost attribution\nonce enforcement  cost mapping is deterministic."},"CostPeriod":{"properties":{"start":{"type":"string","format":"date-time","title":"Start"},"end":{"type":"string","format":"date-time","title":"End"}},"type":"object","required":["start","end"],"title":"CostPeriod","description":"Time period for cost calculation."},"CostProjection":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"lookback_days":{"type":"integer","title":"Lookback Days"},"forecast_days":{"type":"integer","title":"Forecast Days"},"current_daily_avg_cents":{"type":"number","title":"Current Daily Avg Cents"},"projected_total_cents":{"type":"number","title":"Projected Total Cents"},"monthly_projection_cents":{"type":"number","title":"Monthly Projection Cents"},"budget_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Budget Cents"},"days_until_budget_exhausted":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Days Until Budget Exhausted"},"trend":{"type":"string","title":"Trend"}},"type":"object","required":["tenant_id","lookback_days","forecast_days","current_daily_avg_cents","projected_total_cents","monthly_projection_cents","budget_cents","days_until_budget_exhausted","trend"],"title":"CostProjection","description":"Cost projection for upcoming period."},"CostProvenance":{"properties":{"aggregation":{"type":"string","title":"Aggregation","description":"Aggregation type (e.g., 'sum', 'count')"},"data_source":{"type":"string","title":"Data Source","description":"Data source table/entity"},"computed_at":{"type":"string","format":"date-time","title":"Computed At","description":"When the data was computed"},"period_description":{"type":"string","title":"Period Description","description":"Human-readable period description"}},"type":"object","required":["aggregation","data_source","computed_at","period_description"],"title":"CostProvenance","description":"Provenance metadata for cost interpretation panels."},"CostRecordCreate":{"properties":{"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"feature_tag":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Feature Tag"},"request_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Request Id"},"workflow_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Workflow Id"},"skill_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Skill Id"},"model":{"type":"string","title":"Model"},"input_tokens":{"type":"integer","title":"Input Tokens","default":0},"output_tokens":{"type":"integer","title":"Output Tokens","default":0},"cost_cents":{"type":"number","title":"Cost Cents"}},"type":"object","required":["model","cost_cents"],"title":"CostRecordCreate","description":"Record a cost entry."},"CostSummary":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"period_start":{"type":"string","format":"date-time","title":"Period Start"},"period_end":{"type":"string","format":"date-time","title":"Period End"},"total_cost_cents":{"type":"number","title":"Total Cost Cents"},"total_input_tokens":{"type":"integer","title":"Total Input Tokens"},"total_output_tokens":{"type":"integer","title":"Total Output Tokens"},"request_count":{"type":"integer","title":"Request Count"},"budget_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Budget Cents"},"budget_used_pct":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Budget Used Pct"},"days_remaining_at_current_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Days Remaining At Current Rate"},"provenance":{"allOf":[{"$ref":"#/components/schemas/CostProvenance"}],"description":"Provenance metadata for interpretation"}},"type":"object","required":["tenant_id","period_start","period_end","total_cost_cents","total_input_tokens","total_output_tokens","request_count","budget_cents","budget_used_pct","days_remaining_at_current_rate","provenance"],"title":"CostSummary","description":"Cost summary for a period."},"CostViolations":{"properties":{"breach_count":{"type":"integer","title":"Breach Count"},"total_overage":{"type":"number","title":"Total Overage"}},"type":"object","required":["breach_count","total_overage"],"title":"CostViolations","description":"Cost violation summary."},"CreateAgentRequest":{"properties":{"name":{"type":"string","title":"Name"}},"type":"object","required":["name"],"title":"CreateAgentRequest"},"CreateAgentResponse":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"name":{"type":"string","title":"Name"},"status":{"type":"string","title":"Status"},"created_at":{"type":"string","title":"Created At"}},"type":"object","required":["agent_id","name","status","created_at"],"title":"CreateAgentResponse"},"CreateJobRequest":{"properties":{"orchestrator_agent":{"type":"string","title":"Orchestrator Agent","description":"Orchestrator agent type"},"worker_agent":{"type":"string","title":"Worker Agent","description":"Worker agent type"},"task":{"type":"string","title":"Task","description":"Task name/description"},"items":{"items":{},"type":"array","title":"Items","description":"Items to process"},"parallelism":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Parallelism","default":10},"timeout_per_item":{"type":"integer","maximum":3600.0,"minimum":1.0,"title":"Timeout Per Item","default":60},"max_retries":{"type":"integer","maximum":10.0,"minimum":0.0,"title":"Max Retries","default":3}},"type":"object","required":["orchestrator_agent","worker_agent","task","items"],"title":"CreateJobRequest","description":"Request to create a parallel job."},"CreateScopeRequest":{"properties":{"incident_id":{"type":"string","title":"Incident Id","description":"Incident ID to bind scope to"},"action":{"type":"string","title":"Action","description":"Recovery action to allow","example":"retry_agent"},"intent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Intent","description":"Why this action is allowed"},"max_cost_usd":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Max Cost Usd","description":"Maximum cost in USD","default":0.5},"max_attempts":{"type":"integer","maximum":10.0,"minimum":1.0,"title":"Max Attempts","description":"Maximum execution attempts","default":1},"ttl_seconds":{"type":"integer","maximum":3600.0,"minimum":60.0,"title":"Ttl Seconds","description":"Scope validity duration in seconds","default":300},"target_agents":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Target Agents","description":"Target agent IDs"}},"type":"object","required":["incident_id","action"],"title":"CreateScopeRequest","description":"Request to create a bound execution scope."},"CreateScopeResponse":{"properties":{"scope_id":{"type":"string","title":"Scope Id"},"incident_id":{"type":"string","title":"Incident Id"},"allowed_actions":{"items":{"type":"string"},"type":"array","title":"Allowed Actions"},"max_cost_usd":{"type":"number","title":"Max Cost Usd"},"max_attempts":{"type":"integer","title":"Max Attempts"},"expires_at":{"type":"string","title":"Expires At"},"intent":{"type":"string","title":"Intent"},"status":{"type":"string","title":"Status"},"attempts_remaining":{"type":"integer","title":"Attempts Remaining"}},"type":"object","required":["scope_id","incident_id","allowed_actions","max_cost_usd","max_attempts","expires_at","intent","status","attempts_remaining"],"title":"CreateScopeResponse","description":"Response with created execution scope."},"CreateVersionRequest":{"properties":{"description":{"type":"string","title":"Description"},"created_by":{"type":"string","title":"Created By","default":"system"}},"type":"object","required":["description"],"title":"CreateVersionRequest","description":"Request to create a new policy version."},"CrossDomainHighlightsResponse":{"properties":{"pulse":{"$ref":"#/components/schemas/app__runtime_projections__overview__router__SystemPulse"},"domain_counts":{"items":{"$ref":"#/components/schemas/DomainCount"},"type":"array","title":"Domain Counts"},"last_activity_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Activity At"}},"type":"object","required":["pulse","domain_counts","last_activity_at"],"title":"CrossDomainHighlightsResponse","description":"Response envelope for cross-domain highlights (O1)."},"CustomerActivityDetail":{"properties":{"run_id":{"type":"string","title":"Run Id"},"worker_name":{"type":"string","title":"Worker Name"},"task":{"type":"string","maxLength":2000,"title":"Task"},"status":{"type":"string","title":"Status"},"success":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Success"},"error_summary":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Error Summary"},"total_steps":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Steps"},"recoveries":{"type":"integer","title":"Recoveries","default":0},"policy_violations":{"type":"integer","title":"Policy Violations","default":0},"duration_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Ms"},"created_at":{"type":"string","title":"Created At"},"started_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At"}},"type":"object","required":["run_id","worker_name","task","status","created_at"],"title":"CustomerActivityDetail","description":"Customer-safe activity detail."},"CustomerActivityListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/CustomerActivitySummary"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["items","total","limit","offset","has_more"],"title":"CustomerActivityListResponse","description":"Paginated list of customer activities."},"CustomerActivitySummary":{"properties":{"run_id":{"type":"string","title":"Run Id"},"worker_name":{"type":"string","title":"Worker Name"},"task_preview":{"type":"string","maxLength":200,"title":"Task Preview"},"status":{"type":"string","title":"Status"},"success":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Success"},"total_steps":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Steps"},"duration_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Ms"},"created_at":{"type":"string","title":"Created At"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At"}},"type":"object","required":["run_id","worker_name","task_preview","status","created_at"],"title":"CustomerActivitySummary","description":"Customer-safe activity summary for list view."},"CustomerAnomalyHistoryDTO":{"properties":{"id":{"type":"string","title":"Id"},"anomaly_type":{"type":"string","title":"Anomaly Type"},"severity":{"type":"string","enum":["critical","high","medium","low"],"title":"Severity"},"detected_at":{"type":"string","title":"Detected At"},"resolved":{"type":"boolean","title":"Resolved"},"deviation_pct":{"type":"number","title":"Deviation Pct"},"derived_cause":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Derived Cause"},"message":{"type":"string","title":"Message"}},"type":"object","required":["id","anomaly_type","severity","detected_at","resolved","deviation_pct","message"],"title":"CustomerAnomalyHistoryDTO","description":"Recent anomaly for this customer."},"CustomerAtRisk":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"tenant_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Name"},"risk_level":{"type":"string","title":"Risk Level"},"risk_signal_strength":{"type":"number","title":"Risk Signal Strength"},"primary_risk_reason":{"type":"string","title":"Primary Risk Reason"},"secondary_signals":{"items":{"type":"string"},"type":"array","title":"Secondary Signals"},"stickiness_7d":{"type":"number","title":"Stickiness 7D"},"stickiness_30d":{"type":"number","title":"Stickiness 30D"},"stickiness_delta":{"type":"number","title":"Stickiness Delta"},"last_investigation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Investigation"},"days_since_investigation":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Days Since Investigation"},"last_api_call":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Api Call"},"days_since_api_call":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Days Since Api Call"},"friction_events_7d":{"type":"integer","title":"Friction Events 7D","default":0},"friction_weighted_score":{"type":"number","title":"Friction Weighted Score","default":0.0},"top_friction_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Top Friction Type"},"recent_changes":{"items":{"type":"string"},"type":"array","title":"Recent Changes","default":[]},"decay_correlation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Decay Correlation"},"interventions":{"items":{"$ref":"#/components/schemas/FounderIntervention"},"type":"array","title":"Interventions"}},"type":"object","required":["tenant_id","risk_level","risk_signal_strength","primary_risk_reason","secondary_signals","stickiness_7d","stickiness_30d","stickiness_delta","interventions"],"title":"CustomerAtRisk","description":"Phase-2.1: At-risk customer with intervention suggestions.\n\nNAMING CONVENTION (epistemic honesty):\n- risk_signal_strength: Heuristic attention ranking, NOT prediction\n- Only rename to \"risk_score\" after validation with 10-20 real churn events"},"CustomerBudgetConstraint":{"properties":{"limit_cents":{"type":"integer","title":"Limit Cents"},"period":{"type":"string","title":"Period"},"current_usage_cents":{"type":"integer","title":"Current Usage Cents"},"remaining_cents":{"type":"integer","title":"Remaining Cents"},"percentage_used":{"type":"number","title":"Percentage Used"},"reset_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reset At"}},"type":"object","required":["limit_cents","period","current_usage_cents","remaining_cents","percentage_used"],"title":"CustomerBudgetConstraint","description":"Customer-visible budget constraint."},"CustomerCostExplainedDTO":{"properties":{"period":{"type":"string","enum":["today","7d","30d"],"title":"Period"},"period_start":{"type":"string","title":"Period Start","description":"ISO8601"},"period_end":{"type":"string","title":"Period End","description":"ISO8601"},"total_spend_cents":{"type":"integer","minimum":0.0,"title":"Total Spend Cents"},"by_feature":{"items":{"$ref":"#/components/schemas/CostBreakdownItemDTO"},"type":"array","title":"By Feature","description":"Cost by feature tag"},"by_model":{"items":{"$ref":"#/components/schemas/CostBreakdownItemDTO"},"type":"array","title":"By Model","description":"Cost by LLM model"},"by_user":{"items":{"$ref":"#/components/schemas/CostBreakdownItemDTO"},"type":"array","title":"By User","description":"Cost by user (top N)"},"largest_driver_type":{"type":"string","enum":["feature","model","user"],"title":"Largest Driver Type"},"largest_driver_name":{"type":"string","title":"Largest Driver Name"},"largest_driver_pct":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Largest Driver Pct"},"summary":{"type":"string","title":"Summary","description":"One-sentence explanation of where money went"}},"type":"object","required":["period","period_start","period_end","total_spend_cents","by_feature","by_model","by_user","largest_driver_type","largest_driver_name","largest_driver_pct","summary"],"title":"CustomerCostExplainedDTO","description":"GET /guard/costs/explained response.\n\nExplains WHY costs are what they are.\nFrozen: 2025-12-23 (M29 Category 4)\n\nIMPORTANT: Does not expose founder-only fields like churn_risk or affected_tenants.","example":{"by_feature":[{"display_name":"Customer Support Chat","name":"customer_support.chat","pct_of_total":66.7,"request_count":500,"spend_cents":12000,"trend":"normal"}],"by_model":[{"display_name":"Claude Sonnet","name":"claude-sonnet-4-20250514","pct_of_total":83.3,"request_count":800,"spend_cents":15000,"trend":"normal"}],"by_user":[{"name":"user_abc123","pct_of_total":27.8,"request_count":200,"spend_cents":5000,"trend":"normal"}],"largest_driver_name":"claude-sonnet-4-20250514","largest_driver_pct":83.3,"largest_driver_type":"model","period":"7d","period_end":"2025-12-23T00:00:00Z","period_start":"2025-12-16T00:00:00Z","summary":"83% of your spend is from Claude Sonnet usage in Customer Support Chat","total_spend_cents":18000}},"CustomerCostIncidentDTO":{"properties":{"id":{"type":"string","title":"Id","description":"Incident ID (inc_*)"},"title":{"type":"string","title":"Title","description":"Customer-friendly title"},"status":{"type":"string","enum":["protected","attention_needed","resolved"],"title":"Status","description":"protected=blocked, attention_needed=warning, resolved=fixed"},"trigger_type":{"type":"string","enum":["cost_spike","budget_warning","budget_exceeded"],"title":"Trigger Type","description":"What triggered this"},"cost_at_trigger_cents":{"type":"integer","minimum":0.0,"title":"Cost At Trigger Cents"},"cost_avoided_cents":{"type":"integer","minimum":0.0,"title":"Cost Avoided Cents"},"threshold_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Threshold Cents"},"action_taken":{"type":"string","title":"Action Taken","description":"What system did: blocked, alerted, etc."},"recommendation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recommendation","description":"What customer should do"},"cause_explanation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cause Explanation","description":"Customer-friendly explanation of why this happened"},"detected_at":{"type":"string","title":"Detected At","description":"ISO8601"},"resolved_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolved At"}},"type":"object","required":["id","title","status","trigger_type","cost_at_trigger_cents","cost_avoided_cents","action_taken","detected_at"],"title":"CustomerCostIncidentDTO","description":"Cost-related incident visible to customer.\n\nUsed in GET /guard/costs/incidents response.\nFrozen: 2025-12-23 (M29 Category 4)\n\nIMPORTANT: Uses calm vocabulary (protected, attention_needed).\nDoes not expose severity levels - maps internally."},"CustomerCostIncidentListDTO":{"properties":{"incidents":{"items":{"$ref":"#/components/schemas/CustomerCostIncidentDTO"},"type":"array","title":"Incidents"},"total":{"type":"integer","title":"Total"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["incidents","total","has_more"],"title":"CustomerCostIncidentListDTO","description":"GET /guard/costs/incidents response."},"CustomerCostSummaryDTO":{"properties":{"spend_today_cents":{"type":"integer","minimum":0.0,"title":"Spend Today Cents","description":"Today's spend so far"},"spend_mtd_cents":{"type":"integer","minimum":0.0,"title":"Spend Mtd Cents","description":"Month-to-date spend"},"spend_7d_cents":{"type":"integer","minimum":0.0,"title":"Spend 7D Cents","description":"Last 7 days spend"},"budget_daily_cents":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Budget Daily Cents","description":"Daily budget if set"},"budget_monthly_cents":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Budget Monthly Cents","description":"Monthly budget if set"},"budget_used_daily_pct":{"anyOf":[{"type":"number","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"Budget Used Daily Pct","description":"% of daily budget used"},"budget_used_monthly_pct":{"anyOf":[{"type":"number","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"Budget Used Monthly Pct","description":"% of monthly budget used"},"projected_month_end_cents":{"type":"integer","minimum":0.0,"title":"Projected Month End Cents","description":"Projected month-end spend"},"days_until_budget_exhausted":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Days Until Budget Exhausted","description":"Days until monthly budget runs out"},"trend":{"type":"string","enum":["normal","rising","spike"],"title":"Trend","description":"normal=stable, rising=gradual increase, spike=significant deviation"},"trend_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trend Message","description":"Human-readable trend explanation"},"last_updated":{"type":"string","title":"Last Updated","description":"ISO8601 of last snapshot"}},"type":"object","required":["spend_today_cents","spend_mtd_cents","spend_7d_cents","projected_month_end_cents","trend","last_updated"],"title":"CustomerCostSummaryDTO","description":"GET /guard/costs/summary response.\n\nCustomer cost summary with trend and projection.\nFrozen: 2025-12-23 (M29 Category 4)\n\nTHE INVARIANT: All values derive from complete snapshots, never live data.\nCustomer sees their own tenant data only - no cross-tenant leakage.","example":{"budget_daily_cents":10000,"budget_monthly_cents":300000,"budget_used_daily_pct":23.4,"budget_used_monthly_pct":15.0,"last_updated":"2025-12-23T10:00:00Z","projected_month_end_cents":72000,"spend_7d_cents":18000,"spend_mtd_cents":45000,"spend_today_cents":2340,"trend":"normal","trend_message":"Spending is within normal range"}},"CustomerGuardrail":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"enabled":{"type":"boolean","title":"Enabled"},"category":{"type":"string","title":"Category"},"action_on_trigger":{"type":"string","title":"Action On Trigger"}},"type":"object","required":["id","name","description","enabled","category","action_on_trigger"],"title":"CustomerGuardrail","description":"Customer-visible guardrail configuration."},"CustomerIncidentActionDTO":{"properties":{"action_type":{"type":"string","enum":["review_usage","adjust_limits","contact_support","none"],"title":"Action Type"},"description":{"type":"string","title":"Description"},"urgency":{"type":"string","enum":["optional","recommended","required"],"title":"Urgency"},"link":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Link","description":"Deep link to relevant page"}},"type":"object","required":["action_type","description","urgency"],"title":"CustomerIncidentActionDTO","description":"Customer action item - only if necessary.\n\nFrozen: 2025-12-24 (M29 Category 5)"},"CustomerIncidentImpactDTO":{"properties":{"requests_affected":{"type":"string","enum":["yes","no","some"],"title":"Requests Affected"},"service_interrupted":{"type":"string","enum":["yes","no","briefly"],"title":"Service Interrupted"},"data_exposed":{"const":"no","title":"Data Exposed"},"cost_impact":{"type":"string","enum":["none","minimal","higher_than_usual","significant"],"title":"Cost Impact"},"cost_impact_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cost Impact Message","description":"E.g., 'Higher than usual for a short period'"}},"type":"object","required":["requests_affected","service_interrupted","data_exposed","cost_impact"],"title":"CustomerIncidentImpactDTO","description":"Impact assessment for customers - calm, explicit.\n\nFrozen: 2025-12-24 (M29 Category 5)"},"CustomerIncidentNarrativeDTO":{"properties":{"incident_id":{"type":"string","title":"Incident Id"},"title":{"type":"string","title":"Title","description":"Plain language title"},"summary":{"type":"string","title":"Summary","description":"E.g., 'We detected unusual AI usage that caused higher costs for a short period.'"},"impact":{"$ref":"#/components/schemas/CustomerIncidentImpactDTO"},"resolution":{"$ref":"#/components/schemas/CustomerIncidentResolutionDTO"},"customer_actions":{"items":{"$ref":"#/components/schemas/CustomerIncidentActionDTO"},"type":"array","title":"Customer Actions"},"started_at":{"type":"string","title":"Started At","description":"ISO8601"},"ended_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ended At","description":"ISO8601 if resolved"},"cost_summary_link":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cost Summary Link"}},"type":"object","required":["incident_id","title","summary","impact","resolution","started_at"],"title":"CustomerIncidentNarrativeDTO","description":"GET /guard/incidents/{id} enhanced response.\n\nCustomer-friendly incident detail with calm narrative.\nAnswers: What happened? Did it affect me? Is it fixed? Do I need to act?\n\nFrozen: 2025-12-24 (M29 Category 5)\n\nIMPORTANT: This is CUSTOMER-ONLY data.\n- Uses calm vocabulary (normal, rising, protected, resolved)\n- No internal terminology (no policy names, no thresholds)\n- No cross-tenant data (no affected_tenants, no percentiles)","example":{"cost_summary_link":"/guard/costs/summary","customer_actions":[{"action_type":"none","description":"No action is required from you.","urgency":"optional"}],"ended_at":"2025-12-24T14:32:00Z","impact":{"cost_impact":"higher_than_usual","cost_impact_message":"Higher than usual for a short period","data_exposed":"no","requests_affected":"some","service_interrupted":"no"},"incident_id":"inc_abc123","resolution":{"requires_action":false,"resolved_at":"2025-12-24T14:32:00Z","status":"resolved","status_message":"The issue was automatically mitigated at 14:32 UTC."},"started_at":"2025-12-24T14:00:00Z","summary":"We detected unusual AI usage that caused higher costs for a short period. Our systems automatically protected your account.","title":"Unusual usage pattern detected and resolved"}},"CustomerIncidentResolutionDTO":{"properties":{"status":{"type":"string","enum":["investigating","mitigating","resolved","monitoring"],"title":"Status"},"status_message":{"type":"string","title":"Status Message","description":"E.g., 'The issue was automatically mitigated at 14:32 UTC'"},"resolved_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolved At","description":"ISO8601 if resolved"},"requires_action":{"type":"boolean","title":"Requires Action","description":"True if customer needs to do something"}},"type":"object","required":["status","status_message","requires_action"],"title":"CustomerIncidentResolutionDTO","description":"Resolution status for customers - reassuring.\n\nFrozen: 2025-12-24 (M29 Category 5)"},"CustomerLogDetail":{"properties":{"log_id":{"type":"string","title":"Log Id"},"run_id":{"type":"string","title":"Run Id"},"correlation_id":{"type":"string","title":"Correlation Id"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"status":{"type":"string","title":"Status"},"started_at":{"type":"string","title":"Started At"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At"},"steps":{"items":{"$ref":"#/components/schemas/CustomerLogStep"},"type":"array","title":"Steps"},"total_steps":{"type":"integer","title":"Total Steps"},"success_count":{"type":"integer","title":"Success Count"},"failure_count":{"type":"integer","title":"Failure Count"},"total_duration_ms":{"type":"number","title":"Total Duration Ms"}},"type":"object","required":["log_id","run_id","correlation_id","status","started_at","steps","total_steps","success_count","failure_count","total_duration_ms"],"title":"CustomerLogDetail","description":"Customer-safe log detail."},"CustomerLogListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/CustomerLogSummary"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"}},"type":"object","required":["items","total","page","page_size"],"title":"CustomerLogListResponse","description":"Paginated customer log list."},"CustomerLogStep":{"properties":{"step_index":{"type":"integer","title":"Step Index"},"skill_name":{"type":"string","title":"Skill Name"},"status":{"type":"string","title":"Status"},"outcome_category":{"type":"string","title":"Outcome Category"},"outcome_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Outcome Code"},"duration_ms":{"type":"number","title":"Duration Ms"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["step_index","skill_name","status","outcome_category","duration_ms","timestamp"],"title":"CustomerLogStep","description":"Customer-safe log step for detail view."},"CustomerLogSummary":{"properties":{"log_id":{"type":"string","title":"Log Id"},"run_id":{"type":"string","title":"Run Id"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"status":{"type":"string","title":"Status"},"total_steps":{"type":"integer","title":"Total Steps"},"success_count":{"type":"integer","title":"Success Count"},"failure_count":{"type":"integer","title":"Failure Count"},"started_at":{"type":"string","title":"Started At"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At"},"total_duration_ms":{"type":"number","title":"Total Duration Ms","default":0.0}},"type":"object","required":["log_id","run_id","status","total_steps","success_count","failure_count","started_at"],"title":"CustomerLogSummary","description":"Customer-safe log summary for list view."},"CustomerPolicyConstraints":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"budget":{"anyOf":[{"$ref":"#/components/schemas/CustomerBudgetConstraint"},{"type":"null"}]},"rate_limits":{"items":{"$ref":"#/components/schemas/CustomerRateLimit"},"type":"array","title":"Rate Limits","default":[]},"guardrails":{"items":{"$ref":"#/components/schemas/CustomerGuardrail"},"type":"array","title":"Guardrails","default":[]},"last_updated":{"type":"string","title":"Last Updated"}},"type":"object","required":["tenant_id","last_updated"],"title":"CustomerPolicyConstraints","description":"Customer-visible policy constraints summary."},"CustomerRateLimit":{"properties":{"requests_per_period":{"type":"integer","title":"Requests Per Period"},"period":{"type":"string","title":"Period"},"current_usage":{"type":"integer","title":"Current Usage"},"remaining":{"type":"integer","title":"Remaining"}},"type":"object","required":["requests_per_period","period","current_usage","remaining"],"title":"CustomerRateLimit","description":"Customer-visible rate limit."},"CustomerSegment":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"tenant_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Name"},"first_action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"First Action"},"first_action_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"First Action At"},"inferred_buyer_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Inferred Buyer Type"},"current_stickiness":{"type":"number","title":"Current Stickiness"},"stickiness_7d":{"type":"number","title":"Stickiness 7D","default":0.0},"stickiness_30d":{"type":"number","title":"Stickiness 30D","default":0.0},"stickiness_delta":{"type":"number","title":"Stickiness Delta","default":0.0},"peak_stickiness":{"type":"number","title":"Peak Stickiness"},"stickiness_trend":{"type":"string","title":"Stickiness Trend"},"last_api_call":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Api Call"},"last_investigation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Investigation"},"is_silent_churn":{"type":"boolean","title":"Is Silent Churn"},"risk_level":{"type":"string","title":"Risk Level"},"risk_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Risk Reason"},"time_to_first_replay_m":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Time To First Replay M"},"time_to_first_export_m":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Time To First Export M"},"friction_score":{"type":"number","title":"Friction Score","default":0.0},"last_friction_event":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Friction Event"}},"type":"object","required":["tenant_id","current_stickiness","peak_stickiness","stickiness_trend","is_silent_churn","risk_level"],"title":"CustomerSegment","description":"Customer intelligence profile."},"DatasetInfo":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"sample_count":{"type":"integer","title":"Sample Count"},"thresholds":{"additionalProperties":{"type":"number"},"type":"object","title":"Thresholds"}},"type":"object","required":["id","name","description","sample_count","thresholds"],"title":"DatasetInfo","description":"Dataset information."},"DecisionItem":{"properties":{"source_domain":{"type":"string","title":"Source Domain"},"entity_type":{"type":"string","title":"Entity Type"},"entity_id":{"type":"string","title":"Entity Id"},"decision_type":{"type":"string","title":"Decision Type"},"priority":{"type":"string","title":"Priority"},"summary":{"type":"string","title":"Summary"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["source_domain","entity_type","entity_id","decision_type","priority","summary","created_at"],"title":"DecisionItem","description":"A pending decision requiring human action (projection)."},"DecisionRecordView":{"properties":{"decision_id":{"type":"string","title":"Decision Id"},"decision_type":{"type":"string","title":"Decision Type"},"decision_source":{"type":"string","title":"Decision Source"},"decision_trigger":{"type":"string","title":"Decision Trigger"},"decision_inputs":{"type":"object","title":"Decision Inputs"},"decision_outcome":{"type":"string","title":"Decision Outcome"},"decision_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Decision Reason"},"run_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Run Id"},"workflow_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Workflow Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"request_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Request Id"},"causal_role":{"type":"string","title":"Causal Role"},"decided_at":{"type":"string","format":"date-time","title":"Decided At"},"details":{"type":"object","title":"Details"}},"type":"object","required":["decision_id","decision_type","decision_source","decision_trigger","decision_inputs","decision_outcome","decision_reason","run_id","workflow_id","tenant_id","request_id","causal_role","decided_at","details"],"title":"DecisionRecordView","description":"Raw decision record - all fields exposed to founder."},"DecisionTimelineResponse":{"properties":{"incident_id":{"type":"string","title":"Incident Id"},"call_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Call Id"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"model":{"type":"string","title":"Model"},"timestamp":{"type":"string","title":"Timestamp"},"cost_cents":{"type":"integer","title":"Cost Cents"},"latency_ms":{"type":"integer","title":"Latency Ms"},"events":{"items":{"$ref":"#/components/schemas/TimelineEvent"},"type":"array","title":"Events"},"policy_evaluations":{"items":{"$ref":"#/components/schemas/PolicyEvaluation"},"type":"array","title":"Policy Evaluations"},"root_cause":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Root Cause"},"root_cause_badge":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Root Cause Badge"},"care_routing":{"anyOf":[{"$ref":"#/components/schemas/CARERoutingInfo"},{"type":"null"}]},"failure_catalog_match":{"anyOf":[{"$ref":"#/components/schemas/FailureCatalogMatch"},{"type":"null"}]}},"type":"object","required":["incident_id","model","timestamp","cost_cents","latency_ms","events","policy_evaluations"],"title":"DecisionTimelineResponse","description":"Full decision timeline for an incident/call."},"DecisionsQueueResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/DecisionItem"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["items","total","has_more"],"title":"DecisionsQueueResponse","description":"Response envelope for decisions queue (O2)."},"DivergenceReportResponse":{"properties":{"start_date":{"type":"string","format":"date-time","title":"Start Date"},"end_date":{"type":"string","format":"date-time","title":"End Date"},"version":{"type":"string","title":"Version"},"sample_count":{"type":"integer","title":"Sample Count"},"delta_p50":{"type":"number","title":"Delta P50"},"delta_p90":{"type":"number","title":"Delta P90"},"kl_divergence":{"type":"number","title":"Kl Divergence"},"outlier_count":{"type":"integer","title":"Outlier Count"},"fail_ratio":{"type":"number","title":"Fail Ratio"},"matching_rate":{"type":"number","title":"Matching Rate"},"detailed_samples":{"items":{"type":"object"},"type":"array","title":"Detailed Samples"}},"type":"object","required":["start_date","end_date","version","sample_count","delta_p50","delta_p90","kl_divergence","outlier_count","fail_ratio","matching_rate","detailed_samples"],"title":"DivergenceReportResponse","description":"Divergence report response."},"DomainCount":{"properties":{"domain":{"type":"string","title":"Domain"},"total":{"type":"integer","title":"Total"},"pending":{"type":"integer","title":"Pending"},"critical":{"type":"integer","title":"Critical"}},"type":"object","required":["domain","total","pending","critical"],"title":"DomainCount","description":"Count for a specific domain."},"EmbeddingConfigResponse":{"properties":{"provider":{"type":"string","title":"Provider"},"model":{"type":"string","title":"Model"},"backup_provider":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Backup Provider"},"backup_model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Backup Model"},"dimensions":{"type":"integer","title":"Dimensions"},"daily_quota":{"type":"integer","title":"Daily Quota"},"vector_search_enabled":{"type":"boolean","title":"Vector Search Enabled"},"fallback_to_keyword":{"type":"boolean","title":"Fallback To Keyword"},"provider_fallback_enabled":{"type":"boolean","title":"Provider Fallback Enabled"}},"type":"object","required":["provider","model","backup_provider","backup_model","dimensions","daily_quota","vector_search_enabled","fallback_to_keyword","provider_fallback_enabled"],"title":"EmbeddingConfigResponse","description":"Response schema for embedding configuration."},"EmbeddingData":{"properties":{"object":{"type":"string","title":"Object","default":"embedding"},"embedding":{"items":{"type":"number"},"type":"array","title":"Embedding"},"index":{"type":"integer","title":"Index"}},"type":"object","required":["embedding","index"],"title":"EmbeddingData"},"EmbeddingQuotaResponse":{"properties":{"daily_quota":{"type":"integer","title":"Daily Quota"},"current_count":{"type":"integer","title":"Current Count"},"remaining":{"type":"integer","title":"Remaining"},"exceeded":{"type":"boolean","title":"Exceeded"},"reset_at":{"type":"string","title":"Reset At"},"vector_search_enabled":{"type":"boolean","title":"Vector Search Enabled"},"fallback_enabled":{"type":"boolean","title":"Fallback Enabled"}},"type":"object","required":["daily_quota","current_count","remaining","exceeded","reset_at","vector_search_enabled","fallback_enabled"],"title":"EmbeddingQuotaResponse","description":"Response schema for embedding quota status."},"EmbeddingRequest":{"properties":{"model":{"type":"string","title":"Model","default":"text-embedding-3-small"},"input":{"title":"Input"},"encoding_format":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Encoding Format","default":"float"},"dimensions":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Dimensions"},"user":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User"}},"type":"object","required":["input"],"title":"EmbeddingRequest"},"EmbeddingResponse":{"properties":{"object":{"type":"string","title":"Object","default":"list"},"data":{"items":{"$ref":"#/components/schemas/EmbeddingData"},"type":"array","title":"Data"},"model":{"type":"string","title":"Model"},"usage":{"$ref":"#/components/schemas/Usage"}},"type":"object","required":["data","model","usage"],"title":"EmbeddingResponse"},"EstimationBasis":{"properties":{"mrr_assumption":{"type":"string","title":"Mrr Assumption","default":"$50_avg_plan"},"mrr_source":{"type":"string","title":"Mrr Source","default":"hardcoded"},"revenue_markup":{"type":"number","title":"Revenue Markup","default":2.0},"confidence":{"type":"string","title":"Confidence","default":"low"},"disclaimer":{"type":"string","title":"Disclaimer","default":"MRR estimate uses hardcoded $50/tenant assumption. Connect billing system for accurate data."}},"type":"object","title":"EstimationBasis","description":"PIN-254 Phase C Fix (C3 Partial Truth): Explicit disclosure of estimation assumptions.\n\nRevenue metrics use assumptions that must be visible to consumers."},"EstimationMethodology":{"properties":{"stages_source":{"type":"string","title":"Stages Source","default":"default_stages_v1"},"cost_source":{"type":"string","title":"Cost Source","default":"base_rate_v1"},"confidence":{"type":"string","title":"Confidence","default":"low"},"disclaimer":{"type":"string","title":"Disclaimer","default":"Estimates based on default assumptions. Actual execution may vary."}},"type":"object","title":"EstimationMethodology","description":"PIN-254 Phase C Fix (C3 Partial Truth): Explicit disclosure of estimation basis.\n\nEnsures API consumers know whether estimates are derived from:\n- Real planner output (planner_v1)\n- Hardcoded defaults (default_stages_v1)\n- Historical data (historical_avg)"},"EvaluateResponse":{"properties":{"recommended_action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recommended Action","description":"Recommended action code"},"confidence":{"type":"number","title":"Confidence","description":"Confidence score 0.0-1.0"},"total_score":{"type":"number","title":"Total Score","description":"Total weighted score"},"rules_evaluated":{"items":{"type":"object"},"type":"array","title":"Rules Evaluated","description":"List of evaluated rules with results"},"explanation":{"type":"string","title":"Explanation","description":"Human-readable explanation","default":""},"duration_ms":{"type":"integer","title":"Duration Ms","description":"Evaluation duration in milliseconds","default":0}},"type":"object","required":["confidence","total_score"],"title":"EvaluateResponse","description":"Response from rule evaluation."},"EvidenceHealth":{"type":"string","enum":["FLOWING","DEGRADED","MISSING"],"title":"EvidenceHealth","description":"Evidence capture health."},"EvolutionReportResponse":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"drift_signals":{"items":{"type":"object"},"type":"array","title":"Drift Signals"},"violations":{"items":{"type":"object"},"type":"array","title":"Violations"},"adjustments":{"items":{"type":"object"},"type":"array","title":"Adjustments"},"current_state":{"type":"object","title":"Current State"},"recommendations":{"items":{"type":"string"},"type":"array","title":"Recommendations"}},"type":"object","required":["agent_id","drift_signals","violations","adjustments","current_state","recommendations"],"title":"EvolutionReportResponse","description":"Response with agent evolution history."},"ExecuteRequest":{"properties":{"incident_id":{"type":"string","title":"Incident Id","description":"Incident ID"},"action":{"type":"string","title":"Action","description":"Recovery action to execute","example":"retry_agent"},"scope_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Scope Id","description":"Scope ID (REQUIRED for execution)"},"parameters":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Parameters","description":"Action parameters"}},"type":"object","required":["incident_id","action"],"title":"ExecuteRequest","description":"Request to execute a recovery action."},"ExecuteResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"scope_id":{"type":"string","title":"Scope Id"},"action":{"type":"string","title":"Action"},"incident_id":{"type":"string","title":"Incident Id"},"attempt_number":{"type":"integer","title":"Attempt Number"},"scope_status":{"type":"string","title":"Scope Status"},"attempts_remaining":{"type":"integer","title":"Attempts Remaining"},"cost_used_usd":{"type":"number","title":"Cost Used Usd"},"executed_at":{"type":"string","title":"Executed At"}},"type":"object","required":["success","scope_id","action","incident_id","attempt_number","scope_status","attempts_remaining","cost_used_usd","executed_at"],"title":"ExecuteResponse","description":"Response from recovery execution."},"ExplainRoutingResponse":{"properties":{"request_id":{"type":"string","title":"Request Id"},"agent_id":{"type":"string","title":"Agent Id"},"explanation":{"type":"object","title":"Explanation"},"factors":{"items":{"type":"object"},"type":"array","title":"Factors"},"recommendation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recommendation"}},"type":"object","required":["request_id","agent_id","explanation","factors"],"title":"ExplainRoutingResponse","description":"Response explaining a routing decision."},"ExportRequest":{"properties":{"format":{"type":"string","title":"Format","description":"Export format: csv or jsonl","default":"csv"},"entity_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Entity Type"},"entity_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Entity Id"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"},"start_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Time"},"end_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Time"}},"type":"object","title":"ExportRequest","description":"Request for status history export."},"ExportResponse":{"properties":{"export_id":{"type":"string","title":"Export Id"},"download_url":{"type":"string","title":"Download Url"},"expires_at":{"type":"string","format":"date-time","title":"Expires At"},"format":{"type":"string","title":"Format"},"record_count":{"type":"integer","title":"Record Count"}},"type":"object","required":["export_id","download_url","expires_at","format","record_count"],"title":"ExportResponse","description":"Response with signed URL for export download."},"FailItemRequest":{"properties":{"error_message":{"type":"string","title":"Error Message","description":"Error description"},"retry":{"type":"boolean","title":"Retry","description":"Whether to retry","default":true}},"type":"object","required":["error_message"],"title":"FailItemRequest","description":"Request to fail an item."},"FailureCatalogMatch":{"properties":{"matched":{"type":"boolean","title":"Matched","default":false},"failure_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Failure Code"},"failure_category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Failure Category"},"severity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Severity"},"recovery_mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recovery Mode"},"recovery_suggestion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recovery Suggestion"},"similar_patterns":{"items":{"type":"string"},"type":"array","title":"Similar Patterns","default":[]}},"type":"object","title":"FailureCatalogMatch","description":"M9 Failure Catalog match information."},"FeatureTagCreate":{"properties":{"tag":{"type":"string","title":"Tag","description":"Feature namespace (e.g., 'customer_support.chat')"},"display_name":{"type":"string","title":"Display Name","description":"Human-readable name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"budget_cents":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Budget Cents","description":"Per-feature budget in cents"}},"type":"object","required":["tag","display_name"],"title":"FeatureTagCreate","description":"Create a new feature tag."},"FeatureTagResponse":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"tag":{"type":"string","title":"Tag"},"display_name":{"type":"string","title":"Display Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"budget_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Budget Cents"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","tenant_id","tag","display_name","description","budget_cents","is_active","created_at","updated_at"],"title":"FeatureTagResponse","description":"Feature tag response."},"FeatureTagUpdate":{"properties":{"display_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Display Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"budget_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Budget Cents"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"FeatureTagUpdate","description":"Update a feature tag."},"FeedbackDetailResponse":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"pattern_type":{"type":"string","title":"Pattern Type"},"severity":{"type":"string","title":"Severity"},"description":{"type":"string","title":"Description"},"signature":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Signature"},"provenance":{"items":{},"type":"array","title":"Provenance"},"occurrence_count":{"type":"integer","title":"Occurrence Count"},"time_window_minutes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Time Window Minutes"},"threshold_used":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Threshold Used"},"extra_data":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Extra Data"},"detected_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Detected At"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"acknowledged":{"type":"boolean","title":"Acknowledged"},"acknowledged_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Acknowledged At"},"acknowledged_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Acknowledged By"}},"type":"object","required":["id","tenant_id","pattern_type","severity","description","signature","provenance","occurrence_count","time_window_minutes","threshold_used","extra_data","detected_at","created_at","acknowledged","acknowledged_at","acknowledged_by"],"title":"FeedbackDetailResponse","description":"Detailed feedback record."},"FeedbackListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"},"by_type":{"type":"object","title":"By Type"},"by_severity":{"type":"object","title":"By Severity"},"items":{"items":{"$ref":"#/components/schemas/FeedbackSummaryResponse"},"type":"array","title":"Items"}},"type":"object","required":["total","limit","offset","by_type","by_severity","items"],"title":"FeedbackListResponse","description":"Paginated list of feedback records."},"FeedbackSummaryResponse":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"pattern_type":{"type":"string","title":"Pattern Type"},"severity":{"type":"string","title":"Severity"},"description":{"type":"string","title":"Description"},"signature":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Signature"},"occurrence_count":{"type":"integer","title":"Occurrence Count"},"detected_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Detected At"},"acknowledged":{"type":"boolean","title":"Acknowledged"},"provenance_count":{"type":"integer","title":"Provenance Count"}},"type":"object","required":["id","tenant_id","pattern_type","severity","description","signature","occurrence_count","detected_at","acknowledged","provenance_count"],"title":"FeedbackSummaryResponse","description":"Summary of a feedback record."},"ForbiddenClaimRequest":{"properties":{"pattern":{"type":"string","title":"Pattern","description":"Pattern to match"},"reason":{"type":"string","title":"Reason","description":"Reason for forbidding","default":"Policy violation"},"severity":{"type":"string","title":"Severity","description":"error or warning","default":"error"}},"type":"object","required":["pattern"],"title":"ForbiddenClaimRequest","description":"Forbidden claim definition."},"ForceCompleteRequest":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","description":"Tenant ID to force-complete"},"reason":{"type":"string","maxLength":500,"minLength":10,"title":"Reason","description":"Explicit justification (required, min 10 chars)"}},"type":"object","required":["tenant_id","reason"],"title":"ForceCompleteRequest","description":"Request to force-complete onboarding for a tenant."},"ForceCompleteResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"tenant_id":{"type":"string","title":"Tenant Id"},"from_state":{"type":"string","title":"From State"},"to_state":{"type":"string","title":"To State"},"reason":{"type":"string","title":"Reason"},"actor_email":{"type":"string","title":"Actor Email"},"timestamp":{"type":"string","title":"Timestamp"},"audit_id":{"type":"string","title":"Audit Id"}},"type":"object","required":["success","tenant_id","from_state","to_state","reason","actor_email","timestamp","audit_id"],"title":"ForceCompleteResponse","description":"Response from force-complete action."},"FounderActionListDTO":{"properties":{"actions":{"items":{"$ref":"#/components/schemas/FounderActionSummaryDTO"},"type":"array","title":"Actions","description":"List of recent actions"},"total_count":{"type":"integer","title":"Total Count","description":"Total number of actions matching filter"},"page":{"type":"integer","title":"Page","description":"Current page number","default":1},"page_size":{"type":"integer","title":"Page Size","description":"Items per page","default":50}},"type":"object","required":["actions","total_count"],"title":"FounderActionListDTO","description":"List of recent founder actions for audit trail."},"FounderActionReasonDTO":{"properties":{"code":{"type":"string","enum":["COST_ANOMALY","POLICY_VIOLATION","RETRY_LOOP","ABUSE_SUSPECTED","FALSE_POSITIVE","OTHER"],"title":"Code","description":"Reason code for the action"},"note":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Note","description":"Optional free-text explanation (max 500 chars)"}},"type":"object","required":["code"],"title":"FounderActionReasonDTO","description":"Reason for a founder action - required for audit trail."},"FounderActionRequestDTO":{"properties":{"action":{"type":"string","enum":["FREEZE_TENANT","THROTTLE_TENANT","FREEZE_API_KEY","OVERRIDE_INCIDENT"],"title":"Action","description":"Action to perform"},"target":{"allOf":[{"$ref":"#/components/schemas/FounderActionTargetDTO"}],"description":"Target of the action"},"reason":{"allOf":[{"$ref":"#/components/schemas/FounderActionReasonDTO"}],"description":"Reason for the action"},"source_incident_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source Incident Id","description":"Optional incident ID that triggered this action"}},"type":"object","required":["action","target","reason"],"title":"FounderActionRequestDTO","description":"Unified command model for all founder actions.\n\nActions:\n- FREEZE_TENANT: Immediately block all API calls for tenant\n- THROTTLE_TENANT: Reduce tenant rate limit to 10% of normal\n- FREEZE_API_KEY: Immediately revoke specific API key\n- OVERRIDE_INCIDENT: Mark incident as false positive (closes it)","example":{"action":"FREEZE_TENANT","reason":{"code":"COST_ANOMALY","note":"Spending 40% above baseline, possible retry loop"},"source_incident_id":"inc_xyz789","target":{"id":"tenant_abc123","type":"TENANT"}}},"FounderActionResponseDTO":{"properties":{"status":{"type":"string","enum":["APPLIED","REJECTED","RATE_LIMITED","CONFLICT"],"title":"Status","description":"Result status of the action"},"action_id":{"type":"string","title":"Action Id","description":"Unique identifier for this action"},"applied_at":{"type":"string","title":"Applied At","description":"ISO8601 timestamp when action was applied"},"reversible":{"type":"boolean","title":"Reversible","description":"Whether this action can be undone (OVERRIDE_INCIDENT is not reversible)"},"undo_hint":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Undo Hint","description":"Hint for how to reverse this action (null if not reversible)"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Human-readable message (especially for REJECTED/CONFLICT)"}},"type":"object","required":["status","action_id","applied_at","reversible"],"title":"FounderActionResponseDTO","description":"Unified response for all founder actions.\n\nStatus codes:\n- APPLIED: Action was successfully applied\n- REJECTED: Action was rejected (validation failed, target not found)\n- RATE_LIMITED: Too many actions in time window\n- CONFLICT: Conflicting action already active (e.g., freeze + throttle)","example":{"action_id":"action_abc123def456","applied_at":"2025-12-24T10:30:00Z","reversible":true,"status":"APPLIED","undo_hint":"Use POST /ops/actions/unfreeze-tenant with action_id"}},"FounderActionSummaryDTO":{"properties":{"action_id":{"type":"string","title":"Action Id","description":"Unique action ID"},"action_type":{"type":"string","title":"Action Type","description":"Type of action"},"target_type":{"type":"string","title":"Target Type","description":"Type of target"},"target_id":{"type":"string","title":"Target Id","description":"ID of target"},"target_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Target Name","description":"Display name of target"},"reason_code":{"type":"string","title":"Reason Code","description":"Reason code"},"founder_email":{"type":"string","title":"Founder Email","description":"Who took the action"},"applied_at":{"type":"string","title":"Applied At","description":"When action was taken"},"is_reversed":{"type":"boolean","title":"Is Reversed","description":"Whether action was reversed"},"is_active":{"type":"boolean","title":"Is Active","description":"Whether action is currently active"}},"type":"object","required":["action_id","action_type","target_type","target_id","reason_code","founder_email","applied_at","is_reversed","is_active"],"title":"FounderActionSummaryDTO","description":"Summary of a founder action for list views."},"FounderActionTargetDTO":{"properties":{"type":{"type":"string","enum":["TENANT","API_KEY","INCIDENT"],"title":"Type","description":"Type of target being acted upon"},"id":{"type":"string","title":"Id","description":"Target identifier (tenant_id, api_key_id, or incident_id)"}},"type":"object","required":["type","id"],"title":"FounderActionTargetDTO","description":"Target of a founder action."},"FounderAuditRecordDTO":{"properties":{"audit_id":{"type":"string","title":"Audit Id","description":"Unique audit record ID"},"action_id":{"type":"string","title":"Action Id","description":"ID of the action that was taken"},"action_type":{"type":"string","enum":["FREEZE_TENANT","THROTTLE_TENANT","FREEZE_API_KEY","OVERRIDE_INCIDENT","UNFREEZE_TENANT","UNTHROTTLE_TENANT","UNFREEZE_API_KEY"],"title":"Action Type","description":"Type of action taken"},"target_type":{"type":"string","enum":["TENANT","API_KEY","INCIDENT"],"title":"Target Type","description":"Type of target"},"target_id":{"type":"string","title":"Target Id","description":"ID of the target"},"reason_code":{"type":"string","title":"Reason Code","description":"Reason code for the action"},"reason_note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason Note","description":"Optional reason note"},"source_incident_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source Incident Id","description":"Incident that triggered this action"},"founder_id":{"type":"string","title":"Founder Id","description":"ID of the founder who took the action"},"founder_email":{"type":"string","title":"Founder Email","description":"Email of the founder"},"mfa_verified":{"type":"boolean","title":"Mfa Verified","description":"Whether MFA was verified for this action"},"applied_at":{"type":"string","title":"Applied At","description":"ISO8601 timestamp"},"reversed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reversed At","description":"ISO8601 timestamp if action was reversed"},"reversed_by_action_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reversed By Action Id","description":"ID of the reversal action"}},"type":"object","required":["audit_id","action_id","action_type","target_type","target_id","reason_code","founder_id","founder_email","mfa_verified","applied_at"],"title":"FounderAuditRecordDTO","description":"Immutable audit record for founder actions.\n\nInvariant: Every action MUST write an audit record.\nNo audit record  API must fail.","example":{"action_id":"action_abc123def456","action_type":"FREEZE_TENANT","applied_at":"2025-12-24T10:30:00Z","audit_id":"audit_xyz123","founder_email":"admin@company.com","founder_id":"founder_001","mfa_verified":true,"reason_code":"COST_ANOMALY","reason_note":"Spending 40% above baseline","source_incident_id":"inc_xyz789","target_id":"tenant_abc123","target_type":"TENANT"}},"FounderBlastRadiusDTO":{"properties":{"requests_affected":{"type":"integer","minimum":0.0,"title":"Requests Affected"},"requests_blocked":{"type":"integer","minimum":0.0,"title":"Requests Blocked"},"cost_impact_cents":{"type":"integer","title":"Cost Impact Cents","description":"Absolute cost impact"},"cost_impact_pct":{"type":"number","title":"Cost Impact Pct","description":"% of daily baseline"},"duration_seconds":{"type":"integer","minimum":0.0,"title":"Duration Seconds"},"customer_visible_degradation":{"type":"boolean","title":"Customer Visible Degradation","description":"True if customer experienced service degradation"},"users_affected":{"type":"integer","minimum":0.0,"title":"Users Affected"},"features_affected":{"items":{"type":"string"},"type":"array","title":"Features Affected"}},"type":"object","required":["requests_affected","requests_blocked","cost_impact_cents","cost_impact_pct","duration_seconds","customer_visible_degradation","users_affected"],"title":"FounderBlastRadiusDTO","description":"Impact assessment - helps founders judge seriousness.\n\nFrozen: 2025-12-24 (M29 Category 5)"},"FounderCostAnomalyDTO":{"properties":{"id":{"type":"string","title":"Id","description":"Anomaly ID (anom_*)"},"anomaly_type":{"type":"string","title":"Anomaly Type","description":"user_spike, feature_spike, model_spike, tenant_spike"},"severity":{"type":"string","enum":["critical","high","medium","low"],"title":"Severity"},"entity_type":{"type":"string","title":"Entity Type","description":"user, feature, model, tenant"},"entity_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Entity Id"},"current_value_cents":{"type":"number","minimum":0.0,"title":"Current Value Cents"},"expected_value_cents":{"type":"number","minimum":0.0,"title":"Expected Value Cents"},"deviation_pct":{"type":"number","title":"Deviation Pct","description":"% deviation from baseline"},"threshold_pct":{"type":"number","title":"Threshold Pct","description":"Threshold that was exceeded"},"affected_tenants":{"type":"integer","minimum":1.0,"title":"Affected Tenants","description":"Number of tenants affected by similar pattern"},"is_systemic":{"type":"boolean","title":"Is Systemic","description":"True if affects >3 tenants"},"derived_cause":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Derived Cause","description":"Root cause: RETRY_LOOP, PROMPT_GROWTH, FEATURE_SURGE, TRAFFIC_GROWTH, UNKNOWN"},"breach_count":{"type":"integer","minimum":1.0,"title":"Breach Count","description":"Consecutive intervals that breached threshold (2+ = confirmed spike)","default":1},"message":{"type":"string","title":"Message"},"incident_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Incident Id","description":"Linked incident if escalated"},"action_taken":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action Taken"},"resolved":{"type":"boolean","title":"Resolved","default":false},"detected_at":{"type":"string","title":"Detected At","description":"ISO8601"},"snapshot_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Snapshot Id","description":"Source snapshot ID"}},"type":"object","required":["id","anomaly_type","severity","entity_type","current_value_cents","expected_value_cents","deviation_pct","threshold_pct","affected_tenants","is_systemic","message","detected_at"],"title":"FounderCostAnomalyDTO","description":"Cost anomaly aggregation for founders.\n\nGET /ops/cost/anomalies response item.\nFrozen: 2025-12-23 (M29 Category 4)\n\nIMPORTANT: This is FOUNDER-ONLY cross-tenant aggregation.\nNEVER expose to Customer Console."},"FounderCostAnomalyListDTO":{"properties":{"anomalies":{"items":{"$ref":"#/components/schemas/FounderCostAnomalyDTO"},"type":"array","title":"Anomalies"},"total":{"type":"integer","minimum":0.0,"title":"Total"},"tenants_affected":{"type":"integer","minimum":0.0,"title":"Tenants Affected","description":"Unique tenants with anomalies"},"systemic_count":{"type":"integer","minimum":0.0,"title":"Systemic Count","description":"Cross-tenant systemic issues"}},"type":"object","required":["anomalies","total","tenants_affected","systemic_count"],"title":"FounderCostAnomalyListDTO","description":"GET /ops/cost/anomalies response."},"FounderCostOverviewDTO":{"properties":{"spend_today_cents":{"type":"integer","minimum":0.0,"title":"Spend Today Cents","description":"Total spend today across all tenants"},"spend_mtd_cents":{"type":"integer","minimum":0.0,"title":"Spend Mtd Cents","description":"Month-to-date spend"},"spend_7d_cents":{"type":"integer","minimum":0.0,"title":"Spend 7D Cents","description":"Last 7 days spend"},"tenants_with_anomalies":{"type":"integer","minimum":0.0,"title":"Tenants With Anomalies","description":"Tenants with active cost anomalies"},"total_anomalies_24h":{"type":"integer","minimum":0.0,"title":"Total Anomalies 24H","description":"Anomalies detected in last 24h"},"largest_deviation_tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Largest Deviation Tenant Id","description":"Tenant with biggest deviation"},"largest_deviation_pct":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Largest Deviation Pct","description":"Deviation % from baseline"},"largest_deviation_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Largest Deviation Type","description":"user_spike, feature_spike, etc."},"last_snapshot_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Snapshot At","description":"ISO8601 of last complete snapshot"},"snapshot_freshness_minutes":{"type":"integer","minimum":0.0,"title":"Snapshot Freshness Minutes","description":"Minutes since last snapshot"},"snapshot_status":{"type":"string","enum":["fresh","stale","missing"],"title":"Snapshot Status","description":"fresh=<60min, stale=<24h, missing=>24h"},"trend_7d":{"type":"string","enum":["increasing","stable","decreasing"],"title":"Trend 7D","description":"7-day cost trend"}},"type":"object","required":["spend_today_cents","spend_mtd_cents","spend_7d_cents","tenants_with_anomalies","total_anomalies_24h","snapshot_freshness_minutes","snapshot_status","trend_7d"],"title":"FounderCostOverviewDTO","description":"GET /ops/cost/overview response.\n\nGlobal cost view for founders - deterministic from snapshots only.\nFrozen: 2025-12-23 (M29 Category 4)\n\nTHE INVARIANT: All values derive from complete snapshots, never live data.","example":{"largest_deviation_pct":450.0,"largest_deviation_tenant_id":"tenant_abc","largest_deviation_type":"user_spike","last_snapshot_at":"2025-12-23T10:00:00Z","snapshot_freshness_minutes":15,"snapshot_status":"fresh","spend_7d_cents":875000,"spend_mtd_cents":2500000,"spend_today_cents":125000,"tenants_with_anomalies":3,"total_anomalies_24h":5,"trend_7d":"stable"}},"FounderCostTenantDTO":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"tenant_name":{"type":"string","title":"Tenant Name"},"spend_today_cents":{"type":"integer","minimum":0.0,"title":"Spend Today Cents"},"spend_mtd_cents":{"type":"integer","minimum":0.0,"title":"Spend Mtd Cents"},"spend_7d_cents":{"type":"integer","minimum":0.0,"title":"Spend 7D Cents"},"deviation_from_baseline_pct":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Deviation From Baseline Pct","description":"% deviation from 7-day avg"},"baseline_7d_avg_cents":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Baseline 7D Avg Cents"},"budget_monthly_cents":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Budget Monthly Cents"},"budget_used_pct":{"anyOf":[{"type":"number","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"Budget Used Pct"},"has_anomaly":{"type":"boolean","title":"Has Anomaly","description":"Has active cost anomaly"},"anomaly_count_24h":{"type":"integer","minimum":0.0,"title":"Anomaly Count 24H"},"trend":{"type":"string","enum":["increasing","stable","decreasing"],"title":"Trend"},"last_activity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Activity"}},"type":"object","required":["tenant_id","tenant_name","spend_today_cents","spend_mtd_cents","spend_7d_cents","has_anomaly","anomaly_count_24h","trend"],"title":"FounderCostTenantDTO","description":"Per-tenant cost drilldown for founders.\n\nGET /ops/cost/tenants response item.\nFrozen: 2025-12-23 (M29 Category 4)"},"FounderCostTenantListDTO":{"properties":{"tenants":{"items":{"$ref":"#/components/schemas/FounderCostTenantDTO"},"type":"array","title":"Tenants"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"}},"type":"object","required":["tenants","total","page","page_size"],"title":"FounderCostTenantListDTO","description":"GET /ops/cost/tenants response."},"FounderCustomerCostDrilldownDTO":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"tenant_name":{"type":"string","title":"Tenant Name"},"spend_today_cents":{"type":"integer","minimum":0.0,"title":"Spend Today Cents"},"spend_mtd_cents":{"type":"integer","minimum":0.0,"title":"Spend Mtd Cents"},"spend_7d_cents":{"type":"integer","minimum":0.0,"title":"Spend 7D Cents"},"spend_30d_cents":{"type":"integer","minimum":0.0,"title":"Spend 30D Cents"},"baseline_7d_avg_cents":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Baseline 7D Avg Cents"},"deviation_from_baseline_pct":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Deviation From Baseline Pct"},"budget_monthly_cents":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Budget Monthly Cents"},"budget_used_pct":{"anyOf":[{"type":"number","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"Budget Used Pct"},"projected_month_end_cents":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Projected Month End Cents"},"days_until_budget_exhausted":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Days Until Budget Exhausted"},"daily_breakdown":{"items":{"$ref":"#/components/schemas/CostDailyBreakdownDTO"},"type":"array","title":"Daily Breakdown","description":"Last 7 days"},"by_feature":{"items":{"$ref":"#/components/schemas/CostByFeatureDTO"},"type":"array","title":"By Feature","description":"Top features by cost"},"by_user":{"items":{"$ref":"#/components/schemas/CostByUserDTO"},"type":"array","title":"By User","description":"Top 10 users by cost"},"by_model":{"items":{"$ref":"#/components/schemas/CostByModelDTO"},"type":"array","title":"By Model","description":"Cost by LLM model"},"largest_driver_type":{"type":"string","enum":["feature","user","model"],"title":"Largest Driver Type"},"largest_driver_name":{"type":"string","title":"Largest Driver Name"},"largest_driver_pct":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Largest Driver Pct"},"active_anomalies":{"type":"integer","minimum":0.0,"title":"Active Anomalies"},"recent_anomalies":{"items":{"$ref":"#/components/schemas/CustomerAnomalyHistoryDTO"},"type":"array","title":"Recent Anomalies","description":"Last 5 anomalies for this customer"},"trend_7d":{"type":"string","enum":["increasing","stable","decreasing"],"title":"Trend 7D"},"trend_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trend Message"},"last_activity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Activity"},"last_updated":{"type":"string","title":"Last Updated","description":"ISO8601 of data freshness"}},"type":"object","required":["tenant_id","tenant_name","spend_today_cents","spend_mtd_cents","spend_7d_cents","spend_30d_cents","daily_breakdown","by_feature","by_user","by_model","largest_driver_type","largest_driver_name","largest_driver_pct","active_anomalies","recent_anomalies","trend_7d","last_updated"],"title":"FounderCustomerCostDrilldownDTO","description":"GET /ops/cost/customers/{id} response.\n\nDeep-dive cost analysis for a single customer.\nFrozen: 2025-12-24 (M29 Category 4 Enhancement)\n\nIMPORTANT: This is FOUNDER-ONLY data.\nProvides granular cost attribution to answer \"why is this customer spending so much?\"","example":{"active_anomalies":0,"baseline_7d_avg_cents":2000.0,"budget_monthly_cents":100000,"budget_used_pct":45.0,"by_feature":[{"display_name":"Customer Support","feature_tag":"customer_support.chat","pct_of_total":66.7,"request_count":500,"spend_cents":12000,"trend":"stable"}],"by_model":[{"input_tokens":500000,"model":"claude-sonnet-4-20250514","output_tokens":100000,"pct_of_total":83.3,"request_count":600,"spend_cents":15000}],"by_user":[{"is_anomalous":false,"pct_of_total":27.8,"request_count":200,"spend_cents":5000,"user_id":"user_xyz"}],"daily_breakdown":[{"avg_cost_per_request_cents":16.67,"date":"2025-12-23","request_count":150,"spend_cents":2500},{"avg_cost_per_request_cents":16.43,"date":"2025-12-22","request_count":140,"spend_cents":2300}],"deviation_from_baseline_pct":25.0,"largest_driver_name":"customer_support.chat","largest_driver_pct":66.7,"largest_driver_type":"feature","last_activity":"2025-12-23T15:30:00Z","last_updated":"2025-12-23T16:00:00Z","projected_month_end_cents":90000,"recent_anomalies":[],"spend_30d_cents":72000,"spend_7d_cents":18000,"spend_mtd_cents":45000,"spend_today_cents":2500,"tenant_id":"tenant_abc123","tenant_name":"Acme Corp","trend_7d":"stable","trend_message":"Cost is within normal range for this customer"}},"FounderDecisionTimelineEventDTO":{"properties":{"timestamp":{"type":"string","title":"Timestamp","description":"ISO8601"},"event_type":{"type":"string","enum":["DETECTION_SIGNAL","TRIGGER_CONDITION","POLICY_EVALUATION","COST_ANOMALY","RECOVERY_ACTION","RESOLUTION","ESCALATION","OPERATOR_ACTION"],"title":"Event Type"},"description":{"type":"string","title":"Description"},"data":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Data"}},"type":"object","required":["timestamp","event_type","description"],"title":"FounderDecisionTimelineEventDTO","description":"Single event in the decision timeline - raw truth, append-only.\n\nFrozen: 2025-12-24 (M29 Category 5)"},"FounderIncidentDetailDTO":{"properties":{"header":{"$ref":"#/components/schemas/FounderIncidentHeaderDTO"},"timeline":{"items":{"$ref":"#/components/schemas/FounderDecisionTimelineEventDTO"},"type":"array","title":"Timeline"},"root_cause":{"$ref":"#/components/schemas/FounderRootCauseDTO"},"blast_radius":{"$ref":"#/components/schemas/FounderBlastRadiusDTO"},"recurrence_risk":{"$ref":"#/components/schemas/FounderRecurrenceRiskDTO"},"related_cost_anomaly_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Related Cost Anomaly Id"},"related_killswitch_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Related Killswitch Id"},"linked_call_ids":{"items":{"type":"string"},"type":"array","title":"Linked Call Ids"},"action_taken":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action Taken"},"action_details":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Action Details"},"recommended_next_steps":{"items":{"type":"string"},"type":"array","title":"Recommended Next Steps"}},"type":"object","required":["header","timeline","root_cause","blast_radius","recurrence_risk"],"title":"FounderIncidentDetailDTO","description":"GET /ops/incidents/{id} response.\n\nFull incident with causality and impact analysis.\nAnswers: What failed? Why? What do we do next?\n\nFrozen: 2025-12-24 (M29 Category 5)\n\nIMPORTANT: This is FOUNDER-ONLY data.\nContains internal terminology, thresholds, and cross-tenant context.\nNEVER expose to Customer Console.","example":{"blast_radius":{"cost_impact_cents":5000,"cost_impact_pct":45.0,"customer_visible_degradation":false,"duration_seconds":900,"features_affected":["customer_support.chat"],"requests_affected":1500,"requests_blocked":200,"users_affected":12},"header":{"current_state":"MITIGATED","first_detected":"2025-12-24T10:00:00Z","incident_id":"inc_abc123","incident_type":"COST","last_updated":"2025-12-24T10:15:00Z","severity":"high","tenant_id":"tenant_xyz","tenant_name":"Acme Corp"},"recurrence_risk":{"risk_level":"high","same_feature_recurrence":true,"same_root_cause_recurrence":true,"same_tenant_recurrence":true,"similar_incidents_30d":3,"similar_incidents_7d":1,"suggested_prevention":"Review retry logic in customer_support.chat feature"},"root_cause":{"actual_value":0.48,"baseline_value":0.05,"confidence":"high","derived_cause":"RETRY_LOOP","evidence":"retry/request +92% over baseline","threshold_breached":0.4},"timeline":[{"data":{"deviation_pct":40.0},"description":"Cost anomaly detected: 40% above baseline","event_type":"DETECTION_SIGNAL","timestamp":"2025-12-24T10:00:00Z"}]}},"FounderIncidentHeaderDTO":{"properties":{"incident_id":{"type":"string","title":"Incident Id"},"incident_type":{"type":"string","enum":["POLICY","COST","RELIABILITY","RATE_LIMIT","SAFETY"],"title":"Incident Type"},"severity":{"type":"string","enum":["critical","high","medium","low"],"title":"Severity"},"tenant_id":{"type":"string","title":"Tenant Id"},"tenant_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Name"},"current_state":{"type":"string","enum":["DETECTED","TRIAGED","MITIGATED","RESOLVED"],"title":"Current State"},"first_detected":{"type":"string","title":"First Detected","description":"ISO8601"},"last_updated":{"type":"string","title":"Last Updated","description":"ISO8601"}},"type":"object","required":["incident_id","incident_type","severity","tenant_id","current_state","first_detected","last_updated"],"title":"FounderIncidentHeaderDTO","description":"Incident header - dense, no prose, just facts.\n\nPart of GET /ops/incidents/{id} response.\nFrozen: 2025-12-24 (M29 Category 5)"},"FounderIncidentListDTO":{"properties":{"incidents":{"items":{"$ref":"#/components/schemas/FounderIncidentListItemDTO"},"type":"array","title":"Incidents"},"total":{"type":"integer","minimum":0.0,"title":"Total"},"page":{"type":"integer","minimum":1.0,"title":"Page"},"page_size":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Page Size"},"active_count":{"type":"integer","minimum":0.0,"title":"Active Count","description":"Non-resolved incidents"},"critical_count":{"type":"integer","minimum":0.0,"title":"Critical Count"},"high_count":{"type":"integer","minimum":0.0,"title":"High Count"}},"type":"object","required":["incidents","total","page","page_size","active_count","critical_count","high_count"],"title":"FounderIncidentListDTO","description":"GET /ops/incidents response (paginated).\n\nFrozen: 2025-12-24 (M29 Category 5)"},"FounderIncidentListItemDTO":{"properties":{"incident_id":{"type":"string","title":"Incident Id"},"incident_type":{"type":"string","enum":["POLICY","COST","RELIABILITY","RATE_LIMIT","SAFETY"],"title":"Incident Type"},"severity":{"type":"string","enum":["critical","high","medium","low"],"title":"Severity"},"current_state":{"type":"string","enum":["DETECTED","TRIAGED","MITIGATED","RESOLVED"],"title":"Current State"},"tenant_id":{"type":"string","title":"Tenant Id"},"tenant_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Name"},"title":{"type":"string","title":"Title"},"root_cause":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Root Cause"},"requests_affected":{"type":"integer","minimum":0.0,"title":"Requests Affected"},"cost_impact_cents":{"type":"integer","minimum":0.0,"title":"Cost Impact Cents"},"first_detected":{"type":"string","title":"First Detected"},"duration_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Seconds"},"is_recurring":{"type":"boolean","title":"Is Recurring","description":"True if similar incident in last 7 days"}},"type":"object","required":["incident_id","incident_type","severity","current_state","tenant_id","title","requests_affected","cost_impact_cents","first_detected","is_recurring"],"title":"FounderIncidentListItemDTO","description":"Incident list item for founder console.\n\nUsed in GET /ops/incidents response.\nFrozen: 2025-12-24 (M29 Category 5)"},"FounderIntervention":{"properties":{"intervention_type":{"type":"string","title":"Intervention Type"},"priority":{"type":"string","title":"Priority"},"suggested_action":{"type":"string","title":"Suggested Action"},"context":{"type":"string","title":"Context"},"expected_outcome":{"type":"string","title":"Expected Outcome"},"triggering_signals":{"items":{"type":"string"},"type":"array","title":"Triggering Signals"}},"type":"object","required":["intervention_type","priority","suggested_action","context","expected_outcome","triggering_signals"],"title":"FounderIntervention","description":"Phase-2: Suggested founder action for at-risk customer.\n\nIMPORTANT: Every intervention MUST include explicit triggering_signals.\nThis prevents blind trust and enables learning from outcomes."},"FounderRecurrenceRiskDTO":{"properties":{"similar_incidents_7d":{"type":"integer","minimum":0.0,"title":"Similar Incidents 7D"},"similar_incidents_30d":{"type":"integer","minimum":0.0,"title":"Similar Incidents 30D"},"same_tenant_recurrence":{"type":"boolean","title":"Same Tenant Recurrence"},"same_feature_recurrence":{"type":"boolean","title":"Same Feature Recurrence"},"same_root_cause_recurrence":{"type":"boolean","title":"Same Root Cause Recurrence"},"risk_level":{"type":"string","enum":["high","medium","low"],"title":"Risk Level"},"suggested_prevention":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Suggested Prevention"}},"type":"object","required":["similar_incidents_7d","similar_incidents_30d","same_tenant_recurrence","same_feature_recurrence","same_root_cause_recurrence","risk_level"],"title":"FounderRecurrenceRiskDTO","description":"Recurrence risk analysis - strategic, not operational.\n\nFrozen: 2025-12-24 (M29 Category 5)"},"FounderReversalRequestDTO":{"properties":{"action_id":{"type":"string","title":"Action Id","description":"ID of the action to reverse"},"reason":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Reason","description":"Optional reason for reversal"}},"type":"object","required":["action_id"],"title":"FounderReversalRequestDTO","description":"Request to reverse a previous action.","example":{"action_id":"action_abc123def456","reason":"False positive confirmed - customer was testing"}},"FounderRootCauseDTO":{"properties":{"derived_cause":{"type":"string","enum":["RETRY_LOOP","PROMPT_GROWTH","FEATURE_SURGE","TRAFFIC_GROWTH","RATE_LIMIT_BREACH","POLICY_VIOLATION","BUDGET_EXCEEDED","UNKNOWN"],"title":"Derived Cause"},"evidence":{"type":"string","title":"Evidence","description":"E.g., 'retry/request +92% over baseline'"},"confidence":{"type":"string","enum":["high","medium","low"],"title":"Confidence"},"baseline_value":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Baseline Value"},"actual_value":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Actual Value"},"threshold_breached":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Threshold Breached"}},"type":"object","required":["derived_cause","evidence","confidence"],"title":"FounderRootCauseDTO","description":"Root cause analysis - explicit, no hedging.\n\nFrozen: 2025-12-24 (M29 Category 5)"},"GateEvidenceResponse":{"properties":{"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"passed":{"type":"boolean","title":"Passed"},"score":{"type":"number","title":"Score"},"evidence":{"type":"object","title":"Evidence"},"degraded":{"type":"boolean","title":"Degraded","default":false}},"type":"object","required":["name","description","passed","score","evidence"],"title":"GateEvidenceResponse","description":"Evidence for a graduation gate."},"GoalRequest":{"properties":{"goal":{"type":"string","title":"Goal"},"idempotency_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Idempotency Key","description":"Optional key for idempotent submissions"}},"type":"object","required":["goal"],"title":"GoalRequest"},"GoalResponse":{"properties":{"run_id":{"type":"string","title":"Run Id"},"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["run_id","status","message"],"title":"GoalResponse"},"GovernanceO2Response":{"properties":{"items":{"items":{"$ref":"#/components/schemas/PolicyRuleSummary"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["items","total","has_more"],"title":"GovernanceO2Response","description":"Response envelope (contract mandates this structure).\nBackend MUST return this shape even for empty results."},"GuardStatus":{"properties":{"is_frozen":{"type":"boolean","title":"Is Frozen"},"frozen_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Frozen At"},"frozen_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Frozen By"},"incidents_blocked_24h":{"type":"integer","title":"Incidents Blocked 24H"},"active_guardrails":{"items":{"type":"string"},"type":"array","title":"Active Guardrails"},"last_incident_time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Incident Time"}},"type":"object","required":["is_frozen","incidents_blocked_24h","active_guardrails"],"title":"GuardStatus","description":"Protection status response."},"GuardrailConfig":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"enabled":{"type":"boolean","title":"Enabled"},"threshold_type":{"type":"string","title":"Threshold Type"},"threshold_value":{"type":"number","title":"Threshold Value"},"threshold_unit":{"type":"string","title":"Threshold Unit"},"action_on_trigger":{"type":"string","title":"Action On Trigger"}},"type":"object","required":["id","name","description","enabled","threshold_type","threshold_value","threshold_unit","action_on_trigger"],"title":"GuardrailConfig","description":"Guardrail configuration for settings page."},"GuardrailSummary":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"category":{"type":"string","title":"Category"},"action":{"type":"string","title":"Action"},"is_enabled":{"type":"boolean","title":"Is Enabled"},"priority":{"type":"integer","title":"Priority"}},"type":"object","required":["id","name","category","action","is_enabled","priority"],"title":"GuardrailSummary","description":"Summary of active guardrails."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HandshakeRequest":{"properties":{"sdk_version":{"type":"string","title":"Sdk Version","description":"SDK version string"},"sdk_language":{"type":"string","title":"Sdk Language","description":"SDK language (python, javascript, etc.)"},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id","description":"Optional client identifier"}},"type":"object","required":["sdk_version","sdk_language"],"title":"HandshakeRequest","description":"SDK handshake request."},"HandshakeResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"server_version":{"type":"string","title":"Server Version"},"tenant_id":{"type":"string","title":"Tenant Id"},"onboarding_state":{"type":"string","title":"Onboarding State"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["success","message","server_version","tenant_id","onboarding_state","timestamp"],"title":"HandshakeResponse","description":"SDK handshake response."},"HardenedGraduationResponse":{"properties":{"status":{"type":"string","title":"Status"},"level":{"type":"string","title":"Level"},"is_graduated":{"type":"boolean","title":"Is Graduated"},"is_degraded":{"type":"boolean","title":"Is Degraded"},"gates":{"additionalProperties":{"$ref":"#/components/schemas/GateEvidenceResponse"},"type":"object","title":"Gates"},"capabilities":{"$ref":"#/components/schemas/CapabilityStatus"},"simulation":{"$ref":"#/components/schemas/SimulationStatus"},"computed_at":{"type":"string","title":"Computed At"},"evidence_window_days":{"type":"integer","title":"Evidence Window Days"},"degradation":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Degradation"},"next_action":{"type":"string","title":"Next Action"}},"type":"object","required":["status","level","is_graduated","is_degraded","gates","capabilities","simulation","computed_at","evidence_window_days","next_action"],"title":"HardenedGraduationResponse","description":"Hardened graduation status response.\n\nKey differences from v1:\n- Status is DERIVED from evidence, not manually set\n- Includes capability gates (what's unlocked/blocked)\n- Includes simulation status (separate from real)\n- Includes degradation info"},"HealthCheckItem":{"properties":{"severity":{"type":"string","title":"Severity"},"code":{"type":"string","title":"Code"},"title":{"type":"string","title":"Title"},"message":{"type":"string","title":"Message"},"action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action"}},"type":"object","required":["severity","code","title","message"],"title":"HealthCheckItem","description":"Single health check result."},"HealthCheckResponse":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"healthy":{"type":"boolean","title":"Healthy"},"errors":{"items":{"$ref":"#/components/schemas/HealthCheckItem"},"type":"array","title":"Errors"},"warnings":{"items":{"$ref":"#/components/schemas/HealthCheckItem"},"type":"array","title":"Warnings"},"suggestions":{"items":{"$ref":"#/components/schemas/HealthCheckItem"},"type":"array","title":"Suggestions"},"checked_at":{"type":"string","title":"Checked At"}},"type":"object","required":["agent_id","healthy","errors","warnings","suggestions","checked_at"],"title":"HealthCheckResponse","description":"Response for health check endpoint."},"IAECComposeRequest":{"properties":{"instruction":{"type":"string","title":"Instruction","default":"default"},"query":{"type":"string","title":"Query"},"context":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Context"},"mode":{"type":"string","title":"Mode","default":"weighted"},"policy_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Policy Id"},"policy_version":{"type":"integer","title":"Policy Version","default":1},"policy_level":{"type":"integer","title":"Policy Level","default":0}},"type":"object","required":["query"],"title":"IAECComposeRequest","description":"Request schema for IAEC composition (v3.0)."},"IAECComposeResponse":{"properties":{"vector":{"items":{},"type":"array","title":"Vector"},"mode":{"type":"string","title":"Mode"},"instruction":{"type":"string","title":"Instruction"},"weights":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Weights"},"dimensions":{"type":"integer","title":"Dimensions"},"query_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Query Hash"},"instruction_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instruction Hash"},"context_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Context Hash"},"provenance_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Provenance Hash"},"mismatch_score":{"type":"number","title":"Mismatch Score","default":0.0},"deep_mismatch_score":{"type":"number","title":"Deep Mismatch Score","default":0.0},"collapse_prevented":{"type":"boolean","title":"Collapse Prevented","default":false},"values_clamped":{"type":"boolean","title":"Values Clamped","default":false},"norm_coefficient":{"type":"number","title":"Norm Coefficient","default":1.0},"temporal_signature":{"anyOf":[{"$ref":"#/components/schemas/TemporalSignatureResponse"},{"type":"null"}]},"policy_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Policy Id"},"policy_encoding":{"anyOf":[{"$ref":"#/components/schemas/PolicyEncodingResponse"},{"type":"null"}]},"slot_basis_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slot Basis Hash"},"integrity_verified":{"type":"boolean","title":"Integrity Verified","default":false},"reconstruction_error":{"type":"number","title":"Reconstruction Error","default":0.0},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"iaec_version":{"type":"string","title":"Iaec Version","default":"3.2.0"},"whitening_basis_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Whitening Basis Id"},"whitening_version":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Whitening Version"}},"type":"object","required":["vector","mode","instruction","dimensions"],"title":"IAECComposeResponse","description":"Response schema for IAEC composition (v3.2)."},"IAECDecomposeRequest":{"properties":{"vector":{"items":{"type":"number"},"type":"array","title":"Vector"},"verify":{"type":"boolean","title":"Verify","default":true}},"type":"object","required":["vector"],"title":"IAECDecomposeRequest","description":"Request schema for IAEC decomposition."},"IAECDecomposeResponse":{"properties":{"instruction_slot":{"items":{"type":"number"},"type":"array","title":"Instruction Slot"},"query_slot":{"items":{"type":"number"},"type":"array","title":"Query Slot"},"context_slot":{"items":{"type":"number"},"type":"array","title":"Context Slot"},"temporal_slot":{"items":{"type":"number"},"type":"array","title":"Temporal Slot"},"policy_slot":{"items":{"type":"number"},"type":"array","title":"Policy Slot"},"is_valid":{"type":"boolean","title":"Is Valid"},"reconstruction_error":{"type":"number","title":"Reconstruction Error"},"temporal_compatible":{"type":"boolean","title":"Temporal Compatible"},"source_mode":{"type":"string","title":"Source Mode"}},"type":"object","required":["instruction_slot","query_slot","context_slot","temporal_slot","policy_slot","is_valid","reconstruction_error","temporal_compatible","source_mode"],"title":"IAECDecomposeResponse","description":"Response schema for IAEC decomposition (v3.0)."},"IncidentCountBySeverity":{"properties":{"critical":{"type":"integer","title":"Critical"},"high":{"type":"integer","title":"High"},"medium":{"type":"integer","title":"Medium"},"low":{"type":"integer","title":"Low"}},"type":"object","required":["critical","high","medium","low"],"title":"IncidentCountBySeverity","description":"Count of incidents by severity."},"IncidentDetail":{"properties":{"id":{"type":"string","title":"Id"},"title":{"type":"string","title":"Title"},"severity":{"type":"string","title":"Severity"},"status":{"type":"string","title":"Status"},"trigger_type":{"type":"string","title":"Trigger Type"},"trigger_value":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trigger Value"},"calls_affected":{"type":"integer","title":"Calls Affected"},"cost_delta_cents":{"type":"number","title":"Cost Delta Cents"},"error_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Error Rate"},"auto_action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Auto Action"},"started_at":{"type":"string","format":"date-time","title":"Started At"},"ended_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ended At"},"duration_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Seconds"},"timeline":{"items":{"type":"object"},"type":"array","title":"Timeline","default":[]}},"type":"object","required":["id","title","severity","status","trigger_type","calls_affected","cost_delta_cents","started_at"],"title":"IncidentDetail","description":"Detailed view of an incident with timeline."},"IncidentDetailResponse":{"properties":{"incident":{"$ref":"#/components/schemas/app__api__guard__IncidentSummary"},"timeline":{"items":{"$ref":"#/components/schemas/IncidentEventResponse"},"type":"array","title":"Timeline"}},"type":"object","required":["incident","timeline"],"title":"IncidentDetailResponse","description":"Full incident detail with timeline."},"IncidentEventResponse":{"properties":{"id":{"type":"string","title":"Id"},"event_type":{"type":"string","title":"Event Type"},"description":{"type":"string","title":"Description"},"created_at":{"type":"string","title":"Created At"},"data":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Data"}},"type":"object","required":["id","event_type","description","created_at"],"title":"IncidentEventResponse","description":"Timeline event."},"IncidentO2Row":{"properties":{"incident_id":{"type":"string","title":"Incident Id"},"lifecycle_state":{"type":"string","title":"Lifecycle State"},"severity":{"type":"string","title":"Severity"},"category":{"type":"string","title":"Category"},"title":{"type":"string","title":"Title"},"llm_run_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Llm Run Id"},"cause_type":{"type":"string","title":"Cause Type"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"resolved_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Resolved At"}},"type":"object","required":["incident_id","lifecycle_state","severity","category","title","llm_run_id","cause_type","created_at","resolved_at"],"title":"IncidentO2Row","description":"O2 Result Shape (EXACT from contract).\nNo extra fields. No missing fields. No renaming."},"IncidentPattern":{"properties":{"pattern_type":{"type":"string","title":"Pattern Type"},"count_24h":{"type":"integer","title":"Count 24H"},"count_7d":{"type":"integer","title":"Count 7D"},"trend":{"type":"string","title":"Trend"},"top_tenants":{"items":{"type":"string"},"type":"array","title":"Top Tenants"},"sample_ids":{"items":{"type":"string"},"type":"array","title":"Sample Ids"}},"type":"object","required":["pattern_type","count_24h","count_7d","trend","top_tenants","sample_ids"],"title":"IncidentPattern","description":"Failure pattern analysis."},"IncidentSearchRequest":{"properties":{"query":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Query"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"policy_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Policy Status"},"severity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Severity"},"time_from":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Time From"},"time_to":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Time To"},"model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model"},"limit":{"type":"integer","title":"Limit","default":50},"offset":{"type":"integer","title":"Offset","default":0}},"type":"object","title":"IncidentSearchRequest","description":"Search incidents with filters."},"IncidentSearchResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/IncidentSearchResult"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"query":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Query"},"filters_applied":{"type":"object","title":"Filters Applied"}},"type":"object","required":["items","total","filters_applied"],"title":"IncidentSearchResponse","description":"Search response."},"IncidentSearchResult":{"properties":{"incident_id":{"type":"string","title":"Incident Id"},"timestamp":{"type":"string","title":"Timestamp"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"output_preview":{"type":"string","title":"Output Preview"},"policy_status":{"type":"string","title":"Policy Status"},"confidence":{"type":"number","title":"Confidence"},"model":{"type":"string","title":"Model"},"severity":{"type":"string","title":"Severity"},"cost_cents":{"type":"integer","title":"Cost Cents"}},"type":"object","required":["incident_id","timestamp","output_preview","policy_status","confidence","model","severity","cost_cents"],"title":"IncidentSearchResult","description":"Search result item matching component map spec."},"IncidentSummaryResponse":{"properties":{"incident_id":{"type":"string","title":"Incident Id"},"title":{"type":"string","title":"Title"},"severity":{"type":"string","title":"Severity"},"status":{"type":"string","title":"Status"},"trigger_type":{"type":"string","title":"Trigger Type"},"started_at":{"type":"string","title":"Started At"},"ended_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ended At"},"duration_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Seconds"},"calls_affected":{"type":"integer","title":"Calls Affected"},"cost_delta_cents":{"type":"number","title":"Cost Delta Cents"},"has_replay_data":{"type":"boolean","title":"Has Replay Data"}},"type":"object","required":["incident_id","title","severity","status","trigger_type","started_at","ended_at","duration_seconds","calls_affected","cost_delta_cents","has_replay_data"],"title":"IncidentSummaryResponse","description":"Summary of incident for replay context."},"IncidentsByLifecycleState":{"properties":{"active":{"type":"integer","title":"Active"},"acked":{"type":"integer","title":"Acked"},"resolved":{"type":"integer","title":"Resolved"}},"type":"object","required":["active","acked","resolved"],"title":"IncidentsByLifecycleState","description":"Incident counts by lifecycle state (PIN-412 canonical states)."},"IncidentsCount":{"properties":{"total":{"type":"integer","title":"Total"},"by_lifecycle_state":{"$ref":"#/components/schemas/IncidentsByLifecycleState"}},"type":"object","required":["total","by_lifecycle_state"],"title":"IncidentsCount","description":"Incident count structure."},"IncidentsMetricsResponse":{"properties":{"total_open":{"type":"integer","title":"Total Open"},"total_resolved":{"type":"integer","title":"Total Resolved"},"by_severity":{"$ref":"#/components/schemas/IncidentCountBySeverity"}},"type":"object","required":["total_open","total_resolved","by_severity"],"title":"IncidentsMetricsResponse","description":"Incidents metrics/summary response."},"IncidentsO2Response":{"properties":{"items":{"items":{"$ref":"#/components/schemas/IncidentO2Row"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["items","total","has_more"],"title":"IncidentsO2Response","description":"Response envelope (contract mandates this structure).\nBackend MUST return this shape even for empty results."},"IncidentsResponse":{"properties":{"incidents":{"items":{"$ref":"#/components/schemas/app__api__incidents__IncidentSummary"},"type":"array","title":"Incidents"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"per_page":{"type":"integer","title":"Per Page"}},"type":"object","required":["incidents","total","page","per_page"],"title":"IncidentsResponse","description":"Incidents list response."},"IncidentsSummaryResponse":{"properties":{"window":{"type":"string","title":"Window"},"incidents":{"$ref":"#/components/schemas/IncidentsCount"},"attention":{"$ref":"#/components/schemas/app__api__incidents__AttentionSummary"},"provenance":{"$ref":"#/components/schemas/Provenance"}},"type":"object","required":["window","incidents","attention","provenance"],"title":"IncidentsSummaryResponse","description":"Incidents summary response (HIL v1).\n\nRules (locked):\n- No adjectives (good, bad, healthy, critical)\n- Counts must reconcile: sum(by_lifecycle_state) == total\n- Reasons must be from registry (fail fast on unknown)\n- attention.count == incidents.by_lifecycle_state.active\n- Provenance always present"},"InfraLimits":{"properties":{"db_connections_current":{"type":"integer","title":"Db Connections Current"},"db_connections_max":{"type":"integer","title":"Db Connections Max"},"db_storage_used_gb":{"type":"number","title":"Db Storage Used Gb"},"db_storage_limit_gb":{"type":"number","title":"Db Storage Limit Gb"},"db_storage_days_to_limit":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Db Storage Days To Limit"},"redis_memory_used_mb":{"type":"number","title":"Redis Memory Used Mb"},"redis_memory_limit_mb":{"type":"number","title":"Redis Memory Limit Mb"},"redis_keys_count":{"type":"integer","title":"Redis Keys Count"},"redis_memory_days_to_limit":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Redis Memory Days To Limit"},"requests_per_minute_avg":{"type":"number","title":"Requests Per Minute Avg"},"requests_per_minute_peak":{"type":"number","title":"Requests Per Minute Peak"},"db_growth_rate_gb_per_day":{"type":"number","title":"Db Growth Rate Gb Per Day","default":0.0},"api_growth_rate_pct_per_week":{"type":"number","title":"Api Growth Rate Pct Per Week","default":0.0},"limit_warnings":{"items":{"type":"object"},"type":"array","title":"Limit Warnings"}},"type":"object","required":["db_connections_current","db_connections_max","db_storage_used_gb","db_storage_limit_gb","redis_memory_used_mb","redis_memory_limit_mb","redis_keys_count","requests_per_minute_avg","requests_per_minute_peak","limit_warnings"],"title":"InfraLimits","description":"Infrastructure limits and capacity."},"IngestRequest":{"properties":{"failure_match_id":{"type":"string","title":"Failure Match Id","description":"UUID of failure_match record"},"failure_payload":{"type":"object","title":"Failure Payload","description":"Error details: error_type, raw message, meta","example":{"error_type":"TIMEOUT","meta":{"skill":"http_call","tenant_id":"acme"},"raw":"Connection timed out after 30s"}},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source","description":"Source system identifier","default":"api"},"idempotency_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Idempotency Key","description":"Optional UUID for request deduplication"},"enqueue_evaluation":{"type":"boolean","title":"Enqueue Evaluation","description":"Whether to enqueue for background evaluation","default":true}},"type":"object","required":["failure_match_id","failure_payload"],"title":"IngestRequest","description":"Request to ingest a failure for recovery evaluation."},"IngestResponse":{"properties":{"candidate_id":{"type":"integer","title":"Candidate Id","description":"ID of the recovery candidate"},"status":{"type":"string","title":"Status","description":"accepted, duplicate, or error"},"message":{"type":"string","title":"Message","description":"Human-readable status message"},"is_duplicate":{"type":"boolean","title":"Is Duplicate","description":"Whether this was a duplicate request","default":false},"failure_match_id":{"type":"string","title":"Failure Match Id","description":"Echo of input failure_match_id"}},"type":"object","required":["candidate_id","status","message","failure_match_id"],"title":"IngestResponse","description":"Response from ingest endpoint."},"InstructionsResponse":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"api_base_url":{"type":"string","title":"Api Base Url"},"websocket_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Websocket Url"},"docs_url":{"type":"string","title":"Docs Url"},"example_code":{"type":"string","title":"Example Code"}},"type":"object","required":["tenant_id","api_base_url","websocket_url","docs_url","example_code"],"title":"InstructionsResponse","description":"SDK setup instructions response."},"IntegrationStatsResponse":{"properties":{"total_incidents":{"type":"integer","title":"Total Incidents"},"patterns_matched":{"type":"integer","title":"Patterns Matched"},"patterns_created":{"type":"integer","title":"Patterns Created"},"strong_matches":{"type":"integer","title":"Strong Matches"},"weak_matches":{"type":"integer","title":"Weak Matches"},"novel_patterns":{"type":"integer","title":"Novel Patterns"},"recoveries_suggested":{"type":"integer","title":"Recoveries Suggested"},"recoveries_applied":{"type":"integer","title":"Recoveries Applied"},"recoveries_rejected":{"type":"integer","title":"Recoveries Rejected"},"policies_generated":{"type":"integer","title":"Policies Generated"},"policies_in_shadow":{"type":"integer","title":"Policies In Shadow"},"policies_active":{"type":"integer","title":"Policies Active"},"routing_adjustments":{"type":"integer","title":"Routing Adjustments"},"adjustments_rolled_back":{"type":"integer","title":"Adjustments Rolled Back"},"avg_loop_completion_time_ms":{"type":"number","title":"Avg Loop Completion Time Ms"},"loop_completion_rate":{"type":"number","title":"Loop Completion Rate"},"checkpoints_pending":{"type":"integer","title":"Checkpoints Pending"},"checkpoints_resolved":{"type":"integer","title":"Checkpoints Resolved"},"period_hours":{"type":"integer","title":"Period Hours"}},"type":"object","required":["total_incidents","patterns_matched","patterns_created","strong_matches","weak_matches","novel_patterns","recoveries_suggested","recoveries_applied","recoveries_rejected","policies_generated","policies_in_shadow","policies_active","routing_adjustments","adjustments_rolled_back","avg_loop_completion_time_ms","loop_completion_rate","checkpoints_pending","checkpoints_resolved","period_hours"],"title":"IntegrationStatsResponse","description":"Statistics for integration loop."},"IntegrityStatus":{"type":"string","enum":["UNKNOWN","VERIFIED","DEGRADED","FAILED"],"title":"IntegrityStatus","description":"Integrity verification status."},"InvokeResponseRequest":{"properties":{"invoke_id":{"type":"string","title":"Invoke Id","description":"Invocation ID"},"response_payload":{"type":"object","title":"Response Payload","description":"Response data"}},"type":"object","required":["invoke_id","response_payload"],"title":"InvokeResponseRequest","description":"Request to respond to an invocation."},"JobResponse":{"properties":{"id":{"type":"string","title":"Id"},"status":{"type":"string","title":"Status"},"task":{"type":"string","title":"Task"},"progress":{"type":"object","title":"Progress"},"credits":{"type":"object","title":"Credits"},"created_at":{"type":"string","title":"Created At"},"started_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At"}},"type":"object","required":["id","status","task","progress","credits","created_at","started_at","completed_at"],"title":"JobResponse","description":"Job status response."},"KillSwitchAction":{"properties":{"reason":{"type":"string","title":"Reason"},"actor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Actor","default":"system"}},"type":"object","required":["reason"],"title":"KillSwitchAction","description":"Request schema for kill switch actions."},"KillSwitchStatus":{"properties":{"entity_type":{"type":"string","title":"Entity Type"},"entity_id":{"type":"string","title":"Entity Id"},"is_frozen":{"type":"boolean","title":"Is Frozen"},"frozen_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Frozen At"},"frozen_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Frozen By"},"freeze_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Freeze Reason"},"auto_triggered":{"type":"boolean","title":"Auto Triggered","default":false},"trigger_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trigger Type"}},"type":"object","required":["entity_type","entity_id","is_frozen"],"title":"KillSwitchStatus","description":"Response schema for kill switch status."},"LLMRunRecordDetailItem":{"properties":{"id":{"type":"string","title":"Id"},"run_id":{"type":"string","title":"Run Id"},"trace_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trace Id"},"provider":{"type":"string","title":"Provider"},"model":{"type":"string","title":"Model"},"input_tokens":{"type":"integer","title":"Input Tokens"},"output_tokens":{"type":"integer","title":"Output Tokens"},"cost_cents":{"type":"integer","title":"Cost Cents"},"execution_status":{"type":"string","title":"Execution Status"},"started_at":{"type":"string","format":"date-time","title":"Started At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"source":{"type":"string","title":"Source"},"is_synthetic":{"type":"boolean","title":"Is Synthetic"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"prompt_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Prompt Hash"},"response_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Response Hash"},"synthetic_scenario_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Synthetic Scenario Id"}},"type":"object","required":["id","run_id","trace_id","provider","model","input_tokens","output_tokens","cost_cents","execution_status","started_at","completed_at","source","is_synthetic","created_at","prompt_hash","response_hash","synthetic_scenario_id"],"title":"LLMRunRecordDetailItem","description":"LLM run record with hashes (O3)."},"LLMRunRecordItem":{"properties":{"id":{"type":"string","title":"Id"},"run_id":{"type":"string","title":"Run Id"},"trace_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trace Id"},"provider":{"type":"string","title":"Provider"},"model":{"type":"string","title":"Model"},"input_tokens":{"type":"integer","title":"Input Tokens"},"output_tokens":{"type":"integer","title":"Output Tokens"},"cost_cents":{"type":"integer","title":"Cost Cents"},"execution_status":{"type":"string","title":"Execution Status"},"started_at":{"type":"string","format":"date-time","title":"Started At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"source":{"type":"string","title":"Source"},"is_synthetic":{"type":"boolean","title":"Is Synthetic"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","run_id","trace_id","provider","model","input_tokens","output_tokens","cost_cents","execution_status","started_at","completed_at","source","is_synthetic","created_at"],"title":"LLMRunRecordItem","description":"Single LLM run record entry (O2)."},"LLMRunRecordsResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/LLMRunRecordItem"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["items","total","has_more"],"title":"LLMRunRecordsResponse","description":"Response envelope for LLM run records."},"LatencyBucket":{"type":"string","enum":["OK","SLOW","STALLED"],"title":"LatencyBucket","description":"Latency classification."},"LimitCostItem":{"properties":{"limit_id":{"type":"string","title":"Limit Id"},"name":{"type":"string","title":"Name"},"category":{"type":"string","title":"Category"},"max_value":{"type":"number","title":"Max Value"},"used_value":{"type":"number","title":"Used Value"},"remaining_value":{"type":"number","title":"Remaining Value"},"status":{"type":"string","title":"Status"}},"type":"object","required":["limit_id","name","category","max_value","used_value","remaining_value","status"],"title":"LimitCostItem","description":"Single limit with cost status."},"LimitSummary":{"properties":{"limit_id":{"type":"string","title":"Limit Id"},"name":{"type":"string","title":"Name"},"limit_category":{"type":"string","title":"Limit Category"},"limit_type":{"type":"string","title":"Limit Type"},"scope":{"type":"string","title":"Scope"},"enforcement":{"type":"string","title":"Enforcement"},"status":{"type":"string","title":"Status"},"max_value":{"type":"string","title":"Max Value"},"window_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Window Seconds"},"reset_period":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reset Period"},"integrity_status":{"type":"string","title":"Integrity Status"},"integrity_score":{"type":"string","title":"Integrity Score"},"breach_count_30d":{"type":"integer","title":"Breach Count 30D"},"last_breached_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Breached At"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["limit_id","name","limit_category","limit_type","scope","enforcement","status","max_value","window_seconds","reset_period","integrity_status","integrity_score","breach_count_30d","last_breached_at","created_at"],"title":"LimitSummary","description":"O2 Result Shape (EXACT from contract).\nNo extra fields. No missing fields. No renaming."},"LimitsO2Response":{"properties":{"items":{"items":{"$ref":"#/components/schemas/LimitSummary"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["items","total","has_more"],"title":"LimitsO2Response","description":"Response envelope (contract mandates this structure).\nBackend MUST return this shape even for empty results."},"LockRequest":{"properties":{"holder":{"type":"string","title":"Holder","description":"Lock holder identity"},"action":{"type":"string","title":"Action","description":"acquire/release/extend","default":"acquire"},"ttl":{"type":"integer","title":"Ttl","description":"Lock TTL in seconds","default":30}},"type":"object","required":["holder"],"title":"LockRequest","description":"Request for lock operation."},"LoopStatusResponse":{"properties":{"loop_id":{"type":"string","title":"Loop Id"},"incident_id":{"type":"string","title":"Incident Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"current_stage":{"type":"string","title":"Current Stage"},"stages_completed":{"items":{"type":"string"},"type":"array","title":"Stages Completed"},"stages_failed":{"items":{"type":"string"},"type":"array","title":"Stages Failed"},"total_stages":{"type":"integer","title":"Total Stages","default":5},"completion_pct":{"type":"number","title":"Completion Pct"},"is_complete":{"type":"boolean","title":"Is Complete"},"is_blocked":{"type":"boolean","title":"Is Blocked"},"failure_state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Failure State"},"pending_checkpoints":{"items":{"type":"string"},"type":"array","title":"Pending Checkpoints","default":[]},"narrative":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Narrative"}},"type":"object","required":["loop_id","incident_id","tenant_id","current_stage","stages_completed","stages_failed","completion_pct","is_complete","is_blocked"],"title":"LoopStatusResponse","description":"Response for loop status endpoint."},"MemoryDeclaration":{"properties":{"mode":{"type":"string","title":"Mode"},"description":{"type":"string","title":"Description"}},"type":"object","required":["mode","description"],"title":"MemoryDeclaration","description":"Memory mode declaration."},"MemoryPinCreate":{"properties":{"tenant_id":{"type":"string","maxLength":256,"minLength":1,"title":"Tenant Id","description":"Tenant identifier"},"key":{"type":"string","maxLength":512,"minLength":1,"title":"Key","description":"Pin key (unique per tenant)"},"value":{"type":"object","title":"Value","description":"Pin value (JSON object)"},"source":{"type":"string","maxLength":64,"title":"Source","description":"Source of the pin (api, seed, import)","default":"api"},"ttl_seconds":{"anyOf":[{"type":"integer","maximum":31536000.0,"minimum":0.0},{"type":"null"}],"title":"Ttl Seconds","description":"TTL in seconds (max 1 year)"}},"type":"object","required":["tenant_id","key","value"],"title":"MemoryPinCreate","description":"Schema for creating/upserting a memory pin."},"MemoryPinDeleteResponse":{"properties":{"deleted":{"type":"boolean","title":"Deleted"},"key":{"type":"string","title":"Key"},"tenant_id":{"type":"string","title":"Tenant Id"}},"type":"object","required":["deleted","key","tenant_id"],"title":"MemoryPinDeleteResponse","description":"Schema for delete response."},"MemoryPinListResponse":{"properties":{"pins":{"items":{"$ref":"#/components/schemas/MemoryPinResponse"},"type":"array","title":"Pins"},"total":{"type":"integer","title":"Total"},"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"}},"type":"object","required":["pins","total","limit","offset"],"title":"MemoryPinListResponse","description":"Schema for listing memory pins."},"MemoryPinResponse":{"properties":{"id":{"type":"integer","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"key":{"type":"string","title":"Key"},"value":{"type":"object","title":"Value"},"source":{"type":"string","title":"Source"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"ttl_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Ttl Seconds"},"expires_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Expires At"}},"type":"object","required":["id","tenant_id","key","value","source","created_at","updated_at"],"title":"MemoryPinResponse","description":"Schema for memory pin response."},"MemoryResponse":{"properties":{"id":{"type":"string","title":"Id"},"text":{"type":"string","title":"Text"},"meta":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meta"},"created_at":{"type":"string","title":"Created At"}},"type":"object","required":["id","text","meta","created_at"],"title":"MemoryResponse"},"MismatchReport":{"properties":{"step_index":{"type":"integer","title":"Step Index","description":"Index of the mismatched step"},"reason":{"type":"string","title":"Reason","description":"Reason for mismatch (output_mismatch, hash_mismatch, etc.)"},"expected_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expected Hash","description":"Expected output hash"},"actual_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Actual Hash","description":"Actual output hash"},"details":{"type":"object","title":"Details","description":"Additional details"}},"type":"object","required":["step_index","reason"],"title":"MismatchReport","description":"Report a replay mismatch for operator review."},"MismatchResponse":{"properties":{"mismatch_id":{"type":"string","title":"Mismatch Id"},"trace_id":{"type":"string","title":"Trace Id"},"status":{"type":"string","title":"Status"},"notified":{"type":"string","title":"Notified"},"issue_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Issue Url"}},"type":"object","required":["mismatch_id","trace_id","status","notified"],"title":"MismatchResponse","description":"Response after reporting a mismatch."},"NextAction":{"properties":{"action_id":{"type":"string","title":"Action Id","description":"Action identifier (console maps to route)"},"action_type":{"type":"string","title":"Action Type","description":"Action category (tenant_bootstrap, credential_setup, etc.)"}},"type":"object","required":["action_id","action_type"],"title":"NextAction","description":"Next required action for onboarding progression (console-agnostic)."},"OnboardingStatusResponse":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id","description":"Tenant identifier"},"current_state":{"type":"string","title":"Current State","description":"Current onboarding state name"},"state_value":{"type":"integer","title":"State Value","description":"Numeric state value (0-4)"},"is_complete":{"type":"boolean","title":"Is Complete","description":"Whether onboarding is complete"},"step_index":{"type":"integer","title":"Step Index","description":"Current step (0-based index)"},"total_steps":{"type":"integer","title":"Total Steps","description":"Total onboarding steps"},"next_action":{"anyOf":[{"$ref":"#/components/schemas/NextAction"},{"type":"null"}],"description":"Next required action"},"allowed_capabilities":{"items":{"type":"string"},"type":"array","title":"Allowed Capabilities","description":"Capabilities allowed at current state"},"blocked_capabilities":{"items":{"type":"string"},"type":"array","title":"Blocked Capabilities","description":"Capabilities blocked at current state"},"timestamp":{"type":"string","title":"Timestamp","description":"Response timestamp"}},"type":"object","required":["tenant_id","current_state","state_value","is_complete","step_index","total_steps","timestamp"],"title":"OnboardingStatusResponse","description":"Complete onboarding status for a tenant (console-agnostic)."},"OnboardingVerifyRequest":{"properties":{"test_type":{"type":"string","title":"Test Type","default":"guardrail_block"},"trigger_alert":{"type":"boolean","title":"Trigger Alert","default":true}},"type":"object","title":"OnboardingVerifyRequest","description":"Request for onboarding safety verification."},"OpsEvent":{"properties":{"event_id":{"type":"string","title":"Event Id"},"timestamp":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"},"event_type":{"type":"string","title":"Event Type"},"entity_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Entity Type"},"entity_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Entity Id"},"severity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Severity"},"latency_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Latency Ms"},"cost_usd":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cost Usd"},"metadata":{"type":"object","title":"Metadata","default":{}}},"type":"object","required":["event_id","event_type"],"title":"OpsEvent","description":"Single ops event from event stream."},"OpsEventListResponse":{"properties":{"events":{"items":{"$ref":"#/components/schemas/OpsEvent"},"type":"array","title":"Events"},"total":{"type":"integer","title":"Total"},"window_hours":{"type":"integer","title":"Window Hours"}},"type":"object","required":["events","total","window_hours"],"title":"OpsEventListResponse","description":"Response for /ops/events endpoint."},"OutcomeItem":{"properties":{"category":{"type":"string","title":"Category"},"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["category","status","message"],"title":"OutcomeItem","description":"Single outcome item."},"OutcomeReconciliation":{"properties":{"run_id":{"type":"string","title":"Run Id"},"completed":{"type":"boolean","title":"Completed"},"outcome_count":{"type":"integer","title":"Outcome Count"},"outcomes":{"items":{"$ref":"#/components/schemas/OutcomeItem"},"type":"array","title":"Outcomes"},"duration_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Ms"},"tokens_used":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Tokens Used"},"cost_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Cost Cents"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"}},"type":"object","required":["run_id","completed","outcome_count","outcomes"],"title":"OutcomeReconciliation","description":"Complete outcome reconciliation for customer visibility.\n\nThis is what the customer sees AFTER execution completes.\nDecomposed results, never a single success flag."},"Pagination":{"properties":{"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"},"next_offset":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Next Offset"}},"type":"object","required":["limit","offset"],"title":"Pagination","description":"Pagination metadata."},"PatternsResponse":{"properties":{"patterns":{"items":{"$ref":"#/components/schemas/UsagePattern"},"type":"array","title":"Patterns"},"analysis_window_hours":{"type":"integer","title":"Analysis Window Hours","default":24},"generated_at":{"type":"string","format":"date-time","title":"Generated At"},"note":{"type":"string","title":"Note","default":"Pattern analysis - Founder only"}},"type":"object","required":["generated_at"],"title":"PatternsResponse","description":"Usage pattern analysis."},"PlanStep":{"properties":{"skill":{"type":"string","title":"Skill","description":"Skill ID to execute"},"params":{"type":"object","title":"Params","description":"Parameters for the skill"},"iterations":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Iterations","description":"Number of times to execute this step","default":1}},"type":"object","required":["skill"],"title":"PlanStep","description":"A single step in a plan to simulate."},"PlaybookAction":{"properties":{"step":{"type":"integer","title":"Step"},"type":{"type":"string","title":"Type"},"action":{"type":"string","title":"Action"},"timing":{"type":"string","title":"Timing"},"talk_track":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Talk Track"},"template":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Template"}},"type":"object","required":["step","type","action","timing"],"title":"PlaybookAction","description":"A single step in a founder playbook."},"PlaybookDetail":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"trigger_conditions":{"items":{"type":"string"},"type":"array","title":"Trigger Conditions"},"risk_level":{"type":"string","title":"Risk Level"},"actions":{"items":{"$ref":"#/components/schemas/PlaybookAction"},"type":"array","title":"Actions"},"success_metric":{"type":"string","title":"Success Metric"},"notes":{"type":"string","title":"Notes"}},"type":"object","required":["id","name","trigger_conditions","risk_level","actions","success_metric","notes"],"title":"PlaybookDetail","description":"A founder playbook with signal  action mapping."},"PolicyDeclaration":{"properties":{"posture":{"type":"string","title":"Posture"},"description":{"type":"string","title":"Description"},"active_policies":{"items":{"type":"string"},"type":"array","title":"Active Policies"}},"type":"object","required":["posture","description"],"title":"PolicyDeclaration","description":"Policy posture declaration."},"PolicyEncodingResponse":{"properties":{"policy_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Policy Id"},"policy_version":{"type":"integer","title":"Policy Version"},"hierarchy_level":{"type":"integer","title":"Hierarchy Level"}},"type":"object","required":["policy_id","policy_version","hierarchy_level"],"title":"PolicyEncodingResponse","description":"Policy slot encoding."},"PolicyEvalRequest":{"properties":{"skill_id":{"type":"string","title":"Skill Id","description":"Skill to evaluate"},"tenant_id":{"type":"string","title":"Tenant Id","description":"Tenant context"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id","description":"Agent context"},"payload":{"type":"object","title":"Payload","description":"Skill parameters"},"policy_version":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Policy Version","description":"Specific policy version to use"},"simulate_cost":{"type":"boolean","title":"Simulate Cost","description":"Include cost simulation","default":true}},"type":"object","required":["skill_id","tenant_id"],"title":"PolicyEvalRequest","description":"Request for policy sandbox evaluation."},"PolicyEvalResponse":{"properties":{"decision":{"type":"string","title":"Decision","description":"allow, deny, or requires_approval"},"reasons":{"items":{"type":"string"},"type":"array","title":"Reasons","description":"Reasons for decision"},"simulated_cost_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Simulated Cost Cents","description":"Estimated cost"},"policy_version":{"type":"string","title":"Policy Version","description":"Policy version used"},"approval_level_required":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Approval Level Required","description":"Required approval level if denied"},"violations":{"items":{"type":"object"},"type":"array","title":"Violations","description":"Policy violations"},"timestamp":{"type":"string","title":"Timestamp","description":"Evaluation timestamp"}},"type":"object","required":["decision","policy_version","timestamp"],"title":"PolicyEvalResponse","description":"Response from policy sandbox evaluation."},"PolicyEvaluation":{"properties":{"policy":{"type":"string","title":"Policy"},"result":{"type":"string","title":"Result"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"expected_behavior":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expected Behavior"},"actual_behavior":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Actual Behavior"}},"type":"object","required":["policy","result"],"title":"PolicyEvaluation","description":"Individual policy evaluation result."},"PolicyEvaluationResult":{"properties":{"request_id":{"type":"string","title":"Request Id"},"decision":{"$ref":"#/components/schemas/app__policy__models__PolicyDecision"},"decision_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Decision Reason"},"policies_evaluated":{"type":"integer","title":"Policies Evaluated","default":0},"rules_matched":{"items":{"type":"string"},"type":"array","title":"Rules Matched"},"evaluation_ms":{"type":"number","title":"Evaluation Ms","default":0.0},"modifications":{"items":{"$ref":"#/components/schemas/PolicyModification"},"type":"array","title":"Modifications"},"violations":{"items":{"$ref":"#/components/schemas/PolicyViolation"},"type":"array","title":"Violations"},"evaluated_at":{"type":"string","format":"date-time","title":"Evaluated At"},"policy_version":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Policy Version"}},"type":"object","required":["request_id","decision"],"title":"PolicyEvaluationResult","description":"Result of policy evaluation."},"PolicyInfoResponse":{"properties":{"version":{"type":"string","title":"Version"},"hash":{"type":"string","title":"Hash"},"loaded_at":{"type":"string","title":"Loaded At"},"roles":{"items":{"type":"string"},"type":"array","title":"Roles"},"resources":{"items":{"type":"string"},"type":"array","title":"Resources"},"enforce_mode":{"type":"boolean","title":"Enforce Mode"},"fail_open":{"type":"boolean","title":"Fail Open"}},"type":"object","required":["version","hash","loaded_at","roles","resources","enforce_mode","fail_open"],"title":"PolicyInfoResponse","description":"Current policy information."},"PolicyMetrics":{"properties":{"total_evaluations":{"type":"integer","title":"Total Evaluations"},"total_blocks":{"type":"integer","title":"Total Blocks"},"total_allows":{"type":"integer","title":"Total Allows"},"total_modifications":{"type":"integer","title":"Total Modifications"},"block_rate":{"type":"number","title":"Block Rate"},"avg_evaluation_ms":{"type":"number","title":"Avg Evaluation Ms"},"violations_by_type":{"additionalProperties":{"type":"integer"},"type":"object","title":"Violations By Type"},"evaluations_by_action":{"additionalProperties":{"type":"integer"},"type":"object","title":"Evaluations By Action"}},"type":"object","required":["total_evaluations","total_blocks","total_allows","total_modifications","block_rate","avg_evaluation_ms","violations_by_type","evaluations_by_action"],"title":"PolicyMetrics","description":"Metrics from the policy engine."},"PolicyModification":{"properties":{"parameter":{"type":"string","title":"Parameter"},"original_value":{"title":"Original Value"},"modified_value":{"title":"Modified Value"},"reason":{"type":"string","title":"Reason"}},"type":"object","required":["parameter","original_value","modified_value","reason"],"title":"PolicyModification","description":"Modification applied to an action by policy engine."},"PolicyRuleSummary":{"properties":{"rule_id":{"type":"string","title":"Rule Id"},"name":{"type":"string","title":"Name"},"enforcement_mode":{"type":"string","title":"Enforcement Mode"},"scope":{"type":"string","title":"Scope"},"source":{"type":"string","title":"Source"},"status":{"type":"string","title":"Status"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"created_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created By"},"integrity_status":{"type":"string","title":"Integrity Status"},"integrity_score":{"type":"string","title":"Integrity Score"},"trigger_count_30d":{"type":"integer","title":"Trigger Count 30D"},"last_triggered_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Triggered At"}},"type":"object","required":["rule_id","name","enforcement_mode","scope","source","status","created_at","created_by","integrity_status","integrity_score","trigger_count_30d","last_triggered_at"],"title":"PolicyRuleSummary","description":"O2 Result Shape (EXACT from contract).\nNo extra fields. No missing fields. No renaming."},"PolicyState":{"properties":{"total_policies":{"type":"integer","title":"Total Policies","default":0},"active_policies":{"type":"integer","title":"Active Policies","default":0},"total_evaluations_today":{"type":"integer","title":"Total Evaluations Today","default":0},"total_violations_today":{"type":"integer","title":"Total Violations Today","default":0},"block_rate":{"type":"number","title":"Block Rate","default":0.0},"compliance_violations":{"type":"integer","title":"Compliance Violations","default":0},"ethical_violations":{"type":"integer","title":"Ethical Violations","default":0},"risk_breaches":{"type":"integer","title":"Risk Breaches","default":0},"safety_triggers":{"type":"integer","title":"Safety Triggers","default":0},"business_violations":{"type":"integer","title":"Business Violations","default":0},"risk_ceilings_active":{"type":"integer","title":"Risk Ceilings Active","default":0},"risk_ceilings_breached":{"type":"integer","title":"Risk Ceilings Breached","default":0},"evaluated_at":{"type":"string","format":"date-time","title":"Evaluated At"}},"type":"object","title":"PolicyState","description":"Current state of the policy layer."},"PolicyStatusModel":{"properties":{"posture":{"type":"string","title":"Posture","default":"advisory"},"checked":{"type":"boolean","title":"Checked","default":false},"passed":{"type":"boolean","title":"Passed","default":true},"violations":{"items":{"type":"string"},"type":"array","title":"Violations"},"warnings":{"items":{"type":"string"},"type":"array","title":"Warnings"},"service_available":{"type":"boolean","title":"Service Available","default":true}},"type":"object","title":"PolicyStatusModel","description":"Phase 5B: Policy pre-check status for PRE-RUN declaration."},"PolicyType":{"type":"string","enum":["cost","capability","resource","rate_limit"],"title":"PolicyType","description":"Types of policies that can be evaluated."},"PolicyViolation":{"properties":{"id":{"type":"string","title":"Id"},"violation_type":{"$ref":"#/components/schemas/ViolationType"},"policy_name":{"type":"string","title":"Policy Name"},"severity":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Severity","default":0.5},"description":{"type":"string","title":"Description"},"evidence":{"type":"object","title":"Evidence"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"},"action_attempted":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action Attempted"},"routed_to_governor":{"type":"boolean","title":"Routed To Governor","default":false},"governor_action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Governor Action"},"detected_at":{"type":"string","format":"date-time","title":"Detected At"}},"type":"object","required":["violation_type","policy_name","description"],"title":"PolicyViolation","description":"A policy violation record."},"PreRunDeclaration":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"goal":{"type":"string","title":"Goal"},"stages":{"items":{"$ref":"#/components/schemas/StageDeclaration"},"type":"array","title":"Stages"},"stage_count":{"type":"integer","title":"Stage Count"},"cost":{"$ref":"#/components/schemas/CostDeclaration"},"budget":{"$ref":"#/components/schemas/BudgetDeclaration"},"policy":{"$ref":"#/components/schemas/PolicyDeclaration"},"memory":{"$ref":"#/components/schemas/MemoryDeclaration"},"estimation_methodology":{"allOf":[{"$ref":"#/components/schemas/EstimationMethodology"}],"description":"Disclosure of how estimates were derived (PIN-254 C3 fix)"},"requires_acknowledgement":{"type":"boolean","title":"Requires Acknowledgement","default":true},"declaration_id":{"type":"string","title":"Declaration Id"},"declared_at":{"type":"string","format":"date-time","title":"Declared At"}},"type":"object","required":["agent_id","goal","stages","stage_count","cost","budget","policy","memory","declaration_id","declared_at"],"title":"PreRunDeclaration","description":"Complete PRE-RUN declaration for customer visibility.\n\nThis is what the customer sees BEFORE execution starts.\nExecution cannot proceed without acknowledgement."},"PredictionDetailResponse":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"prediction_type":{"type":"string","title":"Prediction Type"},"subject_type":{"type":"string","title":"Subject Type"},"subject_id":{"type":"string","title":"Subject Id"},"confidence_score":{"type":"number","title":"Confidence Score"},"prediction_value":{"type":"object","title":"Prediction Value"},"contributing_factors":{"items":{},"type":"array","title":"Contributing Factors"},"valid_until":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Valid Until"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"is_advisory":{"type":"boolean","title":"Is Advisory"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"is_valid":{"type":"boolean","title":"Is Valid"}},"type":"object","required":["id","tenant_id","prediction_type","subject_type","subject_id","confidence_score","prediction_value","contributing_factors","valid_until","created_at","is_advisory","notes","is_valid"],"title":"PredictionDetailResponse","description":"Detailed prediction event record."},"PredictionListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"},"by_type":{"type":"object","title":"By Type"},"by_subject_type":{"type":"object","title":"By Subject Type"},"items":{"items":{"$ref":"#/components/schemas/PredictionSummaryResponse"},"type":"array","title":"Items"}},"type":"object","required":["total","limit","offset","by_type","by_subject_type","items"],"title":"PredictionListResponse","description":"Paginated list of predictions."},"PredictionSummaryResponse":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"prediction_type":{"type":"string","title":"Prediction Type"},"subject_type":{"type":"string","title":"Subject Type"},"subject_id":{"type":"string","title":"Subject Id"},"confidence_score":{"type":"number","title":"Confidence Score"},"is_advisory":{"type":"boolean","title":"Is Advisory"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"valid_until":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Valid Until"},"is_valid":{"type":"boolean","title":"Is Valid"}},"type":"object","required":["id","tenant_id","prediction_type","subject_type","subject_id","confidence_score","is_advisory","created_at","valid_until","is_valid"],"title":"PredictionSummaryResponse","description":"Summary of a prediction event."},"PreventionTimelineResponse":{"properties":{"incident_id":{"type":"string","title":"Incident Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"timeline":{"items":{"$ref":"#/components/schemas/TimelineEventResponse"},"type":"array","title":"Timeline"},"summary":{"type":"object","title":"Summary"},"narrative":{"type":"string","title":"Narrative"}},"type":"object","required":["incident_id","tenant_id","timeline","summary","narrative"],"title":"PreventionTimelineResponse","description":"Response for prevention timeline endpoint."},"ProposalDetailResponse":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"proposal_name":{"type":"string","title":"Proposal Name"},"proposal_type":{"type":"string","title":"Proposal Type"},"status":{"type":"string","title":"Status"},"rationale":{"type":"string","title":"Rationale"},"proposed_rule":{"type":"object","title":"Proposed Rule"},"triggering_feedback_ids":{"items":{},"type":"array","title":"Triggering Feedback Ids"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"reviewed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reviewed At"},"reviewed_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reviewed By"},"review_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Review Notes"},"effective_from":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Effective From"},"versions":{"items":{"type":"object"},"type":"array","title":"Versions"}},"type":"object","required":["id","tenant_id","proposal_name","proposal_type","status","rationale","proposed_rule","triggering_feedback_ids","created_at","reviewed_at","reviewed_by","review_notes","effective_from","versions"],"title":"ProposalDetailResponse","description":"Detailed policy proposal record."},"ProposalListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"},"by_status":{"type":"object","title":"By Status"},"by_type":{"type":"object","title":"By Type"},"items":{"items":{"$ref":"#/components/schemas/ProposalSummaryResponse"},"type":"array","title":"Items"}},"type":"object","required":["total","limit","offset","by_status","by_type","items"],"title":"ProposalListResponse","description":"Paginated list of policy proposals."},"ProposalSummaryResponse":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"proposal_name":{"type":"string","title":"Proposal Name"},"proposal_type":{"type":"string","title":"Proposal Type"},"status":{"type":"string","title":"Status"},"rationale":{"type":"string","title":"Rationale"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"reviewed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reviewed At"},"reviewed_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reviewed By"},"effective_from":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Effective From"},"provenance_count":{"type":"integer","title":"Provenance Count"}},"type":"object","required":["id","tenant_id","proposal_name","proposal_type","status","rationale","created_at","reviewed_at","reviewed_by","effective_from","provenance_count"],"title":"ProposalSummaryResponse","description":"Summary of a policy proposal."},"Provenance":{"properties":{"derived_from":{"items":{"type":"string"},"type":"array","title":"Derived From"},"aggregation":{"type":"string","title":"Aggregation"},"generated_at":{"type":"string","title":"Generated At"}},"type":"object","required":["derived_from","aggregation","generated_at"],"title":"Provenance","description":"Provenance metadata for interpretation traceability."},"ProvenanceResponse":{"properties":{"id":{"type":"string","title":"Id"},"run_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Run Id"},"agent_id":{"type":"string","title":"Agent Id"},"goal":{"type":"string","title":"Goal"},"status":{"type":"string","title":"Status"},"plan":{"type":"object","title":"Plan"},"tool_calls":{"items":{"type":"object"},"type":"array","title":"Tool Calls"},"attempts":{"type":"integer","title":"Attempts"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"created_at":{"type":"string","title":"Created At"},"started_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At"},"duration_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Duration Ms"}},"type":"object","required":["id","run_id","agent_id","goal","status","plan","tool_calls","attempts","error_message","created_at","started_at","completed_at","duration_ms"],"title":"ProvenanceResponse"},"ProviderType":{"type":"string","enum":["openai","anthropic","internal"],"title":"ProviderType","description":"LLM provider."},"ProxyCallDetail":{"properties":{"id":{"type":"string","title":"Id"},"endpoint":{"type":"string","title":"Endpoint"},"model":{"type":"string","title":"Model"},"request_hash":{"type":"string","title":"Request Hash"},"request_body":{"type":"object","title":"Request Body"},"response_body":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Response Body"},"status_code":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Status Code"},"error_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Code"},"was_blocked":{"type":"boolean","title":"Was Blocked"},"block_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Block Reason"},"policy_decisions":{"items":{"type":"object"},"type":"array","title":"Policy Decisions","default":[]},"cost_cents":{"type":"number","title":"Cost Cents"},"input_tokens":{"type":"integer","title":"Input Tokens"},"output_tokens":{"type":"integer","title":"Output Tokens"},"latency_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Latency Ms"},"replay_eligible":{"type":"boolean","title":"Replay Eligible"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","endpoint","model","request_hash","request_body","was_blocked","cost_cents","input_tokens","output_tokens","replay_eligible","created_at"],"title":"ProxyCallDetail","description":"Detailed view of a proxy call for replay."},"PruneTemporalMetricsRequest":{"properties":{"retention_hours":{"type":"integer","title":"Retention Hours","default":168},"compact_older_than_hours":{"type":"integer","title":"Compact Older Than Hours","default":24},"max_events_per_policy":{"type":"integer","title":"Max Events Per Policy","default":10000}},"type":"object","title":"PruneTemporalMetricsRequest","description":"Request to prune temporal metrics."},"QueryRequest":{"properties":{"query_type":{"type":"string","title":"Query Type","description":"Type of query to execute"},"params":{"type":"object","title":"Params","description":"Query-specific parameters"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id","description":"Agent ID for context"},"run_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Run Id","description":"Run ID for context"}},"type":"object","required":["query_type"],"title":"QueryRequest","description":"Request to query runtime state."},"QueryResponse":{"properties":{"query_type":{"type":"string","title":"Query Type"},"result":{"type":"object","title":"Result"},"supported_queries":{"items":{"type":"string"},"type":"array","title":"Supported Queries"}},"type":"object","required":["query_type","result","supported_queries"],"title":"QueryResponse","description":"Response from runtime query."},"QuotaCheckResponse":{"properties":{"allowed":{"type":"boolean","title":"Allowed"},"reason":{"type":"string","title":"Reason"},"quota_name":{"type":"string","title":"Quota Name"},"current":{"type":"integer","title":"Current"},"limit":{"type":"integer","title":"Limit"}},"type":"object","required":["allowed","reason","quota_name","current","limit"],"title":"QuotaCheckResponse","description":"Quota check response."},"RegisterAgentRequest":{"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"Agent type/name"},"instance_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Instance Id","description":"Instance ID"},"job_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Job Id","description":"Associated job"},"capabilities":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Capabilities"}},"type":"object","required":["agent_id"],"title":"RegisterAgentRequest","description":"Request to register an agent."},"ReloadResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"previous_hash":{"type":"string","title":"Previous Hash"},"new_hash":{"type":"string","title":"New Hash"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["success","message","previous_hash","new_hash","timestamp"],"title":"ReloadResponse","description":"Policy reload response."},"ReplayCallSnapshot":{"properties":{"timestamp":{"type":"string","title":"Timestamp"},"model_id":{"type":"string","title":"Model Id"},"policy_decisions":{"items":{"$ref":"#/components/schemas/app__api__guard__PolicyDecision"},"type":"array","title":"Policy Decisions"},"response_hash":{"type":"string","title":"Response Hash"},"tokens_used":{"type":"integer","title":"Tokens Used"},"cost_cents":{"type":"integer","title":"Cost Cents"}},"type":"object","required":["timestamp","model_id","policy_decisions","response_hash","tokens_used","cost_cents"],"title":"ReplayCallSnapshot","description":"Call snapshot for replay comparison."},"ReplayCategory":{"type":"string","enum":["input","decision","action","side_effect"],"title":"ReplayCategory","description":"Categories for replay data grouping."},"ReplayCertificate":{"properties":{"certificate_id":{"type":"string","title":"Certificate Id"},"certificate_type":{"type":"string","title":"Certificate Type"},"issued_at":{"type":"string","title":"Issued At"},"valid_until":{"type":"string","title":"Valid Until"},"validation_passed":{"type":"boolean","title":"Validation Passed"},"signature":{"type":"string","title":"Signature"},"pem_format":{"type":"string","title":"Pem Format"}},"type":"object","required":["certificate_id","certificate_type","issued_at","valid_until","validation_passed","signature","pem_format"],"title":"ReplayCertificate","description":"M23: Cryptographic certificate proving deterministic replay."},"ReplayItem":{"properties":{"id":{"type":"string","title":"Id"},"timestamp":{"type":"string","title":"Timestamp"},"category":{"$ref":"#/components/schemas/ReplayCategory"},"label":{"type":"string","title":"Label"},"summary":{"type":"string","title":"Summary"},"data":{"type":"object","title":"Data"},"duration_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Ms"},"cost_cents":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cost Cents"}},"type":"object","required":["id","timestamp","category","label","summary"],"title":"ReplayItem","description":"Single item in replay timeline."},"ReplayResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether replay completed successfully"},"run_id":{"type":"string","title":"Run Id","description":"New run ID for this replay"},"original_run_id":{"type":"string","title":"Original Run Id","description":"Original run that was replayed"},"parity_check":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Parity Check","description":"Parity verification result"},"divergence_point":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Divergence Point","description":"Step where behavior diverged"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"Error message if replay failed"}},"type":"object","required":["success","run_id","original_run_id"],"title":"ReplayResponse","description":"Response from replay operation."},"ReplaySliceResponse":{"properties":{"incident_id":{"type":"string","title":"Incident Id"},"incident_title":{"type":"string","title":"Incident Title"},"incident_severity":{"type":"string","title":"Incident Severity"},"incident_status":{"type":"string","title":"Incident Status"},"window_start":{"type":"string","title":"Window Start"},"window_end":{"type":"string","title":"Window End"},"window_seconds":{"type":"integer","title":"Window Seconds"},"inputs":{"items":{"$ref":"#/components/schemas/ReplayItem"},"type":"array","title":"Inputs"},"decisions":{"items":{"$ref":"#/components/schemas/ReplayItem"},"type":"array","title":"Decisions"},"actions":{"items":{"$ref":"#/components/schemas/ReplayItem"},"type":"array","title":"Actions"},"side_effects":{"items":{"$ref":"#/components/schemas/ReplayItem"},"type":"array","title":"Side Effects"},"timeline":{"items":{"$ref":"#/components/schemas/ReplayItem"},"type":"array","title":"Timeline"},"total_items":{"type":"integer","title":"Total Items"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"has_more":{"type":"boolean","title":"Has More"},"is_immutable":{"type":"boolean","title":"Is Immutable","default":true},"replay_version":{"type":"string","title":"Replay Version","default":"1.0"}},"type":"object","required":["incident_id","incident_title","incident_severity","incident_status","window_start","window_end","window_seconds","total_items","page","page_size","has_more"],"title":"ReplaySliceResponse","description":"Paginated, grouped replay slice response."},"RerunRequest":{"properties":{"run_id":{"type":"string","title":"Run Id"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason","default":"manual_retry"}},"type":"object","required":["run_id"],"title":"RerunRequest"},"RerunResponse":{"properties":{"status":{"type":"string","title":"Status"},"run_id":{"type":"string","title":"Run Id"},"original_status":{"type":"string","title":"Original Status"},"reason":{"type":"string","title":"Reason"},"warning":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Warning"}},"type":"object","required":["status","run_id","original_status","reason"],"title":"RerunResponse"},"ResolveCheckpointRequest":{"properties":{"resolution":{"type":"string","title":"Resolution","description":"One of the available options"}},"type":"object","required":["resolution"],"title":"ResolveCheckpointRequest","description":"Request to resolve a checkpoint."},"ResolveConflictRequest":{"properties":{"resolution":{"type":"string","title":"Resolution"},"resolved_by":{"type":"string","title":"Resolved By","default":"system"}},"type":"object","required":["resolution"],"title":"ResolveConflictRequest","description":"Request to resolve a policy conflict."},"RetryEntryResponse":{"properties":{"time":{"type":"string","title":"Time"},"reason":{"type":"string","title":"Reason"},"attempt":{"type":"integer","title":"Attempt"},"outcome":{"type":"string","title":"Outcome"},"risk_change":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Risk Change"}},"type":"object","required":["time","reason","attempt","outcome"],"title":"RetryEntryResponse","description":"Single retry entry."},"RetryRequest":{"properties":{"run_id":{"type":"string","title":"Run Id","description":"ID of the failed run to retry"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason","description":"Reason for retry","default":"manual_retry"}},"type":"object","required":["run_id"],"title":"RetryRequest","description":"Request to retry a failed worker run (PB-S1 compliant)."},"RetryResponse":{"properties":{"original_run_id":{"type":"string","title":"Original Run Id","description":"ID of the original failed run (unchanged)"},"retry_run_id":{"type":"string","title":"Retry Run Id","description":"ID of the new retry run"},"attempt":{"type":"integer","title":"Attempt","description":"Attempt number of the retry"},"status":{"type":"string","title":"Status","description":"Status of the retry run (queued)"},"original_status":{"type":"string","title":"Original Status","description":"Status of the original run (unchanged)"},"reason":{"type":"string","title":"Reason"}},"type":"object","required":["original_run_id","retry_run_id","attempt","status","original_status","reason"],"title":"RetryResponse","description":"Response from retry operation (PB-S1 compliant)."},"RetryStageRequest":{"properties":{"stage":{"type":"string","title":"Stage","description":"Stage to retry"}},"type":"object","required":["stage"],"title":"RetryStageRequest","description":"Request to retry a failed stage."},"RevenueRisk":{"properties":{"mrr_estimate_usd":{"type":"number","title":"Mrr Estimate Usd"},"daily_api_revenue_usd":{"type":"number","title":"Daily Api Revenue Usd"},"at_risk_tenants":{"type":"integer","title":"At Risk Tenants"},"silent_churn_count":{"type":"integer","title":"Silent Churn Count"},"high_risk_count":{"type":"integer","title":"High Risk Count"},"revenue_alerts":{"items":{"type":"object"},"type":"array","title":"Revenue Alerts"},"estimation_basis":{"allOf":[{"$ref":"#/components/schemas/EstimationBasis"}],"description":"Disclosure of how revenue estimates were derived (PIN-254 C3 fix)"}},"type":"object","required":["mrr_estimate_usd","daily_api_revenue_usd","at_risk_tenants","silent_churn_count","high_risk_count","revenue_alerts"],"title":"RevenueRisk","description":"Revenue and risk metrics."},"RevertLoopRequest":{"properties":{"reason":{"type":"string","title":"Reason","description":"Reason for revert"}},"type":"object","required":["reason"],"title":"RevertLoopRequest","description":"Request to revert a loop."},"ReviewDecisionRequest":{"properties":{"decision":{"type":"string","pattern":"^(APPROVE|REJECT)$","title":"Decision","description":"Review decision: 'APPROVE' or 'REJECT'"},"comment":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Comment","description":"Optional comment explaining the decision"},"activation_window_hours":{"type":"integer","maximum":168.0,"minimum":1.0,"title":"Activation Window Hours","description":"Hours until activation window expires (for APPROVE only)","default":24}},"type":"object","required":["decision"],"title":"ReviewDecisionRequest","description":"Request body for contract review decision."},"RiskCeilingUpdate":{"properties":{"max_value":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Max Value"},"window_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Window Seconds"},"breach_action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Breach Action"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"RiskCeilingUpdate","description":"Update for a risk ceiling."},"RiskLevel":{"type":"string","enum":["NORMAL","NEAR_THRESHOLD","AT_RISK","VIOLATED"],"title":"RiskLevel","description":"Risk classification."},"RollbackRequest":{"properties":{"target_version":{"type":"string","title":"Target Version"},"reason":{"type":"string","title":"Reason"},"rolled_back_by":{"type":"string","title":"Rolled Back By","default":"system"}},"type":"object","required":["target_version","reason"],"title":"RollbackRequest","description":"Request to rollback to a previous version."},"RoutingConfigUpdate":{"properties":{"success_metric":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Success Metric","description":"Success metric: cost, latency, accuracy, risk_min, balanced"},"difficulty_threshold":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Difficulty Threshold","description":"Difficulty threshold: low, medium, high"},"risk_policy":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Risk Policy","description":"Risk policy: strict, balanced, fast"},"orchestrator_mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Orchestrator Mode","description":"Orchestrator mode: parallel, hierarchical, blackboard, sequential"},"max_parallel_tasks":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":1.0},{"type":"null"}],"title":"Max Parallel Tasks"},"escalation_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Escalation Enabled"}},"type":"object","title":"RoutingConfigUpdate","description":"Request to update agent routing config."},"RoutingDispatchRequest":{"properties":{"task_description":{"type":"string","minLength":1,"title":"Task Description","description":"Task to route"},"task_domain":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task Domain","description":"Target domain"},"required_tools":{"items":{"type":"string"},"type":"array","title":"Required Tools","description":"Required tools"},"required_capabilities":{"items":{"type":"string"},"type":"array","title":"Required Capabilities","description":"Required capabilities"},"difficulty":{"type":"string","title":"Difficulty","description":"Task difficulty","default":"medium"},"risk_tolerance":{"type":"string","title":"Risk Tolerance","description":"Risk tolerance","default":"balanced"},"prefer_metric":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Prefer Metric","description":"Preferred success metric"},"max_agents":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Max Agents","description":"Max agents to evaluate","default":10}},"type":"object","required":["task_description"],"title":"RoutingDispatchRequest","description":"Request for routing dispatch."},"RunHistoryItem":{"properties":{"id":{"type":"string","title":"Id"},"worker_id":{"type":"string","title":"Worker Id"},"task":{"type":"string","title":"Task"},"status":{"type":"string","title":"Status"},"success":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Success"},"total_tokens":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Tokens"},"total_latency_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Latency Ms"},"cost_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Cost Cents"},"created_at":{"type":"string","title":"Created At"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At"}},"type":"object","required":["id","worker_id","task","status","success","total_tokens","total_latency_ms","cost_cents","created_at","completed_at"],"title":"RunHistoryItem","description":"Run history item."},"RunListItem":{"properties":{"run_id":{"type":"string","title":"Run Id"},"task":{"type":"string","title":"Task"},"status":{"type":"string","title":"Status"},"success":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Success"},"created_at":{"type":"string","title":"Created At"},"total_latency_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Total Latency Ms"}},"type":"object","required":["run_id","task","status","created_at"],"title":"RunListItem","description":"Summary item for run listing."},"RunResponse":{"properties":{"run_id":{"type":"string","title":"Run Id"},"agent_id":{"type":"string","title":"Agent Id"},"goal":{"type":"string","title":"Goal"},"status":{"type":"string","title":"Status"},"attempts":{"type":"integer","title":"Attempts"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"plan":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Plan"},"tool_calls":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"Tool Calls"},"created_at":{"type":"string","title":"Created At"},"started_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At"},"duration_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Duration Ms"}},"type":"object","required":["run_id","agent_id","goal","status","attempts","error_message","plan","tool_calls","created_at","started_at","completed_at","duration_ms"],"title":"RunResponse"},"RunRetryResponse":{"properties":{"id":{"type":"string","title":"Id"},"parent_run_id":{"type":"string","title":"Parent Run Id"},"status":{"type":"string","title":"Status"}},"type":"object","required":["id","parent_run_id","status"],"title":"RunRetryResponse","description":"Response for run retry - Phase-2.5."},"RunSource":{"type":"string","enum":["agent","human","sdk"],"title":"RunSource","description":"Run initiator type."},"RunState":{"type":"string","enum":["LIVE","COMPLETED"],"title":"RunState","description":"Run lifecycle state."},"RunTimeline":{"properties":{"run_id":{"type":"string","title":"Run Id"},"entries":{"items":{"$ref":"#/components/schemas/TimelineEntry"},"type":"array","title":"Entries"},"entry_count":{"type":"integer","title":"Entry Count"}},"type":"object","required":["run_id","entries","entry_count"],"title":"RunTimeline","description":"Complete timeline for a run - raw, chronological."},"SBAGenerateRequest":{"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"Agent identifier"},"capabilities":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Capabilities"},"config":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Config"},"orchestrator":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Orchestrator","description":"Orchestrator name","default":"system"}},"type":"object","required":["agent_id"],"title":"SBAGenerateRequest","description":"Request to auto-generate SBA for an agent."},"SBARegisterRequest":{"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"Agent identifier"},"sba":{"type":"object","title":"Sba","description":"SBA schema"},"agent_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Name","description":"Human-readable name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Agent description"},"agent_type":{"type":"string","title":"Agent Type","description":"worker/orchestrator/aggregator","default":"worker"},"capabilities":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Capabilities"},"config":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Config"}},"type":"object","required":["agent_id","sba"],"title":"SBARegisterRequest","description":"Request to register agent with SBA."},"SBAValidateRequest":{"properties":{"sba":{"type":"object","title":"Sba","description":"SBA schema to validate"},"enforce_governance":{"type":"boolean","title":"Enforce Governance","description":"Require BudgetLLM governance","default":true}},"type":"object","required":["sba"],"title":"SBAValidateRequest","description":"Request to validate SBA schema."},"SafetyRuleUpdate":{"properties":{"condition":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Condition"},"action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action"},"cooldown_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Cooldown Seconds"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"SafetyRuleUpdate","description":"Update for a safety rule."},"SandboxSimulateResponse":{"properties":{"v1_feasible":{"type":"boolean","title":"V1 Feasible"},"v1_cost_cents":{"type":"integer","title":"V1 Cost Cents"},"v1_duration_ms":{"type":"integer","title":"V1 Duration Ms"},"v2_result":{"anyOf":[{"$ref":"#/components/schemas/V2SimulationResponse"},{"type":"null"}]},"comparison":{"anyOf":[{"$ref":"#/components/schemas/ComparisonResponse"},{"type":"null"}]},"sandbox_enabled":{"type":"boolean","title":"Sandbox Enabled"},"v2_error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"V2 Error"},"memory_context_keys":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Memory Context Keys"},"memory_updates_applied":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Memory Updates Applied"},"drift_detected":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Drift Detected"},"drift_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Drift Score"},"side_effects":{"anyOf":[{"$ref":"#/components/schemas/SideEffectDisclosure"},{"type":"null"}]}},"type":"object","required":["v1_feasible","v1_cost_cents","v1_duration_ms","sandbox_enabled"],"title":"SandboxSimulateResponse","description":"Response from sandbox simulation."},"SandboxStatusResponse":{"properties":{"sandbox_enabled":{"type":"boolean","title":"Sandbox Enabled"},"circuit_breaker_open":{"type":"boolean","title":"Circuit Breaker Open"},"disabled_by_drift":{"type":"boolean","title":"Disabled By Drift"},"model_version":{"type":"string","title":"Model Version"},"adapter_version":{"type":"string","title":"Adapter Version"},"drift_threshold":{"type":"number","title":"Drift Threshold"}},"type":"object","required":["sandbox_enabled","circuit_breaker_open","disabled_by_drift","model_version","adapter_version","drift_threshold"],"title":"SandboxStatusResponse","description":"Status of V2 sandbox."},"ScenarioCreate":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name","description":"Scenario name"},"description":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Description","description":"Scenario description"},"plan":{"items":{"$ref":"#/components/schemas/SimulationStepInput"},"type":"array","maxItems":50,"minItems":1,"title":"Plan","description":"Plan steps"},"budget_cents":{"type":"integer","maximum":1000000.0,"minimum":0.0,"title":"Budget Cents","description":"Budget in cents","default":1000}},"type":"object","required":["name","plan"],"title":"ScenarioCreate","description":"Request to create a new scenario."},"ScenarioResponse":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"plan":{"items":{"$ref":"#/components/schemas/SimulationStepInput"},"type":"array","title":"Plan"},"budget_cents":{"type":"integer","title":"Budget Cents"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"created_by":{"type":"string","title":"Created By"},"is_template":{"type":"boolean","title":"Is Template"}},"type":"object","required":["id","name","description","plan","budget_cents","created_at","created_by","is_template"],"title":"ScenarioResponse","description":"Response for scenario operations."},"ScopeListResponse":{"properties":{"incident_id":{"type":"string","title":"Incident Id"},"scopes":{"items":{"type":"object"},"type":"array","title":"Scopes"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["incident_id","scopes","total"],"title":"ScopeListResponse","description":"Response listing scopes for an incident."},"ScopeTestRequest":{"properties":{"action_name":{"type":"string","title":"Action Name","description":"Name of the recovery action"},"action_type":{"type":"string","title":"Action Type","description":"Type of action: retry, fallback, circuit_break, scale","example":"retry"},"risk_class":{"type":"string","title":"Risk Class","description":"Risk classification: low, medium, high, critical","example":"medium"},"parameters":{"type":"object","title":"Parameters","description":"Action-specific parameters"},"scope_type":{"type":"string","title":"Scope Type","description":"Scope type: dry_run, agent_subset, request_sample, budget_fraction","default":"dry_run"},"scope_fraction":{"type":"number","maximum":1.0,"minimum":0.01,"title":"Scope Fraction","description":"Fraction of traffic to test (0.01-1.0)","default":0.1}},"type":"object","required":["action_name","action_type","risk_class"],"title":"ScopeTestRequest","description":"Request to test a recovery action in scoped execution."},"ScopeTestResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"cost_delta_cents":{"type":"integer","title":"Cost Delta Cents"},"failure_count":{"type":"integer","title":"Failure Count"},"policy_violations":{"items":{"type":"string"},"type":"array","title":"Policy Violations"},"execution_hash":{"type":"string","title":"Execution Hash"},"duration_ms":{"type":"integer","title":"Duration Ms"},"scope_coverage":{"type":"number","title":"Scope Coverage"},"samples_tested":{"type":"integer","title":"Samples Tested"},"risk_class":{"type":"string","title":"Risk Class"},"scope_type":{"type":"string","title":"Scope Type"},"details":{"type":"object","title":"Details"}},"type":"object","required":["success","cost_delta_cents","failure_count","policy_violations","execution_hash","duration_ms","scope_coverage","samples_tested","risk_class","scope_type","details"],"title":"ScopeTestResponse","description":"Response from scoped execution test."},"SendMessageRequest":{"properties":{"from_instance_id":{"type":"string","title":"From Instance Id","description":"Sender"},"message_type":{"type":"string","title":"Message Type","description":"Message type"},"payload":{"type":"object","title":"Payload","description":"Message content"},"job_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Job Id"},"reply_to_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reply To Id"}},"type":"object","required":["from_instance_id","message_type","payload"],"title":"SendMessageRequest","description":"Request to send a message."},"SideEffectDisclosure":{"properties":{"memory_write_occurred":{"type":"boolean","title":"Memory Write Occurred","default":false},"memory_write_feature_flag":{"type":"string","title":"Memory Write Feature Flag","default":"MEMORY_POST_UPDATE"},"memory_write_enabled":{"type":"boolean","title":"Memory Write Enabled","default":false},"disclaimer":{"type":"string","title":"Disclaimer","default":"Simulation may update memory when MEMORY_POST_UPDATE=true."}},"type":"object","title":"SideEffectDisclosure","description":"PIN-254 Phase C Fix (C5 Implicit Side-Effect): Explicit disclosure of side effects.\n\nThe /simulate endpoint can trigger memory writes when MEMORY_POST_UPDATE=true.\nThis violates the implicit contract that \"simulation\" is side-effect-free.\n\nThis disclosure makes the side-effect conditions explicit in the response."},"SimulateJobRequest":{"properties":{"orchestrator_agent":{"type":"string","title":"Orchestrator Agent","description":"Orchestrator agent type"},"worker_agent":{"type":"string","title":"Worker Agent","description":"Worker agent type"},"task":{"type":"string","title":"Task","description":"Task name/description"},"items":{"items":{},"type":"array","title":"Items","description":"Items to process"},"parallelism":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Parallelism","default":10},"timeout_per_item":{"type":"integer","maximum":3600.0,"minimum":1.0,"title":"Timeout Per Item","default":60},"max_retries":{"type":"integer","maximum":10.0,"minimum":0.0,"title":"Max Retries","default":3}},"type":"object","required":["orchestrator_agent","worker_agent","task","items"],"title":"SimulateJobRequest","description":"Request to simulate job execution before committing."},"SimulateJobResponse":{"properties":{"feasible":{"type":"boolean","title":"Feasible","description":"Whether job can be executed"},"estimated_credits":{"type":"number","title":"Estimated Credits","description":"Estimated total credits"},"credits_per_item":{"type":"number","title":"Credits Per Item","description":"Credits per item"},"item_count":{"type":"integer","title":"Item Count","description":"Number of items"},"estimated_duration_seconds":{"type":"integer","title":"Estimated Duration Seconds","description":"Estimated duration"},"budget_check":{"type":"object","title":"Budget Check","description":"Budget availability check"},"risks":{"items":{"type":"string"},"type":"array","title":"Risks","description":"Identified risks"},"warnings":{"items":{"type":"string"},"type":"array","title":"Warnings","description":"Warnings"},"cost_breakdown":{"additionalProperties":{"type":"number"},"type":"object","title":"Cost Breakdown","description":"Cost breakdown by type"}},"type":"object","required":["feasible","estimated_credits","credits_per_item","item_count","estimated_duration_seconds","budget_check","cost_breakdown"],"title":"SimulateJobResponse","description":"Response from job simulation."},"SimulatePreventionRequest":{"properties":{"policy_id":{"type":"string","title":"Policy Id","description":"Policy that prevented the recurrence"},"pattern_id":{"type":"string","title":"Pattern Id","description":"Pattern that matched"},"original_incident_id":{"type":"string","title":"Original Incident Id","description":"Original incident that created the policy"},"confidence":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Confidence","description":"Match confidence","default":0.92}},"type":"object","required":["policy_id","pattern_id","original_incident_id"],"title":"SimulatePreventionRequest","description":"Request to simulate a prevention event for demo/testing."},"SimulateRegretRequest":{"properties":{"policy_id":{"type":"string","title":"Policy Id","description":"Policy that caused harm"},"regret_type":{"type":"string","title":"Regret Type","description":"Type of regret","default":"false_positive"},"severity":{"type":"integer","maximum":10.0,"minimum":1.0,"title":"Severity","description":"Severity 1-10","default":7},"description":{"type":"string","title":"Description","description":"Description","default":"Simulated regret event for demo"}},"type":"object","required":["policy_id"],"title":"SimulateRegretRequest","description":"Request to simulate a regret event for demo/testing."},"SimulateResponse":{"properties":{"feasible":{"type":"boolean","title":"Feasible"},"status":{"type":"string","title":"Status"},"estimated_cost_cents":{"type":"integer","title":"Estimated Cost Cents"},"estimated_duration_ms":{"type":"integer","title":"Estimated Duration Ms"},"budget_remaining_cents":{"type":"integer","title":"Budget Remaining Cents"},"budget_sufficient":{"type":"boolean","title":"Budget Sufficient"},"permission_gaps":{"items":{"type":"string"},"type":"array","title":"Permission Gaps"},"risks":{"items":{"type":"object"},"type":"array","title":"Risks"},"step_estimates":{"items":{"type":"object"},"type":"array","title":"Step Estimates"},"alternatives":{"items":{"type":"object"},"type":"array","title":"Alternatives"},"warnings":{"items":{"type":"string"},"type":"array","title":"Warnings"},"trace_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trace Id"},"root_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Root Hash"},"seed":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Seed"}},"type":"object","required":["feasible","status","estimated_cost_cents","estimated_duration_ms","budget_remaining_cents","budget_sufficient","permission_gaps","risks","step_estimates","alternatives","warnings"],"title":"SimulateResponse","description":"Response from plan simulation."},"SimulationResult":{"properties":{"scenario_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Scenario Id","description":"Scenario ID if from saved scenario"},"scenario_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Scenario Name","description":"Scenario name if from saved scenario"},"feasible":{"type":"boolean","title":"Feasible","description":"Is the plan feasible within budget"},"status":{"type":"string","title":"Status","description":"Simulation status"},"estimated_cost_cents":{"type":"integer","title":"Estimated Cost Cents","description":"Total estimated cost"},"budget_cents":{"type":"integer","title":"Budget Cents","description":"Available budget"},"budget_remaining_cents":{"type":"integer","title":"Budget Remaining Cents","description":"Budget remaining after simulation"},"budget_utilization_pct":{"type":"number","title":"Budget Utilization Pct","description":"Budget utilization percentage"},"estimated_duration_ms":{"type":"integer","title":"Estimated Duration Ms","description":"Total estimated duration"},"step_estimates":{"items":{"$ref":"#/components/schemas/StepEstimate"},"type":"array","title":"Step Estimates","description":"Per-step cost estimates"},"confidence_score":{"type":"number","title":"Confidence Score","description":"Overall confidence score"},"warnings":{"items":{"type":"string"},"type":"array","title":"Warnings","description":"Advisory warnings"},"risks":{"items":{"type":"object"},"type":"array","title":"Risks","description":"Identified risks"},"simulation_timestamp":{"type":"string","format":"date-time","title":"Simulation Timestamp","description":"When simulation was run"},"model_version":{"type":"string","title":"Model Version","description":"Simulation model version","default":"v1.0.0"},"is_advisory":{"type":"boolean","title":"Is Advisory","description":"Results are advisory only","default":true},"note":{"type":"string","title":"Note","description":"Advisory note","default":"This simulation is advisory only. No real budget changes occur."}},"type":"object","required":["feasible","status","estimated_cost_cents","budget_cents","budget_remaining_cents","budget_utilization_pct","estimated_duration_ms","step_estimates","confidence_score","simulation_timestamp"],"title":"SimulationResult","description":"Result of a scenario simulation (advisory only)."},"SimulationStatus":{"properties":{"is_demo_mode":{"type":"boolean","title":"Is Demo Mode"},"simulated_gates":{"additionalProperties":{"type":"boolean"},"type":"object","title":"Simulated Gates"},"warning":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Warning"}},"type":"object","required":["is_demo_mode","simulated_gates"],"title":"SimulationStatus","description":"Simulation mode status - separate from real graduation."},"SimulationStep":{"properties":{"skill":{"type":"string","title":"Skill","description":"Skill ID"},"params":{"type":"object","title":"Params","description":"Skill parameters"},"iterations":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Iterations","description":"Number of times to execute this step","default":1}},"type":"object","required":["skill"],"title":"SimulationStep","description":"A single step in a simulation plan."},"SimulationStepInput":{"properties":{"skill":{"type":"string","title":"Skill","description":"Skill ID to simulate"},"params":{"type":"object","title":"Params","description":"Skill parameters"},"iterations":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Iterations","description":"Number of iterations","default":1}},"type":"object","required":["skill"],"title":"SimulationStepInput","description":"A single step in a simulation plan."},"SimulationStepResult":{"properties":{"step_index":{"type":"integer","title":"Step Index"},"skill_id":{"type":"string","title":"Skill Id"},"cost_cents":{"type":"number","title":"Cost Cents"},"latency_ms":{"type":"number","title":"Latency Ms"},"confidence":{"type":"number","title":"Confidence"}},"type":"object","required":["step_index","skill_id","cost_cents","latency_ms","confidence"],"title":"SimulationStepResult","description":"Result for a single step."},"SkillDescriptorResponse":{"properties":{"skill_id":{"type":"string","title":"Skill Id"},"name":{"type":"string","title":"Name"},"version":{"type":"string","title":"Version"},"description":{"type":"string","title":"Description"},"inputs_schema":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Inputs Schema"},"outputs_schema":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Outputs Schema"},"cost_model":{"type":"object","title":"Cost Model"},"failure_modes":{"items":{"type":"object"},"type":"array","title":"Failure Modes"},"constraints":{"type":"object","title":"Constraints"},"composition_hints":{"type":"object","title":"Composition Hints"}},"type":"object","required":["skill_id","name","version","description","cost_model","failure_modes","constraints","composition_hints"],"title":"SkillDescriptorResponse","description":"Response describing a skill."},"SkillListResponse":{"properties":{"skills":{"items":{"type":"string"},"type":"array","title":"Skills"},"count":{"type":"integer","title":"Count"},"descriptors":{"additionalProperties":{"type":"object"},"type":"object","title":"Descriptors"}},"type":"object","required":["skills","count","descriptors"],"title":"SkillListResponse","description":"Response listing available skills."},"SortField":{"type":"string","enum":["started_at","completed_at","duration_ms","risk_level"],"title":"SortField","description":"Allowed sort fields."},"SortOrder":{"type":"string","enum":["asc","desc"],"title":"SortOrder","description":"Sort direction."},"SpendingDataResponse":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"actual":{"items":{"type":"number"},"type":"array","title":"Actual"},"projected":{"items":{"type":"number"},"type":"array","title":"Projected"},"budget_limit":{"type":"number","title":"Budget Limit"},"anomalies":{"items":{"type":"object"},"type":"array","title":"Anomalies"},"period":{"type":"string","title":"Period"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["agent_id","actual","projected","budget_limit","anomalies","period","timestamp"],"title":"SpendingDataResponse","description":"Response for spending tracker endpoint."},"StageDeclaration":{"properties":{"name":{"type":"string","title":"Name"},"order":{"type":"integer","title":"Order"},"depends_on":{"items":{"type":"string"},"type":"array","title":"Depends On"}},"type":"object","required":["name","order"],"title":"StageDeclaration","description":"Single stage in the execution plan."},"StageDetail":{"properties":{"stage":{"type":"string","title":"Stage"},"status":{"type":"string","title":"Status"},"timestamp":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp"},"details":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Details"},"failure_state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Failure State"},"confidence_band":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Confidence Band"}},"type":"object","required":["stage","status"],"title":"StageDetail","description":"Detail for a single stage."},"StatsResponse":{"properties":{"total_records":{"type":"integer","title":"Total Records"},"records_by_entity_type":{"additionalProperties":{"type":"integer"},"type":"object","title":"Records By Entity Type"},"records_by_actor_type":{"additionalProperties":{"type":"integer"},"type":"object","title":"Records By Actor Type"},"records_by_status":{"additionalProperties":{"type":"integer"},"type":"object","title":"Records By Status"},"oldest_record":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Oldest Record"},"newest_record":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Newest Record"},"time_range_days":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Time Range Days"}},"type":"object","required":["total_records","records_by_entity_type","records_by_actor_type","records_by_status","oldest_record","newest_record","time_range_days"],"title":"StatsResponse","description":"Statistics for audit reporting."},"StatusHistoryListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/StatusHistoryResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["items","total","limit","offset","has_more"],"title":"StatusHistoryListResponse","description":"Paginated list of status history records."},"StatusHistoryResponse":{"properties":{"id":{"type":"string","title":"Id"},"entity_type":{"type":"string","title":"Entity Type"},"entity_id":{"type":"string","title":"Entity Id"},"old_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Old Status"},"new_status":{"type":"string","title":"New Status"},"actor_type":{"type":"string","title":"Actor Type"},"actor_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Actor Id"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"},"correlation_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Correlation Id"},"metadata":{"type":"object","title":"Metadata"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"sequence":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Sequence"}},"type":"object","required":["id","entity_type","entity_id","old_status","new_status","actor_type","actor_id","reason","tenant_id","correlation_id","metadata","created_at","sequence"],"title":"StatusHistoryResponse","description":"Single status history record."},"StepEstimate":{"properties":{"step_index":{"type":"integer","title":"Step Index"},"skill_id":{"type":"string","title":"Skill Id"},"iterations":{"type":"integer","title":"Iterations"},"cost_cents":{"type":"number","title":"Cost Cents"},"latency_ms":{"type":"number","title":"Latency Ms"},"confidence":{"type":"number","title":"Confidence"}},"type":"object","required":["step_index","skill_id","iterations","cost_cents","latency_ms","confidence"],"title":"StepEstimate","description":"Cost estimate for a single step."},"StickinessByFeature":{"properties":{"feature":{"type":"string","title":"Feature"},"total_actions_30d":{"type":"integer","title":"Total Actions 30D"},"unique_tenants":{"type":"integer","title":"Unique Tenants"},"avg_per_tenant":{"type":"number","title":"Avg Per Tenant"},"pct_of_active_tenants":{"type":"number","title":"Pct Of Active Tenants"}},"type":"object","required":["feature","total_actions_30d","unique_tenants","avg_per_tenant","pct_of_active_tenants"],"title":"StickinessByFeature","description":"Which feature creates stickiness."},"StoreTraceRequest":{"properties":{"trace":{"type":"object","title":"Trace"},"overwrite":{"type":"boolean","title":"Overwrite","default":false}},"type":"object","required":["trace"],"title":"StoreTraceRequest","description":"Request to store a client-provided trace."},"SuggestRequest":{"properties":{"failure_match_id":{"type":"string","title":"Failure Match Id","description":"UUID of failure_match record"},"failure_payload":{"type":"object","title":"Failure Payload","description":"Error details: error_type, raw message, meta","example":{"error_type":"TIMEOUT","meta":{"skill":"http_call"},"raw":"Connection timed out after 30s"}},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source","description":"Source system identifier"},"occurred_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Occurred At","description":"When failure occurred"}},"type":"object","required":["failure_match_id","failure_payload"],"title":"SuggestRequest","description":"Request to generate recovery suggestion."},"SuggestResponse":{"properties":{"matched_entry":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Matched Entry","description":"Matched catalog entry if found"},"suggested_recovery":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Suggested Recovery","description":"Human-readable recovery suggestion"},"confidence":{"type":"number","title":"Confidence","description":"Confidence score 0.0-1.0"},"candidate_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Candidate Id","description":"ID of created/updated candidate"},"explain":{"type":"object","title":"Explain","description":"Scoring provenance and method details"}},"type":"object","required":["confidence"],"title":"SuggestResponse","description":"Response with recovery suggestion."},"SystemHealthResponse":{"properties":{"database_healthy":{"type":"boolean","title":"Database Healthy","default":true},"redis_healthy":{"type":"boolean","title":"Redis Healthy","default":true},"worker_healthy":{"type":"boolean","title":"Worker Healthy","default":true},"current_load":{"type":"number","title":"Current Load","default":0.0},"queue_depth":{"type":"integer","title":"Queue Depth","default":0},"memory_usage_pct":{"type":"number","title":"Memory Usage Pct","default":0.0},"cpu_usage_pct":{"type":"number","title":"Cpu Usage Pct","default":0.0},"recent_errors":{"type":"integer","title":"Recent Errors","default":0},"recent_timeouts":{"type":"integer","title":"Recent Timeouts","default":0},"checked_at":{"type":"string","format":"date-time","title":"Checked At"},"status":{"type":"string","title":"Status","default":"healthy"}},"type":"object","required":["checked_at"],"title":"SystemHealthResponse","description":"Overall system health indicators."},"SystemRecordDetailItem":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"},"component":{"type":"string","title":"Component"},"event_type":{"type":"string","title":"Event Type"},"severity":{"type":"string","title":"Severity"},"summary":{"type":"string","title":"Summary"},"caused_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Caused By"},"correlation_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Correlation Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"details":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Details"}},"type":"object","required":["id","tenant_id","component","event_type","severity","summary","caused_by","correlation_id","created_at","details"],"title":"SystemRecordDetailItem","description":"System record with details (O3)."},"SystemRecordItem":{"properties":{"id":{"type":"string","title":"Id"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"},"component":{"type":"string","title":"Component"},"event_type":{"type":"string","title":"Event Type"},"severity":{"type":"string","title":"Severity"},"summary":{"type":"string","title":"Summary"},"caused_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Caused By"},"correlation_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Correlation Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","tenant_id","component","event_type","severity","summary","caused_by","correlation_id","created_at"],"title":"SystemRecordItem","description":"Single system record entry (O2)."},"SystemRecordsResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/SystemRecordItem"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["items","total","has_more"],"title":"SystemRecordsResponse","description":"Response envelope for system records."},"SystemStabilityResponse":{"properties":{"state":{"type":"string","title":"State"},"frozen":{"type":"boolean","title":"Frozen"},"freeze_until":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Freeze Until"},"freeze_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Freeze Reason"},"adjustments_this_hour":{"type":"integer","title":"Adjustments This Hour"},"rollbacks_this_hour":{"type":"integer","title":"Rollbacks This Hour"},"oscillations_detected":{"type":"integer","title":"Oscillations Detected"},"affected_agents":{"items":{"type":"string"},"type":"array","title":"Affected Agents"}},"type":"object","required":["state","frozen","adjustments_this_hour","rollbacks_this_hour","oscillations_detected","affected_agents"],"title":"SystemStabilityResponse","description":"Response with system-wide stability metrics."},"SystemSummary":{"properties":{"total_tenants":{"type":"integer","title":"Total Tenants","default":0},"active_tenants_24h":{"type":"integer","title":"Active Tenants 24H","default":0},"active_tenants_7d":{"type":"integer","title":"Active Tenants 7D","default":0},"total_calls":{"type":"integer","title":"Total Calls","default":0},"calls_24h":{"type":"integer","title":"Calls 24H","default":0},"calls_7d":{"type":"integer","title":"Calls 7D","default":0},"total_incidents":{"type":"integer","title":"Total Incidents","default":0},"open_incidents":{"type":"integer","title":"Open Incidents","default":0},"critical_incidents":{"type":"integer","title":"Critical Incidents","default":0},"incidents_24h":{"type":"integer","title":"Incidents 24H","default":0},"total_cost_cents":{"type":"integer","title":"Total Cost Cents","default":0},"cost_24h_cents":{"type":"integer","title":"Cost 24H Cents","default":0},"cost_7d_cents":{"type":"integer","title":"Cost 7D Cents","default":0},"global_error_rate":{"type":"number","title":"Global Error Rate","default":0.0},"avg_response_time_ms":{"type":"number","title":"Avg Response Time Ms","default":0.0},"generated_at":{"type":"string","format":"date-time","title":"Generated At"},"note":{"type":"string","title":"Note","default":"Cross-tenant summary - Founder only"}},"type":"object","required":["generated_at"],"title":"SystemSummary","description":"Cross-tenant system summary."},"TemporalPolicyCreate":{"properties":{"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"temporal_type":{"type":"string","title":"Temporal Type"},"metric":{"type":"string","title":"Metric"},"max_value":{"type":"number","title":"Max Value"},"window_seconds":{"type":"integer","title":"Window Seconds"},"breach_action":{"type":"string","title":"Breach Action","default":"block"},"cooldown_on_breach":{"type":"integer","title":"Cooldown On Breach","default":0},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"}},"type":"object","required":["name","temporal_type","metric","max_value","window_seconds"],"title":"TemporalPolicyCreate","description":"Request to create a temporal policy."},"TemporalSignatureResponse":{"properties":{"epoch_hash":{"type":"string","title":"Epoch Hash"},"model_family":{"type":"string","title":"Model Family"},"model_version":{"type":"string","title":"Model Version"},"iaec_version":{"type":"string","title":"Iaec Version"},"slot_structure_version":{"type":"integer","title":"Slot Structure Version"}},"type":"object","required":["epoch_hash","model_family","model_version","iaec_version","slot_structure_version"],"title":"TemporalSignatureResponse","description":"Temporal signature for drift control."},"TenantDiagnostics":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"calls_by_hour":{"items":{"type":"object"},"type":"array","title":"Calls By Hour"},"calls_by_skill":{"items":{"type":"object"},"type":"array","title":"Calls By Skill"},"error_breakdown":{"items":{"type":"object"},"type":"array","title":"Error Breakdown"},"top_errors":{"items":{"type":"object"},"type":"array","title":"Top Errors"},"latency_percentiles":{"additionalProperties":{"type":"number"},"type":"object","title":"Latency Percentiles"},"latency_by_skill":{"items":{"type":"object"},"type":"array","title":"Latency By Skill"},"cost_by_day":{"items":{"type":"object"},"type":"array","title":"Cost By Day"},"cost_by_skill":{"items":{"type":"object"},"type":"array","title":"Cost By Skill"},"recent_incidents":{"items":{"type":"object"},"type":"array","title":"Recent Incidents"},"generated_at":{"type":"string","format":"date-time","title":"Generated At"},"note":{"type":"string","title":"Note","default":"Deep diagnostics - Founder only, READ-ONLY"}},"type":"object","required":["tenant_id","generated_at"],"title":"TenantDiagnostics","description":"Deep diagnostics for a specific tenant."},"TenantResponse":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"slug":{"type":"string","title":"Slug"},"plan":{"type":"string","title":"Plan"},"status":{"type":"string","title":"Status"},"max_workers":{"type":"integer","title":"Max Workers"},"max_runs_per_day":{"type":"integer","title":"Max Runs Per Day"},"max_concurrent_runs":{"type":"integer","title":"Max Concurrent Runs"},"max_tokens_per_month":{"type":"integer","title":"Max Tokens Per Month"},"max_api_keys":{"type":"integer","title":"Max Api Keys"},"runs_today":{"type":"integer","title":"Runs Today"},"runs_this_month":{"type":"integer","title":"Runs This Month"},"tokens_this_month":{"type":"integer","title":"Tokens This Month"},"created_at":{"type":"string","title":"Created At"}},"type":"object","required":["id","name","slug","plan","status","max_workers","max_runs_per_day","max_concurrent_runs","max_tokens_per_month","max_api_keys","runs_today","runs_this_month","tokens_this_month","created_at"],"title":"TenantResponse","description":"Tenant information response."},"TenantSettings":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"tenant_name":{"type":"string","title":"Tenant Name"},"plan":{"type":"string","title":"Plan"},"guardrails":{"items":{"$ref":"#/components/schemas/GuardrailConfig"},"type":"array","title":"Guardrails"},"budget_limit_cents":{"type":"integer","title":"Budget Limit Cents"},"budget_period":{"type":"string","title":"Budget Period"},"kill_switch_enabled":{"type":"boolean","title":"Kill Switch Enabled"},"kill_switch_auto_trigger":{"type":"boolean","title":"Kill Switch Auto Trigger"},"auto_trigger_threshold_cents":{"type":"integer","title":"Auto Trigger Threshold Cents"},"notification_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notification Email"},"notification_slack_webhook":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notification Slack Webhook"}},"type":"object","required":["tenant_id","tenant_name","plan","guardrails","budget_limit_cents","budget_period","kill_switch_enabled","kill_switch_auto_trigger","auto_trigger_threshold_cents"],"title":"TenantSettings","description":"Read-only tenant settings."},"TenantSummary":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"total_calls":{"type":"integer","title":"Total Calls","default":0},"calls_24h":{"type":"integer","title":"Calls 24H","default":0},"calls_7d":{"type":"integer","title":"Calls 7D","default":0},"total_incidents":{"type":"integer","title":"Total Incidents","default":0},"open_incidents":{"type":"integer","title":"Open Incidents","default":0},"critical_incidents":{"type":"integer","title":"Critical Incidents","default":0},"total_cost_cents":{"type":"integer","title":"Total Cost Cents","default":0},"cost_24h_cents":{"type":"integer","title":"Cost 24H Cents","default":0},"error_rate_24h":{"type":"number","title":"Error Rate 24H","default":0.0},"avg_latency_ms":{"type":"number","title":"Avg Latency Ms","default":0.0},"last_activity":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Activity"},"status":{"type":"string","title":"Status","default":"unknown"}},"type":"object","required":["tenant_id"],"title":"TenantSummary","description":"Summary metrics for a single tenant."},"TimelineEntry":{"properties":{"entry_type":{"type":"string","title":"Entry Type"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"record":{"type":"object","title":"Record"}},"type":"object","required":["entry_type","timestamp","record"],"title":"TimelineEntry","description":"Single entry in the timeline - could be decision, pre-run, or outcome."},"TimelineEvent":{"properties":{"event":{"type":"string","title":"Event"},"timestamp":{"type":"string","title":"Timestamp"},"duration_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Ms"},"data":{"type":"object","title":"Data"}},"type":"object","required":["event","timestamp","data"],"title":"TimelineEvent","description":"Decision timeline event - step by step policy evaluation."},"TimelineEventResponse":{"properties":{"type":{"type":"string","title":"Type"},"timestamp":{"type":"string","title":"Timestamp"},"icon":{"type":"string","title":"Icon"},"headline":{"type":"string","title":"Headline"},"description":{"type":"string","title":"Description"},"details":{"type":"object","title":"Details"},"is_milestone":{"type":"boolean","title":"Is Milestone","default":false}},"type":"object","required":["type","timestamp","icon","headline","description","details"],"title":"TimelineEventResponse","description":"A single event in the prevention timeline."},"TodaySnapshot":{"properties":{"requests_today":{"type":"integer","title":"Requests Today"},"spend_today_cents":{"type":"integer","title":"Spend Today Cents"},"incidents_prevented":{"type":"integer","title":"Incidents Prevented"},"last_incident_time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Incident Time"},"cost_avoided_cents":{"type":"integer","title":"Cost Avoided Cents"}},"type":"object","required":["requests_today","spend_today_cents","incidents_prevented","cost_avoided_cents"],"title":"TodaySnapshot","description":"Today's metrics snapshot."},"ToneRuleRequest":{"properties":{"primary":{"type":"string","title":"Primary","description":"Primary tone","default":"professional"},"avoid":{"items":{"type":"string"},"type":"array","title":"Avoid","description":"Tones to avoid"},"examples_good":{"items":{"type":"string"},"type":"array","title":"Examples Good","description":"Good examples"},"examples_bad":{"items":{"type":"string"},"type":"array","title":"Examples Bad","description":"Bad examples"}},"type":"object","title":"ToneRuleRequest","description":"Tone rule for brand."},"TraceCompareResponse":{"properties":{"match":{"type":"boolean","title":"Match"},"trace1_root_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trace1 Root Hash"},"trace2_root_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trace2 Root Hash"},"differences":{"items":{"type":"object"},"type":"array","title":"Differences"},"summary":{"type":"string","title":"Summary"}},"type":"object","required":["match","trace1_root_hash","trace2_root_hash","summary"],"title":"TraceCompareResponse","description":"Result of comparing two traces."},"TraceDetailResponse":{"properties":{"run_id":{"type":"string","title":"Run Id"},"correlation_id":{"type":"string","title":"Correlation Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"plan":{"items":{"type":"object"},"type":"array","title":"Plan"},"steps":{"items":{"$ref":"#/components/schemas/TraceStepResponse"},"type":"array","title":"Steps"},"started_at":{"type":"string","title":"Started At"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At"},"status":{"type":"string","title":"Status"},"metadata":{"type":"object","title":"Metadata"},"seed":{"type":"integer","title":"Seed","default":42},"frozen_timestamp":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Frozen Timestamp"},"root_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Root Hash"},"plan_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Plan Hash"},"schema_version":{"type":"string","title":"Schema Version","default":"1.1"}},"type":"object","required":["run_id","correlation_id","tenant_id","plan","steps","started_at","status"],"title":"TraceDetailResponse","description":"Full trace with all steps."},"TraceListResponse":{"properties":{"traces":{"items":{"$ref":"#/components/schemas/TraceSummaryResponse"},"type":"array","title":"Traces"},"total":{"type":"integer","title":"Total"},"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"}},"type":"object","required":["traces","total","limit","offset"],"title":"TraceListResponse","description":"Paginated trace list."},"TraceStepResponse":{"properties":{"step_index":{"type":"integer","title":"Step Index"},"skill_name":{"type":"string","title":"Skill Name"},"params":{"type":"object","title":"Params"},"status":{"type":"string","title":"Status"},"outcome_category":{"type":"string","title":"Outcome Category"},"outcome_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Outcome Code"},"outcome_data":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Outcome Data"},"cost_cents":{"type":"number","title":"Cost Cents"},"duration_ms":{"type":"number","title":"Duration Ms"},"retry_count":{"type":"integer","title":"Retry Count"},"timestamp":{"type":"string","title":"Timestamp"},"idempotency_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Idempotency Key"},"replay_behavior":{"type":"string","title":"Replay Behavior","default":"execute"},"input_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Input Hash"},"output_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Output Hash"}},"type":"object","required":["step_index","skill_name","params","status","outcome_category","cost_cents","duration_ms","retry_count","timestamp"],"title":"TraceStepResponse","description":"Individual trace step."},"TraceSummaryResponse":{"properties":{"run_id":{"type":"string","title":"Run Id"},"correlation_id":{"type":"string","title":"Correlation Id"},"tenant_id":{"type":"string","title":"Tenant Id"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"total_steps":{"type":"integer","title":"Total Steps"},"success_count":{"type":"integer","title":"Success Count"},"failure_count":{"type":"integer","title":"Failure Count"},"total_cost_cents":{"type":"number","title":"Total Cost Cents"},"total_duration_ms":{"type":"number","title":"Total Duration Ms"},"started_at":{"type":"string","title":"Started At"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At"},"status":{"type":"string","title":"Status"},"seed":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Seed"},"root_hash":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Root Hash"}},"type":"object","required":["run_id","correlation_id","tenant_id","total_steps","success_count","failure_count","total_cost_cents","total_duration_ms","started_at","status"],"title":"TraceSummaryResponse","description":"Trace summary for list views."},"TriggerIncidentRequest":{"properties":{"run_id":{"type":"string","title":"Run Id"}},"type":"object","required":["run_id"],"title":"TriggerIncidentRequest","description":"Request to trigger incident creation for a run."},"TriggerIncidentResponse":{"properties":{"incident_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Incident Id"},"created":{"type":"boolean","title":"Created"},"message":{"type":"string","title":"Message"}},"type":"object","required":["incident_id","created","message"],"title":"TriggerIncidentResponse","description":"Response from incident trigger."},"Usage":{"properties":{"prompt_tokens":{"type":"integer","title":"Prompt Tokens"},"completion_tokens":{"type":"integer","title":"Completion Tokens"},"total_tokens":{"type":"integer","title":"Total Tokens"}},"type":"object","required":["prompt_tokens","completion_tokens","total_tokens"],"title":"Usage"},"UsagePattern":{"properties":{"pattern_type":{"type":"string","title":"Pattern Type"},"description":{"type":"string","title":"Description"},"affected_tenants":{"type":"integer","title":"Affected Tenants"},"severity":{"type":"string","title":"Severity"},"recommendation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recommendation"}},"type":"object","required":["pattern_type","description","affected_tenants","severity"],"title":"UsagePattern","description":"Usage pattern insight."},"UsageSummaryResponse":{"properties":{"tenant_id":{"type":"string","title":"Tenant Id"},"period":{"type":"object","title":"Period"},"meters":{"type":"object","title":"Meters"},"total_records":{"type":"integer","title":"Total Records"},"provenance":{"allOf":[{"$ref":"#/components/schemas/app__api__tenants__AnalyticsProvenance"}],"description":"Provenance metadata for interpretation"}},"type":"object","required":["tenant_id","period","meters","total_records","provenance"],"title":"UsageSummaryResponse","description":"Usage summary for a tenant with provenance for SDSR ANALYTICS domain."},"V2SimulationResponse":{"properties":{"feasible":{"type":"boolean","title":"Feasible"},"status":{"type":"string","title":"Status"},"estimated_cost_cents":{"type":"integer","title":"Estimated Cost Cents"},"estimated_duration_ms":{"type":"integer","title":"Estimated Duration Ms"},"budget_remaining_cents":{"type":"integer","title":"Budget Remaining Cents"},"confidence_score":{"type":"number","title":"Confidence Score"},"model_version":{"type":"string","title":"Model Version"},"step_estimates":{"items":{"$ref":"#/components/schemas/SimulationStepResult"},"type":"array","title":"Step Estimates"},"risks":{"items":{"type":"object"},"type":"array","title":"Risks"},"warnings":{"items":{"type":"string"},"type":"array","title":"Warnings"},"runtime_ms":{"type":"integer","title":"Runtime Ms"}},"type":"object","required":["feasible","status","estimated_cost_cents","estimated_duration_ms","budget_remaining_cents","confidence_score","model_version","step_estimates","risks","warnings","runtime_ms"],"title":"V2SimulationResponse","description":"Response from V2 simulation."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"ValidationResultResponse":{"properties":{"dataset_id":{"type":"string","title":"Dataset Id"},"dataset_name":{"type":"string","title":"Dataset Name"},"sample_count":{"type":"integer","title":"Sample Count"},"mean_error":{"type":"number","title":"Mean Error"},"median_error":{"type":"number","title":"Median Error"},"std_deviation":{"type":"number","title":"Std Deviation"},"outlier_pct":{"type":"number","title":"Outlier Pct"},"drift_score":{"type":"number","title":"Drift Score"},"verdict":{"type":"string","title":"Verdict"},"details":{"type":"object","title":"Details"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["dataset_id","dataset_name","sample_count","mean_error","median_error","std_deviation","outlier_pct","drift_score","verdict","details","timestamp"],"title":"ValidationResultResponse","description":"Validation result response."},"VersionResponse":{"properties":{"id":{"type":"string","title":"Id"},"proposal_id":{"type":"string","title":"Proposal Id"},"version":{"type":"integer","title":"Version"},"rule_snapshot":{"type":"object","title":"Rule Snapshot"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"created_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created By"},"change_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Change Reason"}},"type":"object","required":["id","proposal_id","version","rule_snapshot","created_at","created_by","change_reason"],"title":"VersionResponse","description":"Policy version record."},"ViolationType":{"type":"string","enum":["compliance_breach","ethical_violation","risk_ceiling_breach","safety_rule_triggered","business_rule_violation","temporal_limit_exceeded","dependency_conflict"],"title":"ViolationType","description":"Types of policy violations."},"VisualIdentityRequest":{"properties":{"primary_color":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Primary Color"},"secondary_color":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Secondary Color"},"font_heading":{"type":"string","title":"Font Heading","default":"Inter"},"font_body":{"type":"string","title":"Font Body","default":"Inter"},"logo_placement":{"type":"string","title":"Logo Placement","default":"top-left"}},"type":"object","title":"VisualIdentityRequest","description":"Visual identity for brand."},"WorkerConfigRequest":{"properties":{"enabled":{"type":"boolean","title":"Enabled","default":true},"config":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Config"},"brand":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Brand"},"max_runs_per_day":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Max Runs Per Day"},"max_tokens_per_run":{"anyOf":[{"type":"integer","minimum":1000.0},{"type":"null"}],"title":"Max Tokens Per Run"}},"type":"object","title":"WorkerConfigRequest","description":"Request to configure a worker for a tenant."},"WorkerConfigResponse":{"properties":{"worker_id":{"type":"string","title":"Worker Id"},"enabled":{"type":"boolean","title":"Enabled"},"config":{"type":"object","title":"Config"},"brand":{"type":"object","title":"Brand"},"max_runs_per_day":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Runs Per Day"},"max_tokens_per_run":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Tokens Per Run"}},"type":"object","required":["worker_id","enabled","config","brand","max_runs_per_day","max_tokens_per_run"],"title":"WorkerConfigResponse","description":"Worker configuration response."},"WorkerCostMetrics":{"properties":{"id":{"type":"string","title":"Id"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"cost":{"type":"string","title":"Cost"},"risk":{"type":"number","title":"Risk"},"budget_used":{"type":"number","title":"Budget Used"}},"type":"object","required":["id","cost","risk","budget_used"],"title":"WorkerCostMetrics","description":"Worker cost and risk metrics."},"WorkerDetailResponse":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"version":{"type":"string","title":"Version"},"status":{"type":"string","title":"Status"},"moats":{"items":{"type":"string"},"type":"array","title":"Moats"},"tokens_per_run_estimate":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Tokens Per Run Estimate"},"cost_per_run_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Cost Per Run Cents"},"is_public":{"type":"boolean","title":"Is Public"},"default_config":{"type":"object","title":"Default Config"},"input_schema":{"type":"object","title":"Input Schema"},"output_schema":{"type":"object","title":"Output Schema"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["id","name","description","version","status","moats","tokens_per_run_estimate","cost_per_run_cents","is_public","default_config","input_schema","output_schema","created_at","updated_at"],"title":"WorkerDetailResponse","description":"Detailed worker information."},"WorkerRunRequest":{"properties":{"task":{"type":"string","minLength":5,"title":"Task","description":"Business/product idea to build launch package for"},"brand":{"anyOf":[{"$ref":"#/components/schemas/BrandRequest"},{"type":"null"}],"description":"Brand constraints (optional, creates minimal brand if not provided)"},"budget":{"anyOf":[{"type":"integer","maximum":100000.0,"minimum":1000.0},{"type":"null"}],"title":"Budget","description":"Token budget for execution"},"strict_mode":{"type":"boolean","title":"Strict Mode","description":"If true, any policy violation stops execution","default":false},"depth":{"type":"string","title":"Depth","description":"Research depth: auto, shallow, deep","default":"auto"},"async_mode":{"type":"boolean","title":"Async Mode","description":"If true, returns immediately with run_id to poll","default":false},"policy_posture":{"type":"string","title":"Policy Posture","description":"Policy pre-check mode: 'strict' (block on violation) or 'advisory' (warn only)","default":"advisory"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id","description":"Tenant ID for policy evaluation","default":"default"}},"type":"object","required":["task"],"title":"WorkerRunRequest","description":"Request to run the Business Builder Worker."},"WorkerRunResponse":{"properties":{"run_id":{"type":"string","title":"Run Id"},"success":{"type":"boolean","title":"Success"},"status":{"type":"string","title":"Status"},"artifacts":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Artifacts"},"replay_token":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Replay Token"},"cost_report":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Cost Report"},"policy_violations":{"items":{"type":"object"},"type":"array","title":"Policy Violations"},"recovery_log":{"items":{"type":"object"},"type":"array","title":"Recovery Log"},"drift_metrics":{"additionalProperties":{"type":"number"},"type":"object","title":"Drift Metrics"},"execution_trace":{"items":{"type":"object"},"type":"array","title":"Execution Trace"},"routing_decisions":{"items":{"type":"object"},"type":"array","title":"Routing Decisions"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"total_tokens_used":{"type":"integer","title":"Total Tokens Used","default":0},"total_latency_ms":{"type":"number","title":"Total Latency Ms","default":0.0},"created_at":{"type":"string","title":"Created At"},"policy_status":{"anyOf":[{"$ref":"#/components/schemas/PolicyStatusModel"},{"type":"null"}]}},"type":"object","required":["run_id","success","status"],"title":"WorkerRunResponse","description":"Response from worker execution."},"WorkerSummaryResponse":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"version":{"type":"string","title":"Version"},"status":{"type":"string","title":"Status"},"moats":{"items":{"type":"string"},"type":"array","title":"Moats"},"tokens_per_run_estimate":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Tokens Per Run Estimate"},"cost_per_run_cents":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Cost Per Run Cents"}},"type":"object","required":["id","name","description","version","status","moats","tokens_per_run_estimate","cost_per_run_cents"],"title":"WorkerSummaryResponse","description":"Worker summary information."},"app__api__activity__AttentionSummary":{"properties":{"at_risk_count":{"type":"integer","title":"At Risk Count"},"reasons":{"items":{"type":"string"},"type":"array","title":"Reasons"}},"type":"object","required":["at_risk_count","reasons"],"title":"AttentionSummary","description":"Attention flags for runs needing review."},"app__api__activity__RunSummary":{"properties":{"run_id":{"type":"string","title":"Run Id"},"status":{"type":"string","title":"Status"},"goal":{"type":"string","title":"Goal"},"agent_id":{"type":"string","title":"Agent Id"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"},"parent_run_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Parent Run Id"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"created_at":{"type":"string","title":"Created At"},"started_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At"},"is_synthetic":{"type":"boolean","title":"Is Synthetic"},"synthetic_scenario_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Synthetic Scenario Id"}},"type":"object","required":["run_id","status","goal","agent_id","tenant_id","parent_run_id","error_message","created_at","started_at","completed_at","is_synthetic","synthetic_scenario_id"],"title":"RunSummary","description":"Run summary for list view."},"app__api__cost_intelligence__AnalyticsProvenance":{"properties":{"sources":{"items":{"type":"string"},"type":"array","title":"Sources","description":"Data sources used (e.g., ['cost_records', 'feature_tags'])"},"window":{"type":"string","title":"Window","description":"Time window (e.g., '24h', '7d', '30d')"},"aggregation":{"type":"string","title":"Aggregation","description":"Aggregation method (e.g., 'GROUP_BY:user', 'SUM')"},"generated_at":{"type":"string","format":"date-time","title":"Generated At","description":"When this data was computed"}},"type":"object","required":["sources","window","aggregation","generated_at"],"title":"AnalyticsProvenance","description":"Provenance envelope for analytics interpretation panels.\n\nSDSR requires provenance metadata on all interpretation panels to ensure\nthe UI can correctly display how data was derived."},"app__api__costsim__SimulateRequest":{"properties":{"plan":{"items":{"$ref":"#/components/schemas/SimulationStep"},"type":"array","title":"Plan","description":"Plan steps to simulate"},"budget_cents":{"type":"integer","minimum":0.0,"title":"Budget Cents","description":"Available budget in cents","default":1000},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id","description":"Tenant identifier"},"run_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Run Id","description":"Run identifier"},"workflow_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Workflow Id","description":"Workflow identifier for memory context"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id","description":"Agent identifier for memory context"},"inject_memory":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Inject Memory","description":"Override memory injection setting"}},"type":"object","required":["plan"],"title":"SimulateRequest","description":"Request for V2 simulation."},"app__api__guard__IncidentSummary":{"properties":{"id":{"type":"string","title":"Id"},"title":{"type":"string","title":"Title"},"severity":{"type":"string","title":"Severity"},"status":{"type":"string","title":"Status"},"trigger_type":{"type":"string","title":"Trigger Type"},"trigger_value":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trigger Value"},"action_taken":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action Taken"},"cost_avoided_cents":{"type":"integer","title":"Cost Avoided Cents"},"calls_affected":{"type":"integer","title":"Calls Affected"},"started_at":{"type":"string","title":"Started At"},"ended_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ended At"},"duration_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Seconds"},"call_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Call Id"}},"type":"object","required":["id","title","severity","status","trigger_type","cost_avoided_cents","calls_affected","started_at"],"title":"IncidentSummary","description":"Incident list item."},"app__api__guard__OnboardingVerifyResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"test_type":{"type":"string","title":"Test Type"},"incident_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Incident Id"},"call_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Call Id"},"was_blocked":{"type":"boolean","title":"Was Blocked"},"blocked_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Blocked By"},"tokens_consumed":{"type":"integer","title":"Tokens Consumed","default":0},"cost_cents":{"type":"number","title":"Cost Cents","default":0.0},"alert_sent":{"type":"boolean","title":"Alert Sent","default":false},"message":{"type":"string","title":"Message"},"details":{"type":"object","title":"Details","default":{}}},"type":"object","required":["success","test_type","was_blocked","message"],"title":"OnboardingVerifyResponse","description":"Response from onboarding verification."},"app__api__guard__PolicyDecision":{"properties":{"guardrail_id":{"type":"string","title":"Guardrail Id"},"guardrail_name":{"type":"string","title":"Guardrail Name"},"passed":{"type":"boolean","title":"Passed"},"action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action"}},"type":"object","required":["guardrail_id","guardrail_name","passed"],"title":"PolicyDecision","description":"Policy decision for replay."},"app__api__guard__ReplayResult":{"properties":{"call_id":{"type":"string","title":"Call Id"},"original":{"$ref":"#/components/schemas/ReplayCallSnapshot"},"replay":{"$ref":"#/components/schemas/ReplayCallSnapshot"},"match_level":{"type":"string","title":"Match Level"},"policy_match":{"type":"boolean","title":"Policy Match"},"model_drift_detected":{"type":"boolean","title":"Model Drift Detected"},"details":{"type":"object","title":"Details"},"certificate":{"anyOf":[{"$ref":"#/components/schemas/ReplayCertificate"},{"type":"null"}]}},"type":"object","required":["call_id","original","replay","match_level","policy_match","model_drift_detected","details"],"title":"ReplayResult","description":"Replay result response."},"app__api__incidents__AttentionSummary":{"properties":{"count":{"type":"integer","title":"Count"},"reasons":{"items":{"type":"string"},"type":"array","title":"Reasons"}},"type":"object","required":["count","reasons"],"title":"AttentionSummary","description":"Attention flags for incidents needing review."},"app__api__incidents__IncidentSummary":{"properties":{"id":{"type":"string","title":"Id"},"source_run_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source Run Id"},"source_type":{"type":"string","title":"Source Type"},"category":{"type":"string","title":"Category"},"severity":{"type":"string","title":"Severity"},"status":{"type":"string","title":"Status"},"title":{"type":"string","title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"error_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Code"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"tenant_id":{"type":"string","title":"Tenant Id"},"affected_agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Affected Agent Id"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"resolved_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolved At"},"is_synthetic":{"type":"boolean","title":"Is Synthetic"},"synthetic_scenario_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Synthetic Scenario Id"}},"type":"object","required":["id","source_run_id","source_type","category","severity","status","title","description","error_code","error_message","tenant_id","affected_agent_id","created_at","updated_at","resolved_at","is_synthetic","synthetic_scenario_id"],"title":"IncidentSummary","description":"Incident summary for list view."},"app__api__onboarding__OnboardingVerifyResponse":{"properties":{"verified":{"type":"boolean","title":"Verified"},"tenant_id":{"type":"string","title":"Tenant Id"},"current_state":{"type":"string","title":"Current State"},"message":{"type":"string","title":"Message"}},"type":"object","required":["verified","tenant_id","current_state","message"],"title":"OnboardingVerifyResponse","description":"Response for identity verification check."},"app__api__ops__SystemPulse":{"properties":{"active_tenants_24h":{"type":"integer","title":"Active Tenants 24H"},"active_tenants_delta_pct":{"type":"number","title":"Active Tenants Delta Pct"},"incidents_created_24h":{"type":"integer","title":"Incidents Created 24H"},"incidents_delta_pct":{"type":"number","title":"Incidents Delta Pct"},"replays_executed_24h":{"type":"integer","title":"Replays Executed 24H"},"replays_delta_pct":{"type":"number","title":"Replays Delta Pct"},"exports_generated_24h":{"type":"integer","title":"Exports Generated 24H"},"exports_delta_pct":{"type":"number","title":"Exports Delta Pct"},"llm_calls_24h":{"type":"integer","title":"Llm Calls 24H"},"llm_failures_24h":{"type":"integer","title":"Llm Failures 24H"},"llm_failure_rate_pct":{"type":"number","title":"Llm Failure Rate Pct"},"total_cost_24h_usd":{"type":"number","title":"Total Cost 24H Usd"},"system_state":{"type":"string","title":"System State"},"alerts":{"items":{"type":"object"},"type":"array","title":"Alerts"},"computed_at":{"type":"string","title":"Computed At"}},"type":"object","required":["active_tenants_24h","active_tenants_delta_pct","incidents_created_24h","incidents_delta_pct","replays_executed_24h","replays_delta_pct","exports_generated_24h","exports_delta_pct","llm_calls_24h","llm_failures_24h","llm_failure_rate_pct","total_cost_24h_usd","system_state","alerts","computed_at"],"title":"SystemPulse","description":"System health at a glance."},"app__api__policy_layer__EvaluateRequest":{"properties":{"action_type":{"$ref":"#/components/schemas/ActionType"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"},"context":{"type":"object","title":"Context"},"proposed_action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Proposed Action"},"target_resource":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Target Resource"},"estimated_cost":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Cost"},"data_categories":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Data Categories"},"external_endpoints":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"External Endpoints"},"current_sba":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Current Sba"},"proposed_modification":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Proposed Modification"}},"type":"object","required":["action_type"],"title":"EvaluateRequest","description":"Request to evaluate an action against policies."},"app__api__policy_layer__SimulateRequest":{"properties":{"action_type":{"$ref":"#/components/schemas/ActionType"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"},"context":{"type":"object","title":"Context"},"proposed_action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Proposed Action"},"target_resource":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Target Resource"},"estimated_cost":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Cost"},"ignore_cooldowns":{"type":"boolean","title":"Ignore Cooldowns","default":false},"assume_risk_ceiling_headroom":{"type":"number","title":"Assume Risk Ceiling Headroom","default":1.0}},"type":"object","required":["action_type"],"title":"SimulateRequest","description":"Request to simulate policy evaluation (dry run)."},"app__api__recovery__EvaluateRequest":{"properties":{"error_code":{"type":"string","title":"Error Code","description":"Error code to evaluate"},"error_message":{"type":"string","title":"Error Message","description":"Error message"},"skill_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Skill Id","description":"Skill ID for context"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id","description":"Tenant ID for context"},"occurrence_count":{"type":"integer","minimum":1.0,"title":"Occurrence Count","description":"Occurrence count","default":1}},"type":"object","required":["error_code","error_message"],"title":"EvaluateRequest","description":"Request to evaluate rules without persisting."},"app__api__runtime__ReplayRequest":{"properties":{"verify_parity":{"type":"boolean","title":"Verify Parity","description":"Verify determinism parity with original","default":true},"dry_run":{"type":"boolean","title":"Dry Run","description":"Don't execute skills, just validate","default":false},"timeout_seconds":{"type":"number","title":"Timeout Seconds","description":"Maximum time for replay","default":300.0}},"type":"object","title":"ReplayRequest","description":"Request to replay a stored run."},"app__api__runtime__SimulateRequest":{"properties":{"plan":{"items":{"$ref":"#/components/schemas/PlanStep"},"type":"array","title":"Plan","description":"List of steps to simulate"},"budget_cents":{"type":"integer","title":"Budget Cents","description":"Available budget in cents","default":1000},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id","description":"Agent ID for permission checking"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id","description":"Tenant ID for isolation"},"seed":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Seed","description":"Random seed for deterministic simulation","default":42},"timestamp":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timestamp","description":"Frozen timestamp (ISO8601) for determinism"},"save_trace":{"type":"boolean","title":"Save Trace","description":"Whether to save trace to DB","default":false}},"type":"object","required":["plan"],"title":"SimulateRequest","description":"Request to simulate a plan before execution."},"app__api__tenants__AnalyticsProvenance":{"properties":{"sources":{"items":{"type":"string"},"type":"array","title":"Sources","description":"Data sources used"},"window":{"type":"string","title":"Window","description":"Time window (e.g., '24h', '7d', '30d')"},"aggregation":{"type":"string","title":"Aggregation","description":"Aggregation method"},"generated_at":{"type":"string","format":"date-time","title":"Generated At","description":"When this data was computed"}},"type":"object","required":["sources","window","aggregation","generated_at"],"title":"AnalyticsProvenance","description":"Provenance envelope for analytics interpretation panels.\n\nSDSR requires provenance metadata on all interpretation panels to ensure\nthe UI can correctly display how data was derived."},"app__api__workers__ReplayRequest":{"properties":{"replay_token":{"type":"object","title":"Replay Token","description":"Replay token from previous execution"}},"type":"object","required":["replay_token"],"title":"ReplayRequest","description":"Request to replay a previous execution."},"app__api__workers__RunListResponse":{"properties":{"runs":{"items":{"$ref":"#/components/schemas/RunListItem"},"type":"array","title":"Runs"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["runs","total"],"title":"RunListResponse","description":"Response for listing runs."},"app__models__killswitch__IncidentSummary":{"properties":{"id":{"type":"string","title":"Id"},"title":{"type":"string","title":"Title"},"severity":{"type":"string","title":"Severity"},"status":{"type":"string","title":"Status"},"trigger_type":{"type":"string","title":"Trigger Type"},"calls_affected":{"type":"integer","title":"Calls Affected"},"cost_delta_cents":{"type":"number","title":"Cost Delta Cents"},"started_at":{"type":"string","format":"date-time","title":"Started At"},"ended_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ended At"},"duration_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Seconds"}},"type":"object","required":["id","title","severity","status","trigger_type","calls_affected","cost_delta_cents","started_at"],"title":"IncidentSummary","description":"Summary view of an incident."},"app__models__killswitch__ReplayRequest":{"properties":{"dry_run":{"type":"boolean","title":"Dry Run","default":false}},"type":"object","title":"ReplayRequest","description":"Request to replay a call."},"app__models__killswitch__ReplayResult":{"properties":{"original_call_id":{"type":"string","title":"Original Call Id"},"replay_call_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Replay Call Id"},"dry_run":{"type":"boolean","title":"Dry Run"},"same_result":{"type":"boolean","title":"Same Result"},"diff":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Diff"},"enforcement_message":{"type":"string","title":"Enforcement Message","default":" ENFORCEMENT VERIFIED: Replay proves your guardrails are working correctly."}},"type":"object","required":["original_call_id","dry_run","same_result"],"title":"ReplayResult","description":"Result of a replay operation.\n\nLanguage layer: \"Replay proves enforcement\" not \"request re-executed\"\nThis shows PROOF that your guardrails work consistently."},"app__policy__models__PolicyDecision":{"type":"string","enum":["allow","block","modify"],"title":"PolicyDecision","description":"Possible decisions from policy evaluation."},"app__runtime_projections__activity__runs__RunListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/app__runtime_projections__activity__runs__RunSummary"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"has_more":{"type":"boolean","title":"Has More"},"filters_applied":{"type":"object","title":"Filters Applied"},"pagination":{"$ref":"#/components/schemas/Pagination"}},"type":"object","required":["items","total","has_more","filters_applied","pagination"],"title":"RunListResponse","description":"GET /runs response."},"app__runtime_projections__activity__runs__RunSummary":{"properties":{"run_id":{"type":"string","title":"Run Id"},"tenant_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tenant Id"},"project_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Project Id"},"is_synthetic":{"type":"boolean","title":"Is Synthetic"},"source":{"type":"string","title":"Source"},"provider_type":{"type":"string","title":"Provider Type"},"state":{"type":"string","title":"State"},"status":{"type":"string","title":"Status"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"last_seen_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Seen At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"duration_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Duration Ms"},"risk_level":{"type":"string","title":"Risk Level"},"latency_bucket":{"type":"string","title":"Latency Bucket"},"evidence_health":{"type":"string","title":"Evidence Health"},"integrity_status":{"type":"string","title":"Integrity Status"},"incident_count":{"type":"integer","title":"Incident Count","default":0},"policy_draft_count":{"type":"integer","title":"Policy Draft Count","default":0},"policy_violation":{"type":"boolean","title":"Policy Violation","default":false},"input_tokens":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Input Tokens"},"output_tokens":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Output Tokens"},"estimated_cost_usd":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Cost Usd"}},"type":"object","required":["run_id","tenant_id","project_id","is_synthetic","source","provider_type","state","status","started_at","risk_level","latency_bucket","evidence_health","integrity_status"],"title":"RunSummary","description":"O2 table row - one run summary for list view."},"app__runtime_projections__overview__router__SystemPulse":{"properties":{"status":{"type":"string","title":"Status"},"active_incidents":{"type":"integer","title":"Active Incidents"},"pending_decisions":{"type":"integer","title":"Pending Decisions"},"recent_breaches":{"type":"integer","title":"Recent Breaches"}},"type":"object","required":["status","active_incidents","pending_decisions","recent_breaches"],"title":"SystemPulse","description":"System health pulse summary."}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}
