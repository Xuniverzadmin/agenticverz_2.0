# Artifact Registry Entry - Backend Service
# Source: Codebase Survey 2025-12-29

artifact_id: AOS-BE-SVC-CAD-001
name: cost_anomaly_detector.py
type: service
status: active
owner: backend
purpose: M29 cost anomaly detection with aligned rules
authority_level: observe
execution_surface: server
traceability:
  product: system-wide
  console: customer
  domain: cost
  subdomain: anomaly-detection
  order_depth: O3
responsibility: |
  - Absolute spike detection: daily_spend > baseline * 1.4 for 2 consecutive days
  - Sustained drift: 7d rolling avg > baseline_7d * 1.25 for >= 3 days
  - Severity classification: LOW +15-25%, MEDIUM +25-40%, HIGH >40%
  - Budget warning and exceeded detection
  - AnomalyType enum (ABSOLUTE_SPIKE, SUSTAINED_DRIFT, BUDGET_WARNING, BUDGET_EXCEEDED)
dependencies:
  - app.db.CostAnomaly
  - app.db.CostBudget
notes: |
  Location: backend/app/services/cost_anomaly_detector.py
  Milestone: M29
  Invariant: Every anomaly triggers an action, not a chart
