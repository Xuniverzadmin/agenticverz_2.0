# L7 → L6 → L5 Coherency Pass

**Status:** COMPLETE
**Generated:** 2025-12-31
**Method:** End-to-end tracing of L7 artifacts through L6 to L5
**Purpose:** Single pass to verify no broken chains or orphaned producers

---

## Verification Legend

| Level | Meaning |
|-------|---------|
| STATIC | Code path exists |
| SEMANTIC | Dependency is intentional (pending) |

**Current Status:** STATIC verification only.

---

## Coherency Matrix

For each L7-produced artifact that reaches L6, verify L5 consumption.

| L7 Producer | L7 Output | L6 Artifact | L5 Consumer | Consumed? | Notes |
|-------------|-----------|-------------|-------------|-----------|-------|
| Failure Aggregation | candidate_failure_patterns.json | failure_pattern_exports (PostgreSQL), R2 object | Failure catalog expansion | ✅ YES | `failure_aggregation.py` → `failure_catalog.py` |
| Graduation Evaluator | GraduationStatus | graduation_history, m25_graduation_status, capability_lockouts (PostgreSQL) | Run Runner (via capability gates) | ✅ YES | `graduation_evaluator.py` → `runner.py` |
| M10 Metrics Collector | Prometheus gauges | Prometheus metrics | None (L8 only) | N/A | L7→L8, not L7→L6→L5 |
| M10 Orchestrator | Maintenance state | m10_recovery schema | None (L7-internal) | N/A | Control-plane only |
| Cost Snapshot Job | cost_snapshots records | cost_snapshots (PostgreSQL) | Cost Anomaly Detector | ✅ YES | `cost_snapshot_job.py` → `cost_anomaly_detector.py` |
| CostSim Canary | CanaryReport, CB state | costsim_canary_reports, circuit_breaker_state (PostgreSQL) | costsim.py | ✅ YES | `canary.py` → `costsim.py` |
| R2 Retry Worker | Retried uploads | R2 objects | Failure catalog | ✅ YES | `storage.py` → `failure_catalog.py` |

---

## Summary

| Category | Count | Status |
|----------|-------|--------|
| L7 producers with L6 output | 7 | Identified |
| L7→L6→L5 chains verified | 5 | ✅ VERIFIED |
| L7→L8 (metrics only) | 1 | ✅ Correct (no L5 consumer expected) |
| L7-internal (control-plane) | 1 | ✅ Correct (no L5 consumer expected) |

**Result:** No broken chains. All L7→L6 artifacts that should reach L5 are consumed.

---

## Open Questions (For Semantic Verification)

| Question | Status |
|----------|--------|
| Are L7→L6→L5 chains intentional per design? | NOT YET VERIFIED |
| Are there any L5 consumers reading L6 artifacts not produced by L7? | OUT OF SCOPE (L6-internal) |
| Are there L5 components writing to L6 artifacts also written by L7? | NOT YET AUDITED |

---

## Cross-Reference

| Document | Relationship |
|----------|--------------|
| L7_L6_FLOWS.md | L7 producers and their L6 outputs |
| L6_L5_FLOWS.md | L5 consumers and their L6 dependencies |
| L7_INTERNAL_FLOWS.md | L7-internal artifacts (not in this pass) |
| L6_INTERNAL_FLOWS.md | L6-internal coherency |

---

**Generated by:** Claude Opus 4.5
**Verification Level:** STATIC only
