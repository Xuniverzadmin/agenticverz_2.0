# .env.example - AOS / Agenticverz 2.0 Configuration
# Copy to .env and configure
#
# IMPORTANT: Secrets are now managed in HashiCorp Vault
# See: scripts/ops/vault/README.md

# ===========================================
# Vault Configuration (Required for secrets)
# ===========================================
VAULT_ADDR=http://127.0.0.1:8200
# VAULT_TOKEN loaded from /opt/vault/.vault-keys at runtime

# ===========================================
# Core Settings
# ===========================================
ENV=development
PORT=8000
HOST=0.0.0.0

# ===========================================
# Database
# ===========================================
# Password managed in Vault: agenticverz/database
DATABASE_URL=postgresql://nova:VAULT_MANAGED@localhost:6432/nova_aos

# ===========================================
# Redis
# ===========================================
REDIS_URL=redis://localhost:6379/0

# ===========================================
# OIDC / Keycloak
# ===========================================
OIDC_ISSUER_URL=https://auth-dev.xuniverz.com/realms/agentiverz-dev
OIDC_CLIENT_ID=aos-backend
# OIDC_CLIENT_SECRET in Vault: agenticverz/app-prod
OIDC_VERIFY_SSL=true

# ===========================================
# RBAC
# ===========================================
RBAC_ENABLED=true
RBAC_ENFORCE=true
# MACHINE_SECRET_TOKEN in Vault: agenticverz/app-prod

# ===========================================
# LLM Providers
# ===========================================
PLANNER_BACKEND=anthropic
# ANTHROPIC_API_KEY in Vault: agenticverz/external-apis

# ===========================================
# API Authentication
# ===========================================
# AOS_API_KEY in Vault: agenticverz/app-prod

# ===========================================
# Webhook
# ===========================================
WEBHOOK_KEY_VERSION=v1
# WEBHOOK_KEY in Vault: agenticverz/app-prod (if needed)

# ===========================================
# Multi-Tenancy
# ===========================================
TENANT_HEADER=X-Tenant-Id
ENFORCE_TENANCY=false

# ===========================================
# Worker Configuration
# ===========================================
WORKER_CONCURRENCY=4
WORKER_POLL_INTERVAL=2.0
RUN_MAX_ATTEMPTS=5
EVENT_PUBLISHER=logging

# ===========================================
# GitHub Integration (Mismatch Issue Automation)
# ===========================================
# GITHUB_TOKEN in Vault: agenticverz/external-apis
GITHUB_REPO=Xuniverzadmin/agenticverz_2.0

# ===========================================
# Secrets Inventory (in Vault)
# ===========================================
# Path: agenticverz/app-prod
#   - AOS_API_KEY
#   - MACHINE_SECRET_TOKEN
#   - OIDC_CLIENT_SECRET
#
# Path: agenticverz/database
#   - POSTGRES_USER, POSTGRES_PASSWORD
#   - DATABASE_URL (full connection string)
#   - KEYCLOAK_DB_USER, KEYCLOAK_DB_PASSWORD
#
# Path: agenticverz/external-apis
#   - ANTHROPIC_API_KEY
#   - GITHUB_TOKEN
#
# Path: agenticverz/keycloak-admin
#   - KEYCLOAK_ADMIN, KEYCLOAK_ADMIN_PASSWORD
#
# To load secrets: source scripts/ops/vault/vault_env.sh app-prod
